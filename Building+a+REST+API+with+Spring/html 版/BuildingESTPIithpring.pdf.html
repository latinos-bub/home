<!DOCTYPE html><!--[if IE]>  <html class="ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="BuildingESTPIithpring.pdf_files/style.css" />
	</head>
	<body>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_01.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_01.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:13.1101em;top: 21.379em; "><span class="stl_07 stl_08 stl_09" style="word-spacing:0.0017em;">Building a &nbsp;</span></div>
					<div class="stl_01" style="left:9.5606em;top: 28.6963em; "><span class="stl_07 stl_08 stl_09" style="word-spacing:-0.0403em;">REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_02.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_02.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_10 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; "><span class="stl_11 stl_12 stl_13" style="word-spacing:-0.0004em;">TABLE OF CONTENTS &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.5775em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0007em;">1: BOOTSTRAP A WEB APPLICATION WITH SPRING 4 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.9108em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0006em;">2: BUILD A REST API WITH SPRING 4 AND JAVA CONFIG &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.2441em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0006em;">3: SPRING SECURITY FOR A REST API &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.5775em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0007em;">4: SPRING SECURITY BASIC AUTHENTICATION &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.9108em; "><span class="stl_14 stl_12 stl_16" style="word-spacing:-0.0007em;">5: SPRING SECURITY DIGEST AUTHENTICATION &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.2441em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0004em;">6: BASIC AND DIGEST AUTHENTICATION FOR A REST SERVICE &nbsp;</span></div>
					<div class="stl_01" style="left:5.5613em;top: 31.9941em; "><span class="stl_14 stl_12 stl_16" style="word-spacing:-0.0011em;">WITH SPRING SECURITY &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.3275em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0007em;">7: HTTP MESSAGE CONVERTERS WITH THE SPRING FRAMEWORK &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.6608em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0003em;">8: REST API DISCOVERABILITY AND HATEOAS &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.9941em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0007em;">9: HATEOAS FOR A SPRING REST SERVICE &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.3275em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0006em;">10: ETAGS FOR REST WITH SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.6608em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0004em;">11: REST PAGINATION IN SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.9941em; "><span class="stl_14 stl_12 stl_16" style="word-spacing:-0.0006em;">12: ERROR HANDLING FOR REST WITH SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.3275em; "><span class="stl_14 stl_12 stl_16" style="word-spacing:-0.0008em;">13: VERSIONING A REST API &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.6608em; "><span class="stl_14 stl_12 stl_15" style="word-spacing:-0.0006em;">14: TESTING REST WITH MULTIPLE MIME TYPESA &nbsp;</span></div>
					<div class="stl_01" style="left:43.0859em;top: 62.1175em; "><span class="stl_17 stl_08 stl_18">Page &nbsp;</span></div>
					<div class="stl_01" style="left:44.5682em;top: 62.1175em; "><span class="stl_17 stl_08 stl_19" style="word-spacing:0.703em;">2 /</span><span class="stl_17 stl_08 stl_19" style="word-spacing:0.4577em;">&nbsp;</span><span class="stl_17 stl_08 stl_20">113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_03.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_03.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0007em;">1: BOOTSTRAP A WEB APPLICATION WITH SPRING 4 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.0888em; "><span class="stl_24 stl_08 stl_25" style="word-spacing:-0.026em;">1. Overview............. .........................................................................................................................................................................</span><span class="stl_24 stl_08 stl_26">.</span><span class="stl_24 stl_08 stl_19">1</span><span class="stl_24 stl_08 stl_19">1 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.0888em; "><span class="stl_24 stl_08 stl_27" style="word-spacing:-0.0082em;">2. The Maven pom.xml &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.0888em; "><span class="stl_24 stl_08 stl_19" style="word-spacing:-0.015em;">2.1. The </span><span class="stl_24 stl_08 stl_28" style="font-style:italic; word-spacing:0.0065em;">cglib </span><span class="stl_24 stl_08 stl_29" style="word-spacing:-0.0083em;">dependency before </span><span class="stl_30 stl_08 stl_31" style="word-spacing:0.002em;">Spring 3.2 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.0888em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.015em;">2.2. The </span><span class="stl_32 stl_08 stl_28" style="font-style:italic; word-spacing:0.0065em;">cglib </span><span class="stl_32 stl_08 stl_33" style="word-spacing:-0.0118em;">dependency in </span><span class="stl_30 stl_08 stl_31" style="word-spacing:0.002em;">Spring 3.2 </span><span class="stl_32 stl_08 stl_34" style="word-spacing:0.0094em;">and beyond &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.0888em; "><span class="stl_32 stl_08 stl_35" style="word-spacing:-0.0095em;">3. The Java based Web Configuration</span><span class="stl_32 stl_08 stl_19" style="word-spacing:2.097em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0873em;">..................................................................................................................... 13 &nbsp;</span></div>
					<div class="stl_01" style="left:16.2257em;top: 15.0888em; "><span class="stl_24 stl_08 stl_19">...................................................................................................................................................</span><span class="stl_24 stl_08 stl_36">.</span><span class="stl_24 stl_08 stl_19">1</span><span class="stl_24 stl_08 stl_19">1 &nbsp;</span></div>
					<div class="stl_01" style="left:25.2707em;top: 17.0888em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0833em;">...................................................................................................... 12 &nbsp;</span></div>
					<div class="stl_01" style="left:28.2857em;top: 19.0888em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0873em;">....................................................................................... 13 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.0888em; "><span class="stl_32 stl_08 stl_37" style="word-spacing:-0.0243em;">3.1. The web.xm</span><span class="stl_32 stl_08 stl_38">l</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0696em;">. ......................................................................................................................................................................... 15 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.0888em; "><span class="stl_32 stl_08 stl_39" style="word-spacing:0.0024em;">4. Conclusio</span><span class="stl_32 stl_08 stl_40">n</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0506em;">...... ........................................................................................................................................................................</span><span class="stl_32 stl_08 stl_41">.</span><span class="stl_32 stl_08 stl_19">1</span><span class="stl_32 stl_08 stl_19">6 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.5833em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0006em;">2: BUILD A REST API WITH SPRING 4 AND JAVA &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.5833em; "><span class="stl_22 stl_12 stl_23">CONFIG &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.1722em; "><span class="stl_32 stl_08 stl_25" style="word-spacing:-0.026em;">1. Overview............. ........................................................................................................................................................................</span><span class="stl_32 stl_08 stl_42">.</span><span class="stl_32 stl_08 stl_19">1</span><span class="stl_32 stl_08 stl_19">8 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.1722em; "><span class="stl_32 stl_08 stl_31" style="word-spacing:-0.0056em;">2. Understanding REST in Spring</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.996em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">...................................................................................................................................</span><span class="stl_32 stl_08 stl_43">.</span><span class="stl_32 stl_08 stl_19">1</span><span class="stl_32 stl_08 stl_19">8 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.1722em; "><span class="stl_32 stl_08 stl_44" style="word-spacing:-0.0131em;">3. The Java Configuration</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.0578em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">..................................................................................................................................................</span><span class="stl_32 stl_08 stl_45">.</span><span class="stl_32 stl_08 stl_19">1</span><span class="stl_32 stl_08 stl_19">9 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.1722em; z-index:1874; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.03em;">4. </span><span class="stl_32 stl_08 stl_46">T</span><span class="stl_32 stl_08 stl_19">e</span><span class="stl_32 stl_08 stl_47" style="word-spacing:-0.0014em;">sting the Spring Context &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.1722em; "><span class="stl_32 stl_08 stl_48" style="word-spacing:-0.0082em;">5. The Controlle</span><span class="stl_32 stl_08 stl_49">r</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_50" style="word-spacing:-0.051em;">. .........................................................................................................................................................................20 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.1722em; "><span class="stl_32 stl_08 stl_27" style="word-spacing:-0.0072em;">6. Mapping the HTTP response codes</span><span class="stl_32 stl_08 stl_19" style="word-spacing:2.1699em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0833em;">..................................................................................................................... 21 &nbsp;</span></div>
					<div class="stl_01" style="left:19.2407em;top: 44.1722em; "><span class="stl_32 stl_08 stl_19">...................................................................................................................................</span><span class="stl_32 stl_08 stl_45">.</span><span class="stl_32 stl_08 stl_19">1</span><span class="stl_32 stl_08 stl_19">9 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.1722em; "><span class="stl_32 stl_08 stl_51" style="word-spacing:0.0036em;">6.1. Unmapped Requests</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.1468em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0833em;">................................................................................................................................................... 21 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.1722em; "><span class="stl_32 stl_08 stl_52" style="word-spacing:0.0043em;">6.2. Valid, Mapped Requests ...................................................................................................................................................22 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.1722em; "><span class="stl_32 stl_08 stl_53" style="word-spacing:0.0058em;">6.3. Client Erro</span><span class="stl_32 stl_08 stl_54">r</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_50" style="word-spacing:-0.051em;">... .........................................................................................................................................................................22 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.1722em; "><span class="stl_32 stl_08 stl_55" style="word-spacing:0.004em;">6.4. Using </span><span class="stl_32 stl_08 stl_53" style="font-style:italic;">@ExceptionHandler &nbsp;</span></div>
					<div class="stl_01" style="left:19.2407em;top: 56.1722em; "><span class="stl_32 stl_08 stl_50">....................................................................................................................................22 &nbsp;</span></div>
					<div class="stl_01" style="left:43.084em;top: 62.1175em; "><span class="stl_56 stl_08 stl_18">Page &nbsp;</span></div>
					<div class="stl_01" style="left:44.5663em;top: 62.1175em; "><span class="stl_56 stl_08 stl_19" style="word-spacing:0.703em;">3 /</span><span class="stl_56 stl_08 stl_19" style="word-spacing:0.4577em;">&nbsp;</span><span class="stl_56 stl_08 stl_20">113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_04.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_04.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.262em; "><span class="stl_32 stl_08 stl_53" style="word-spacing:-0.0045em;">7. Additional Maven dependencies</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.2099em;">&nbsp;</span><span class="stl_32 stl_08 stl_58">................................................................................................................................23 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.262em; "><span class="stl_32 stl_08 stl_39" style="word-spacing:0.0024em;">8. Conclusio</span><span class="stl_32 stl_08 stl_59">n</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_60" style="word-spacing:-0.0512em;">...... .....................................................................................................................................................................24 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.7565em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0006em;">3: SPRING SECURITY FOR A REST API &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.3453em; "><span class="stl_32 stl_08 stl_61" style="word-spacing:-0.0266em;">1. Overview............. .....................................................................................................................................................................26 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.3453em; "><span class="stl_32 stl_08 stl_52" style="word-spacing:-0.0082em;">2. Spring Security in the </span><span class="stl_32 stl_08 stl_47" style="font-style:italic; word-spacing:0.6431em;">web.xml </span><span class="stl_32 stl_08 stl_25">................................................................................................................................26 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.3453em; "><span class="stl_32 stl_08 stl_62" style="word-spacing:-0.0153em;">3. The Security Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.3453em; "><span class="stl_32 stl_08 stl_63" style="word-spacing:-0.0141em;">3.2. The Entry Point</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.7583em;">&nbsp;</span><span class="stl_32 stl_08 stl_60">..............................................................................................................................................................28 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.3453em; "><span class="stl_32 stl_08 stl_29" style="word-spacing:-0.0097em;">3.3. The Login Form for REST</span><span class="stl_32 stl_08 stl_19" style="word-spacing:2.7634em;">&nbsp;</span><span class="stl_32 stl_08 stl_25">................................................................................................................................29 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.3453em; "><span class="stl_32 stl_08 stl_62" style="word-spacing:-0.0042em;">3.4. Authentication should return 200 instead of 301</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.7877em;">&nbsp;</span><span class="stl_32 stl_08 stl_61">...................................................................................29 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.3453em; "><span class="stl_32 stl_08 stl_62" style="word-spacing:-0.0017em;">3.5. Failed Authentication should return 401 instead</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.2527em;">&nbsp;</span><span class="stl_32 stl_08 stl_64" style="word-spacing:-0.0167em;">of 302</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.6757em;">&nbsp;</span><span class="stl_32 stl_08 stl_65">....................................................................30 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.3453em; "><span class="stl_32 stl_08 stl_51" style="word-spacing:-0.0133em;">3.6. The Authentication Manager and Provider</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.5688em;">&nbsp;</span><span class="stl_32 stl_08 stl_50">...................................................................................................31 &nbsp;</span></div>
					<div class="stl_01" style="left:19.2407em;top: 24.3453em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.1003em;">................................................................................................................................ 27 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.3453em; "><span class="stl_32 stl_08 stl_27" style="word-spacing:-0.0108em;">3.7 Finally – Authentication against the running</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.7539em;">&nbsp;</span><span class="stl_32 stl_08 stl_60" style="word-spacing:0.0164em;">REST Service .....................................................................31 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.3453em; "><span class="stl_32 stl_08 stl_63" style="word-spacing:-0.0062em;">4. Maven and other trouble</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.4003em;">&nbsp;</span><span class="stl_32 stl_08 stl_58">...............................................................................................................................................32 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.3453em; "><span class="stl_32 stl_08 stl_25" style="word-spacing:-0.0483em;">5. Conclusion ....... .....................................................................................................................................................................32 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.8398em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0007em;">4: SPRING SECURITY BASIC AUTHENTICATION &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.4287em; "><span class="stl_32 stl_08 stl_58" style="word-spacing:-0.0266em;">1. Overview............. .....................................................................................................................................................................34 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.4287em; "><span class="stl_32 stl_08 stl_66" style="word-spacing:-0.0107em;">2. The Spring Security Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:22.2557em;top: 53.4287em; "><span class="stl_32 stl_08 stl_25">.................................................................................................................34 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.4287em; "><span class="stl_32 stl_08 stl_31" style="word-spacing:-0.0132em;">3. Consuming The Secured Application</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.146em;">&nbsp;</span><span class="stl_32 stl_08 stl_61">.................................................................................................................35 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.4287em; "><span class="stl_32 stl_08 stl_44" style="word-spacing:-0.0077em;">4. Further Configuration – The Entry Point</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.1468em;">&nbsp;</span><span class="stl_32 stl_08 stl_25">.................................................................................................................36 &nbsp;</span></div>
					<div class="stl_01" style="left:43.0699em;top: 62.1175em; "><span class="stl_56 stl_08 stl_18">Page &nbsp;</span></div>
					<div class="stl_01" style="left:44.5522em;top: 62.1175em; "><span class="stl_56 stl_08 stl_19" style="word-spacing:0.703em;">4 /</span><span class="stl_56 stl_08 stl_19" style="word-spacing:0.4578em;">&nbsp;</span><span class="stl_56 stl_08 stl_20">113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_05.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_05.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.262em; "><span class="stl_32 stl_08 stl_27" style="word-spacing:-0.0081em;">5. The Maven Dependencie</span><span class="stl_32 stl_08 stl_67">s</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_19">.................................................................................................................................................</span><span class="stl_32 stl_08 stl_68">.</span><span class="stl_32 stl_08 stl_19">3</span><span class="stl_32 stl_08 stl_19">7 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.262em; "><span class="stl_32 stl_08 stl_39" style="word-spacing:0.0024em;">6. Conclusio</span><span class="stl_32 stl_08 stl_69">n</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0505em;">...... .........................................................................................................................................................................38 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.7565em; "><span class="stl_22 stl_12 stl_50" style="word-spacing:-0.0007em;">5: SPRING SECURITY DIGEST AUTHENTICATION &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.3453em; "><span class="stl_32 stl_08 stl_25" style="word-spacing:-0.026em;">1. Overview............. .........................................................................................................................................................................40 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.3453em; "><span class="stl_32 stl_08 stl_70" style="word-spacing:-0.0207em;">2. The Security XML Configuration</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.6445em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">....................................................................................................................................40 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.3453em; "><span class="stl_32 stl_08 stl_31" style="word-spacing:-0.0104em;">3. Consuming the Secured Application &nbsp;</span></div>
					<div class="stl_01" style="left:22.2557em;top: 24.3453em; "><span class="stl_32 stl_08 stl_19">.....................................................................................................................42 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.3453em; "><span class="stl_32 stl_08 stl_60" style="word-spacing:-0.0106em;">4. The Maven Dependencies...................................................................................................................................................43 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.3453em; "><span class="stl_32 stl_08 stl_71" style="word-spacing:-0.0565em;">5. Conclusion ....... ........................................................................................................................................................................ 44 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.8398em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0003em;">6: BASIC AND DIGEST AUTHENTICATION FOR A &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.8398em; "><span class="stl_22 stl_12 stl_50" style="word-spacing:-0.0008em;">REST SERVICE WITH SPRING SECURITY &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.4287em; "><span class="stl_32 stl_08 stl_25" style="word-spacing:-0.0452em;">1. Overview............. ........................................................................................................................................................................ 46 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.4287em; "><span class="stl_32 stl_08 stl_64" style="word-spacing:-0.0078em;">2. Configuration of Basic Authentication</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.8607em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0823em;">.................................................................................................................... 46 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.4287em; "><span class="stl_32 stl_08 stl_60" style="word-spacing:-0.0106em;">2.1. Satisfying the stateless constraint – getting rid of sessions ........................................................................47 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.4287em; "><span class="stl_32 stl_08 stl_47" style="word-spacing:-0.0083em;">3. Configuration of Digest Authentication</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.5115em;">&nbsp;</span><span class="stl_32 stl_08 stl_72">.....................................................................................................................47 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.4287em; "><span class="stl_32 stl_08 stl_70" style="word-spacing:0.0009em;">4. Supporting both authentication protocols in the same RESTful service &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.4287em; "><span class="stl_32 stl_08 stl_37" style="word-spacing:-0.0127em;">4.1. Anonymous request</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.4704em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0823em;">.................................................................................................................................................. 49 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.4287em; "><span class="stl_32 stl_08 stl_73" style="word-spacing:-0.002em;">4.2. Request with authentication credentials</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.9559em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0823em;">..................................................................................................... 49 &nbsp;</span></div>
					<div class="stl_01" style="left:37.3297em;top: 49.4287em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0833em;">......................................... 48 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.4287em; z-index:2513; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.03em;">5. </span><span class="stl_32 stl_08 stl_46">T</span><span class="stl_32 stl_08 stl_19">e</span><span class="stl_32 stl_08 stl_74" style="word-spacing:0.0004em;">sting both scenarios</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.1852em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0823em;">.................................................................................................................................................. 49 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.4287em; "><span class="stl_32 stl_08 stl_39" style="word-spacing:0.0024em;">6. Conclusio</span><span class="stl_32 stl_08 stl_69">n</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_23" style="word-spacing:-0.0509em;">...... .........................................................................................................................................................................50 &nbsp;</span></div>
					<div class="stl_01" style="left:43.0835em;top: 62.1175em; "><span class="stl_56 stl_08 stl_18">Page &nbsp;</span></div>
					<div class="stl_01" style="left:44.5658em;top: 62.1175em; "><span class="stl_56 stl_08 stl_19" style="word-spacing:0.703em;">5 /</span><span class="stl_56 stl_08 stl_19" style="word-spacing:0.4578em;">&nbsp;</span><span class="stl_56 stl_08 stl_20">113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_06.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_06.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0007em;">7: HTTP MESSAGE CONVERTERS WITH THE &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.5em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0011em;">SPRING FRAMEWORK &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.0888em; "><span class="stl_32 stl_08 stl_61" style="word-spacing:-0.0266em;">1. Overview............. .................................................................................................................................................................52 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.0888em; "><span class="stl_32 stl_08 stl_75" style="word-spacing:-0.0145em;">2. The Basic</span><span class="stl_32 stl_08 stl_76">s</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_60" style="word-spacing:-0.0512em;">........ .................................................................................................................................................................52 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.0888em; "><span class="stl_32 stl_08 stl_77" style="word-spacing:0.0043em;">2.1. Enable Web MVC</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.2582em;">&nbsp;</span><span class="stl_32 stl_08 stl_60">..........................................................................................................................................................52 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.0888em; "><span class="stl_32 stl_08 stl_70" style="word-spacing:-0.0044em;">2.2. The Default Message Converters &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.0888em; "><span class="stl_32 stl_08 stl_78" style="word-spacing:-0.0092em;">3. Client-Server Communication – JSON only &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.0888em; "><span class="stl_32 stl_08 stl_78" style="word-spacing:0.022em;">3.1. High Level Content Negotiation ............................................................................................................................54 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.0888em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:0em;">3.2. </span><span class="stl_32 stl_08 stl_29" style="font-style:italic; word-spacing:3.0309em;">@ResponseBody </span><span class="stl_32 stl_08 stl_23">...........................................................................................................................................54 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.0888em; "><span class="stl_32 stl_08 stl_79" style="word-spacing:0.0041em;">3.3. @RequestBody</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.7671em;">&nbsp;</span><span class="stl_32 stl_08 stl_60">..........................................................................................................................................................55 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.0888em; "><span class="stl_32 stl_08 stl_79" style="word-spacing:-0.0014em;">4. Custom Converters Configuration – adding XML Support</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.8181em;">&nbsp;</span><span class="stl_32 stl_08 stl_60">................................................................56 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.0888em; "><span class="stl_32 stl_08 stl_80" style="word-spacing:0.0061em;">5. Using Spring’s </span><span class="stl_32 stl_08 stl_81" style="font-style:italic; word-spacing:0.0175em;">RestTemplate </span><span class="stl_32 stl_08 stl_82" style="word-spacing:0.0023em;">with Http Message Converters</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.7883em;">&nbsp;</span><span class="stl_32 stl_08 stl_60">................................................................58 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.0888em; "><span class="stl_32 stl_08 stl_53" style="word-spacing:-0.0047em;">5.1. Retrieving the Resource with no Accept Header</span><span class="stl_32 stl_08 stl_19" style="word-spacing:2.2149em;">&nbsp;</span><span class="stl_32 stl_08 stl_50">...............................................................................58 &nbsp;</span></div>
					<div class="stl_01" style="left:22.2557em;top: 21.0888em; "><span class="stl_32 stl_08 stl_25">.............................................................................................................53 &nbsp;</span></div>
					<div class="stl_01" style="left:25.2707em;top: 23.0888em; "><span class="stl_32 stl_08 stl_50">..............................................................................................54 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.0888em; "><span class="stl_32 stl_08 stl_64" style="word-spacing:0.0008em;">5.2. Retrieving a Resource with </span><span class="stl_32 stl_08 stl_31" style="font-style:italic; word-spacing:-0.0291em;">application/xml </span><span class="stl_32 stl_08 stl_44" style="word-spacing:0.0056em;">Accept header</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.2261em;">&nbsp;</span><span class="stl_32 stl_08 stl_60">................................................................58 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.0888em; "><span class="stl_32 stl_08 stl_64" style="word-spacing:0.0008em;">5.3. Retrieving a Resource with </span><span class="stl_32 stl_08 stl_72" style="font-style:italic; word-spacing:-0.0322em;">application/json </span><span class="stl_32 stl_08 stl_71" style="word-spacing:-0.0016em;">Accept header ................................................................59 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.0888em; "><span class="stl_32 stl_08 stl_83" style="word-spacing:0.0032em;">5.4. Update a Resource with XML Content-Type</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.1028em;">&nbsp;</span><span class="stl_32 stl_08 stl_50">..............................................................................................60 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.0888em; "><span class="stl_32 stl_08 stl_39" style="word-spacing:0.0024em;">6. Conclusio</span><span class="stl_32 stl_08 stl_69">n</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0708em;">...... ................................................................................................................................................................. 61 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.5833em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0003em;">8: REST API DISCOVERABILITY AND HATEOAS &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.1722em; "><span class="stl_32 stl_08 stl_72" style="word-spacing:-0.0263em;">1. Overview............. .................................................................................................................................................................63 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.1722em; "><span class="stl_32 stl_08 stl_70" style="word-spacing:-0.0182em;">2. Why make the API Discoverable</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.3895em;">&nbsp;</span><span class="stl_32 stl_08 stl_50">............................................................................................................................63 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.1722em; "><span class="stl_32 stl_08 stl_55" style="word-spacing:-0.0103em;">3. Discoverability Scenarios (Driven by tests) &nbsp;</span></div>
					<div class="stl_01" style="left:25.2707em;top: 58.1722em; "><span class="stl_32 stl_08 stl_71">..............................................................................................64 &nbsp;</span></div>
					<div class="stl_01" style="left:43.0704em;top: 62.1175em; "><span class="stl_56 stl_08 stl_18">Page &nbsp;</span></div>
					<div class="stl_01" style="left:44.5527em;top: 62.1175em; "><span class="stl_56 stl_08 stl_19" style="word-spacing:0.703em;">6 /</span><span class="stl_56 stl_08 stl_19" style="word-spacing:0.4578em;">&nbsp;</span><span class="stl_56 stl_08 stl_20">113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_07.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_07.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 7.262em; "><span class="stl_32 stl_08 stl_74" style="word-spacing:-0.0189em;">3.1. Discover the valid HTTP methods &nbsp;</span></div>
					<div class="stl_01" style="left:22.327em;top: 7.262em; "><span class="stl_32 stl_08 stl_19">...................................................................................................................</span><span class="stl_32 stl_08 stl_84">.</span><span class="stl_32 stl_08 stl_19">6</span><span class="stl_32 stl_08 stl_19">4 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 9.262em; "><span class="stl_32 stl_08 stl_62" style="word-spacing:-0.0095em;">3.2. Discover the URI of newly created Resource</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.4427em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">....................................................................................................</span><span class="stl_32 stl_08 stl_84">.</span><span class="stl_32 stl_08 stl_19">6</span><span class="stl_32 stl_08 stl_19">4 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 11.262em; "><span class="stl_32 stl_08 stl_39" style="word-spacing:-0.0159em;">3.3. Discover the URI to GET All Resources of that type</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.2732em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">.....................................................................................</span><span class="stl_32 stl_08 stl_85">.</span><span class="stl_32 stl_08 stl_19">6</span><span class="stl_32 stl_08 stl_19">5 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 13.262em; "><span class="stl_32 stl_08 stl_73" style="word-spacing:-0.0003em;">4. Other potential discoverable URIs and microformats</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.4459em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">.....................................................................................</span><span class="stl_32 stl_08 stl_86">.</span><span class="stl_32 stl_08 stl_19">6</span><span class="stl_32 stl_08 stl_19">6 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 15.262em; "><span class="stl_32 stl_08 stl_71" style="word-spacing:-0.0474em;">5. Conclusion ....... .........................................................................................................................................................................67 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 20.7565em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0007em;">9: HATEOAS FOR A SPRING REST SERVICE &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 26.3453em; "><span class="stl_32 stl_08 stl_25" style="word-spacing:-0.026em;">1. Overview............. .......................................................................................................................................................................</span><span class="stl_32 stl_08 stl_87">.</span><span class="stl_32 stl_08 stl_19">6</span><span class="stl_32 stl_08 stl_19">9 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 28.3453em; "><span class="stl_32 stl_08 stl_70" style="word-spacing:-0.0083em;">2. Decouple Discoverability through events &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 30.3453em; "><span class="stl_32 stl_08 stl_63" style="word-spacing:-0.0029em;">3. Make the URI of a newly created Resource discoverable &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 32.3453em; "><span class="stl_32 stl_08 stl_64" style="word-spacing:0em;">4. Get of single Resource</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.1017em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0907em;">................................................................................................................................................... 71 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 34.3453em; "><span class="stl_32 stl_08 stl_29" style="word-spacing:-0.0065em;">5. Discoverability at the Root</span><span class="stl_32 stl_08 stl_19" style="word-spacing:2.7824em;">&nbsp;</span><span class="stl_32 stl_08 stl_50">....................................................................................................................................72 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 36.3453em; "><span class="stl_32 stl_08 stl_82" style="word-spacing:-0.0022em;">5.1. Discoverability is not about changing URIs</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.2481em;">&nbsp;</span><span class="stl_32 stl_08 stl_50">......................................................................................................73 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 38.3453em; "><span class="stl_32 stl_08 stl_66" style="word-spacing:-0.0042em;">6. Caveats of Discoverability</span><span class="stl_32 stl_08 stl_19" style="word-spacing:2.8026em;">&nbsp;</span><span class="stl_32 stl_08 stl_50">....................................................................................................................................73 &nbsp;</span></div>
					<div class="stl_01" style="left:25.342em;top: 28.3453em; "><span class="stl_32 stl_08 stl_19">....................................................................................................</span><span class="stl_32 stl_08 stl_86">.</span><span class="stl_32 stl_08 stl_19">6</span><span class="stl_32 stl_08 stl_19">9 &nbsp;</span></div>
					<div class="stl_01" style="left:31.372em;top: 30.3453em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0907em;">........................................................................ 71 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 40.3453em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0254em;">7. Conclusion........ .........................................................................................................................................................................74 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 45.8398em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0006em;">10: ETAGS FOR REST WITH SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 51.4287em; "><span class="stl_32 stl_08 stl_60" style="word-spacing:-0.026em;">1. Overview............. .........................................................................................................................................................................76 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 53.4287em; z-index:2437; "><span class="stl_32 stl_08 stl_31" style="word-spacing:-0.008em;">2. REST and E</span><span class="stl_32 stl_08 stl_46">T</span><span class="stl_32 stl_08 stl_19">a</span><span class="stl_32 stl_08 stl_19">g</span><span class="stl_32 stl_08 stl_88">s</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_19">........................................................................................................................................................................76 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 55.4287em; "><span class="stl_32 stl_08 stl_23" style="word-spacing:-0.0117em;">3. Client-Server communication with </span><span class="stl_32 stl_08 stl_19" style="font-style:italic;">curl &nbsp;</span></div>
					<div class="stl_01" style="left:25.342em;top: 55.4287em; "><span class="stl_32 stl_08 stl_89">......................................................................................................77 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 57.4287em; z-index:2765; "><span class="stl_32 stl_08 stl_19" style="word-spacing:0em;">4. E</span><span class="stl_32 stl_08 stl_46">T</span><span class="stl_32 stl_08 stl_19">a</span><span class="stl_32 stl_08 stl_33" style="word-spacing:0.0012em;">g support in Spring</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.1546em;">&nbsp;</span><span class="stl_32 stl_08 stl_71">...................................................................................................................................................78 &nbsp;</span></div>
					<div class="stl_01" style="left:43.117em;top: 62.1175em; "><span class="stl_56 stl_08 stl_18">Page &nbsp;</span></div>
					<div class="stl_01" style="left:44.5993em;top: 62.1175em; "><span class="stl_56 stl_08 stl_19" style="word-spacing:0.703em;">7 /</span><span class="stl_56 stl_08 stl_19" style="word-spacing:0.4578em;">&nbsp;</span><span class="stl_56 stl_08 stl_20">113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_08.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_08.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 7.262em; z-index:66; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.03em;">5. </span><span class="stl_32 stl_08 stl_46">T</span><span class="stl_32 stl_08 stl_19">e</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.001em;">sting E</span><span class="stl_32 stl_08 stl_46">T</span><span class="stl_32 stl_08 stl_19">a</span><span class="stl_32 stl_08 stl_25" style="word-spacing:-0.0513em;">gs.... .........................................................................................................................................................................79 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 9.262em; z-index:251; "><span class="stl_32 stl_08 stl_19" style="word-spacing:0em;">6. E</span><span class="stl_32 stl_08 stl_46">T</span><span class="stl_32 stl_08 stl_19">a</span><span class="stl_32 stl_08 stl_28" style="word-spacing:0.0064em;">gs are BI</span><span class="stl_32 stl_08 stl_90">G</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_25" style="word-spacing:-0.0513em;">.. .........................................................................................................................................................................81 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 11.262em; "><span class="stl_32 stl_08 stl_23" style="word-spacing:-0.0255em;">7. Conclusion........ .......................................................................................................................................................................</span><span class="stl_32 stl_08 stl_91">.</span><span class="stl_32 stl_08 stl_19">8</span><span class="stl_32 stl_08 stl_19">2 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 16.7565em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0004em;">11: REST PAGINATION IN SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 22.3453em; "><span class="stl_32 stl_08 stl_25" style="word-spacing:-0.026em;">1. Overview............. .......................................................................................................................................................................</span><span class="stl_32 stl_08 stl_92">.</span><span class="stl_32 stl_08 stl_19">8</span><span class="stl_32 stl_08 stl_19">4 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 24.3453em; "><span class="stl_32 stl_08 stl_53" style="word-spacing:0.0019em;">2. Page as Resource vs Page as Representation</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.5799em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">....................................................................................................</span><span class="stl_32 stl_08 stl_93">.</span><span class="stl_32 stl_08 stl_19">8</span><span class="stl_32 stl_08 stl_19">4 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 26.3453em; "><span class="stl_32 stl_08 stl_94" style="word-spacing:-0.0088em;">3. The Controlle</span><span class="stl_32 stl_08 stl_95">r</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0506em;">. .......................................................................................................................................................................</span><span class="stl_32 stl_08 stl_96">.</span><span class="stl_32 stl_08 stl_19">8</span><span class="stl_32 stl_08 stl_19">5 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 28.3453em; "><span class="stl_32 stl_08 stl_82" style="word-spacing:-0.0222em;">4. Discoverability for REST pagination &nbsp;</span></div>
					<div class="stl_01" style="left:22.327em;top: 28.3453em; "><span class="stl_32 stl_08 stl_19">...................................................................................................................</span><span class="stl_32 stl_08 stl_97">.</span><span class="stl_32 stl_08 stl_19">8</span><span class="stl_32 stl_08 stl_19">5 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 30.3453em; z-index:1355; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.03em;">5. </span><span class="stl_32 stl_08 stl_46">T</span><span class="stl_32 stl_08 stl_19">e</span><span class="stl_32 stl_08 stl_39" style="word-spacing:0.0025em;">st Driving Pagination</span><span class="stl_32 stl_08 stl_19" style="word-spacing:1.1662em;">&nbsp;</span><span class="stl_32 stl_08 stl_71">...................................................................................................................................................87 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 32.3453em; z-index:1532; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.03em;">6. </span><span class="stl_32 stl_08 stl_46">T</span><span class="stl_32 stl_08 stl_19">e</span><span class="stl_32 stl_08 stl_39" style="word-spacing:0.0023em;">st Driving Pagination Discoverability</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.6162em;">&nbsp;</span><span class="stl_32 stl_08 stl_71">.....................................................................................................................87 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 34.3453em; "><span class="stl_32 stl_08 stl_34" style="word-spacing:-0.0009em;">7. Getting All Resources &nbsp;</span></div>
					<div class="stl_01" style="left:16.297em;top: 34.3453em; "><span class="stl_32 stl_08 stl_19">.................................................................................................................................................</span><span class="stl_32 stl_08 stl_88">.</span><span class="stl_32 stl_08 stl_19">8</span><span class="stl_32 stl_08 stl_19">8 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 36.3453em; "><span class="stl_32 stl_08 stl_37" style="word-spacing:-0.0103em;">8. REST Paging with Range HTTP headers</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.6274em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">...................................................................................................................</span><span class="stl_32 stl_08 stl_98">.</span><span class="stl_32 stl_08 stl_19">8</span><span class="stl_32 stl_08 stl_19">9 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 38.3453em; "><span class="stl_32 stl_08 stl_39" style="word-spacing:0.0024em;">9. Conclusio</span><span class="stl_32 stl_08 stl_69">n</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0506em;">...... .......................................................................................................................................................................</span><span class="stl_32 stl_08 stl_99">.</span><span class="stl_32 stl_08 stl_19">8</span><span class="stl_32 stl_08 stl_19">9 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 43.8398em; "><span class="stl_22 stl_12 stl_50" style="word-spacing:-0.0006em;">12: ERROR HANDLING FOR REST WITH SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 49.4287em; "><span class="stl_32 stl_08 stl_61" style="word-spacing:-0.0267em;">1. Overview............. .........................................................................................................................................................................91 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 51.4287em; "><span class="stl_32 stl_08 stl_51" style="word-spacing:-0.0042em;">2. Solution 1 – The Controller level </span><span class="stl_32 stl_08 stl_53" style="font-style:italic; word-spacing:0.787em;">@ExceptionHandler </span><span class="stl_32 stl_08 stl_61">.......................................................................................91 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 53.4287em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.006em;">3. Solution 2 – The </span><span class="stl_32 stl_08 stl_100" style="font-style:italic;">HandlerExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 55.4287em; "><span class="stl_32 stl_08 stl_53" style="word-spacing:0.0058em;">3.1. ExceptionHandlerExceptionResolver</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.7459em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">...................................................................................................................</span><span class="stl_32 stl_08 stl_101">.</span><span class="stl_32 stl_08 stl_19">9</span><span class="stl_32 stl_08 stl_19">2 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 57.4287em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:0em;">3.2. </span><span class="stl_32 stl_08 stl_44" style="font-style:italic; word-spacing:1.7736em;">DefaultHandlerExceptionResolver </span><span class="stl_32 stl_08 stl_19">...................................................................................................................</span><span class="stl_32 stl_08 stl_102">.</span><span class="stl_32 stl_08 stl_19">9</span><span class="stl_32 stl_08 stl_19">3 &nbsp;</span></div>
					<div class="stl_01" style="left:25.342em;top: 53.4287em; "><span class="stl_32 stl_08 stl_19">....................................................................................................</span><span class="stl_32 stl_08 stl_101">.</span><span class="stl_32 stl_08 stl_19">9</span><span class="stl_32 stl_08 stl_19">2 &nbsp;</span></div>
					<div class="stl_01" style="left:43.0694em;top: 62.1175em; "><span class="stl_56 stl_08 stl_18">Page &nbsp;</span></div>
					<div class="stl_01" style="left:44.5517em;top: 62.1175em; "><span class="stl_56 stl_08 stl_19" style="word-spacing:0.703em;">8 /</span><span class="stl_56 stl_08 stl_19" style="word-spacing:0.4577em;">&nbsp;</span><span class="stl_56 stl_08 stl_20">113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_09.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_09.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 7.262em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0001em;">3.3. </span><span class="stl_32 stl_08 stl_80" style="font-style:italic;">ResponseStatusExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:22.327em;top: 7.262em; "><span class="stl_32 stl_08 stl_19">...................................................................................................................</span><span class="stl_32 stl_08 stl_102">.</span><span class="stl_32 stl_08 stl_19">9</span><span class="stl_32 stl_08 stl_19">3 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 9.262em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:0em;">3.4. </span><span class="stl_32 stl_08 stl_53" style="font-style:italic; word-spacing:0.0056em;">SimpleMappingExceptionResolver </span><span class="stl_32 stl_08 stl_19" style="word-spacing:0em;">and </span><span class="stl_32 stl_08 stl_103" style="font-style:italic; word-spacing:1.1822em;">AnnotationMethodHandlerExceptionResolver </span><span class="stl_32 stl_08 stl_19">...........</span><span class="stl_32 stl_08 stl_104">.</span><span class="stl_32 stl_08 stl_19">9</span><span class="stl_32 stl_08 stl_19">4 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 11.262em; "><span class="stl_32 stl_08 stl_70" style="word-spacing:0.003em;">3.5. Custom </span><span class="stl_32 stl_08 stl_100" style="font-style:italic; word-spacing:1.212em;">HandlerExceptionResolver </span><span class="stl_32 stl_08 stl_19">...................................................................................................................</span><span class="stl_32 stl_08 stl_84">.</span><span class="stl_32 stl_08 stl_19">9</span><span class="stl_32 stl_08 stl_19">4 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 13.262em; "><span class="stl_32 stl_08 stl_31" style="word-spacing:-0.0069em;">4. Solution 3 – The New </span><span class="stl_32 stl_08 stl_105" style="font-style:italic; word-spacing:0.0142em;">@ControllerAdvice </span><span class="stl_32 stl_08 stl_106" style="word-spacing:-0.0136em;">(Spring 3.2 And Above) &nbsp;</span></div>
					<div class="stl_01" style="left:34.386em;top: 13.262em; "><span class="stl_32 stl_08 stl_19">.......................................................</span><span class="stl_32 stl_08 stl_102">.</span><span class="stl_32 stl_08 stl_19">9</span><span class="stl_32 stl_08 stl_19">5 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 15.262em; "><span class="stl_32 stl_08 stl_71" style="word-spacing:-0.0474em;">5. Conclusion ....... .........................................................................................................................................................................97 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 20.7565em; "><span class="stl_22 stl_12 stl_50" style="word-spacing:-0.0008em;">13: VERSIONING A REST API &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 26.3453em; "><span class="stl_32 stl_08 stl_71" style="word-spacing:-0.0267em;">1. The Problem...... .......................................................................................................................................................................</span><span class="stl_32 stl_08 stl_87">.</span><span class="stl_32 stl_08 stl_19">9</span><span class="stl_32 stl_08 stl_19">9 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 28.3453em; "><span class="stl_32 stl_08 stl_103" style="word-spacing:-0.0047em;">2. What is in the Contract?</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.6486em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">.................................................................................................................................................</span><span class="stl_32 stl_08 stl_86">.</span><span class="stl_32 stl_08 stl_19">9</span><span class="stl_32 stl_08 stl_19">9 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 30.3453em; "><span class="stl_32 stl_08 stl_53" style="word-spacing:-0.0024em;">2.1. URIs part of the Contract? &nbsp;</span></div>
					<div class="stl_01" style="left:19.312em;top: 30.3453em; "><span class="stl_32 stl_08 stl_19">..................................................................................................................................</span><span class="stl_32 stl_08 stl_86">.</span><span class="stl_32 stl_08 stl_19">9</span><span class="stl_32 stl_08 stl_19">9 &nbsp;</span></div>
					<div class="stl_01" style="left:22.327em;top: 32.3453em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0697em;">.................................................................................................................. 100 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 32.3453em; z-index:1351; "><span class="stl_32 stl_08 stl_62" style="word-spacing:-0.0116em;">2.2. Media </span><span class="stl_32 stl_08 stl_107">T</span><span class="stl_32 stl_08 stl_19">y</span><span class="stl_32 stl_08 stl_80" style="word-spacing:-0.0041em;">pes part of the Contract? &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 34.3453em; "><span class="stl_32 stl_08 stl_51" style="word-spacing:0.0036em;">3. High Level Option</span><span class="stl_32 stl_08 stl_108">s</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0707em;">.............................................................................................................................................................. 100 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 36.3453em; "><span class="stl_32 stl_08 stl_82" style="word-spacing:-0.0082em;">4. Advantages and Disadvantages</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.3401em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0677em;">................................................................................................................................. 102 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 38.3453em; "><span class="stl_32 stl_08 stl_78" style="word-spacing:-0.0135em;">5. Possible Changes to the API &nbsp;</span></div>
					<div class="stl_01" style="left:19.312em;top: 38.3453em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0717em;">................................................................................................................................. 103 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 40.3453em; "><span class="stl_32 stl_08 stl_28" style="word-spacing:-0.0066em;">5.1. Adding to the Representation of a Resource</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.7022em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0717em;">................................................................................................... 103 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 42.3453em; "><span class="stl_32 stl_08 stl_79" style="word-spacing:0.0001em;">5.2. Removing or changing an existing Representation</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.6431em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0717em;">.................................................................................... 103 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 44.3453em; "><span class="stl_32 stl_08 stl_27" style="word-spacing:-0.0062em;">5.3. Major Semantic Changes &nbsp;</span></div>
					<div class="stl_01" style="left:19.312em;top: 44.3453em; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.1007em;">................................................................................................................................. 104 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 46.3453em; "><span class="stl_32 stl_08 stl_39" style="word-spacing:0.0024em;">6. Conclusio</span><span class="stl_32 stl_08 stl_69">n</span><span class="stl_32 stl_08 stl_19">.</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0618em;">...... ...................................................................................................................................................................... 105 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 51.8398em; "><span class="stl_22 stl_12 stl_23" style="word-spacing:-0.0006em;">14: TESTING REST WITH MULTIPLE MIME TYPES &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 57.4287em; "><span class="stl_32 stl_08 stl_58" style="word-spacing:-0.0265em;">1. Overview............. .......................................................................................................................................................................107 &nbsp;</span></div>
					<div class="stl_01" style="left:43.0704em;top: 62.1175em; "><span class="stl_56 stl_08 stl_18">Page &nbsp;</span></div>
					<div class="stl_01" style="left:44.5527em;top: 62.1175em; "><span class="stl_56 stl_08 stl_19" style="word-spacing:0.703em;">9 /</span><span class="stl_56 stl_08 stl_19" style="word-spacing:0.4578em;">&nbsp;</span><span class="stl_56 stl_08 stl_20">113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_10.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_10.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.262em; "><span class="stl_32 stl_08 stl_50" style="word-spacing:-0.0257em;">2. Goals.................... ......................................................................................................................................................................</span><span class="stl_32 stl_08 stl_109">.</span><span class="stl_32 stl_08 stl_19">1</span><span class="stl_32 stl_08 stl_19">07 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.262em; z-index:256; "><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.03em;">3. </span><span class="stl_32 stl_08 stl_46">T</span><span class="stl_32 stl_08 stl_19">e</span><span class="stl_32 stl_08 stl_64" style="word-spacing:0.0044em;">sting Infrastructure &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 11.262em; "><span class="stl_32 stl_08 stl_33" style="word-spacing:-0.0176em;">4. The JSON and XML Marshallers</span><span class="stl_32 stl_08 stl_19" style="word-spacing:0.9626em;">&nbsp;</span><span class="stl_32 stl_08 stl_50">..................................................................................................................................109 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.262em; "><span class="stl_32 stl_08 stl_74" style="word-spacing:-0.0093em;">5. Consuming the Service with both JSON and XML</span><span class="stl_32 stl_08 stl_19" style="word-spacing:2.3442em;">&nbsp;</span><span class="stl_32 stl_08 stl_19" style="word-spacing:-0.0623em;">..................................................................................... 110 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.262em; "><span class="stl_32 stl_08 stl_73" style="word-spacing:-0.0045em;">6. Maven and Jenkins</span><span class="stl_32 stl_08 stl_19" style="word-spacing:2.5409em;">&nbsp;</span><span class="stl_32 stl_08 stl_19">.................................................................................................................................................</span><span class="stl_32 stl_08 stl_110">.</span><span class="stl_32 stl_08 stl_19">1</span><span class="stl_32 stl_08 stl_19">11 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.262em; "><span class="stl_32 stl_08 stl_23" style="word-spacing:-0.0373em;">7. Conclusion........ ....................................................................................................................................................................... 112 &nbsp;</span></div>
					<div class="stl_01" style="left:16.2257em;top: 9.262em; "><span class="stl_32 stl_08 stl_19">................................................................................................................................................</span><span class="stl_32 stl_08 stl_111">.</span><span class="stl_32 stl_08 stl_19">1</span><span class="stl_32 stl_08 stl_19">07 &nbsp;</span></div>
					<div class="stl_01" style="left:42.9057em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 10 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_11.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_11.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 6.6667em; z-index:137; "><span class="stl_115 stl_12 stl_13" style="word-spacing:-0.0004em;">1: BOOTSTRAP A WEB &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.4167em; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0007em;">APPLICATION WITH SPRING 4 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.2943em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.1075em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This section illustrates how to Bootstrap a Web Application with Spring and also discusses &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.4409em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">how to make the jump from XML to Java without having to completely migrate the entire XML &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.7742em; "><span class="stl_121 stl_120 stl_20">conﬁguration. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.2443em; "><span class="stl_117 stl_08 stl_27" style="word-spacing:-0.0082em;">2. The Maven pom.xml &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 35.0082em; "><span class="stl_122 stl_123 stl_124" style="word-spacing:-0.0065em;">&lt;project xmlns=”hꢀp://maven.apache.org/POM/4.0.0” &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 35.8415em; "><span class="stl_122 stl_123 stl_125">xmlns:xsi=”hꢀp://www.w3.org/2001/XMLSchema-instance” &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 36.6748em; "><span class="stl_122 stl_123 stl_126">xsi:schemaLocaꢁon=” &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 37.5082em; "><span class="stl_122 stl_123 stl_127">hꢀp://maven.apache.org/POM/4.0.0 &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 38.3415em; "><span class="stl_122 stl_123 stl_128">hꢀp://maven.apache.org/xsd/maven-4.0.0.xsd”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 39.1748em; "><span class="stl_122 stl_123 stl_129">&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 40.0082em; "><span class="stl_122 stl_123 stl_130">&lt;groupId&gt;org&lt;/groupId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 40.8415em; "><span class="stl_122 stl_123 stl_131">&lt;arꢁfactId&gt;rest&lt;/arꢁfactId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 41.6748em; "><span class="stl_122 stl_123 stl_132">&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 42.5082em; "><span class="stl_122 stl_123 stl_133">&lt;packaging&gt;war&lt;/packaging&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 44.1748em; "><span class="stl_122 stl_123 stl_134">&lt;dependencies&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 45.8415em; "><span class="stl_122 stl_123 stl_135">&lt;dependency&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 46.6748em; "><span class="stl_122 stl_123 stl_136">&lt;groupId&gt;org.springframework&lt;/groupId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 47.5082em; "><span class="stl_122 stl_123 stl_137">&lt;arꢁfactId&gt;spring-webmvc&lt;/arꢁfactId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 48.3415em; "><span class="stl_122 stl_123 stl_138">&lt;version&gt;${spring.version}&lt;/version&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 49.1748em; "><span class="stl_122 stl_123 stl_139">&lt;exclusions&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 50.0082em; "><span class="stl_122 stl_123 stl_130">&lt;exclusion&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.5425em;top: 50.8415em; "><span class="stl_122 stl_123 stl_140">&lt;arꢁfactId&gt;commons-logging&lt;/arꢁfactId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.5425em;top: 51.6748em; "><span class="stl_122 stl_123 stl_139">&lt;groupId&gt;commons-logging&lt;/groupId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 52.5082em; "><span class="stl_122 stl_123 stl_141">&lt;/exclusion&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 53.3415em; "><span class="stl_122 stl_123 stl_142">&lt;/exclusions&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 54.1748em; "><span class="stl_122 stl_123 stl_143">&lt;/dependency&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 55.8415em; "><span class="stl_122 stl_123 stl_144">&lt;/dependencies&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 57.5082em; "><span class="stl_122 stl_123 stl_145">&lt;build&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 58.3415em; "><span class="stl_122 stl_123 stl_146">&lt;ﬁnalName&gt;rest&lt;/ﬁnalName&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:42.9722em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 11 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_12.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_12.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:30.3169em;top: 4.0058em; "><span class="stl_113 stl_08 stl_147" style="word-spacing:-0.0058em;">2.1. The cglib dependency before Spring 3.2 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:6.1003em;top: 7.5151em; "><span class="stl_148 stl_123 stl_136">&lt;plugins&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.6088em;top: 8.3484em; "><span class="stl_148 stl_123 stl_128">&lt;plugin&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.1173em;top: 9.1817em; "><span class="stl_148 stl_123 stl_149">&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.1173em;top: 10.0151em; "><span class="stl_148 stl_123 stl_126">&lt;arꢁfactId&gt;maven-compiler-plugin&lt;/arꢁfactId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.1173em;top: 10.8484em; "><span class="stl_148 stl_123 stl_150">&lt;version&gt;3.1&lt;/version&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.1173em;top: 11.6817em; "><span class="stl_148 stl_123 stl_151">&lt;conﬁguraꢁon&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.6258em;top: 12.5151em; "><span class="stl_148 stl_123 stl_152">&lt;source&gt;1.6&lt;/source&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.6258em;top: 13.3484em; "><span class="stl_148 stl_123 stl_153">&lt;target&gt;1.6&lt;/target&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.6258em;top: 14.1817em; "><span class="stl_148 stl_123 stl_134">&lt;encoding&gt;UTF-8&lt;/encoding&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.1173em;top: 15.0151em; "><span class="stl_148 stl_123 stl_138">&lt;/conﬁguraꢁon&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.6088em;top: 15.8484em; "><span class="stl_148 stl_123 stl_154">&lt;/plugin&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.1003em;top: 16.6817em; "><span class="stl_148 stl_123 stl_155">&lt;/plugins&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5918em;top: 17.5151em; "><span class="stl_148 stl_123 stl_125">&lt;/build&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5918em;top: 19.1817em; "><span class="stl_148 stl_123 stl_156">&lt;properꢁes&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.1003em;top: 20.0151em; "><span class="stl_148 stl_123 stl_157">&lt;spring.version&gt;4.0.5.RELEASE&lt;/spring.version&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5918em;top: 20.8484em; "><span class="stl_148 stl_123 stl_126">&lt;/properꢁes&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.0833em;top: 22.5151em; "><span class="stl_148 stl_123 stl_158">&lt;/project&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 27.2845em; "><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.015em;">2.1. The </span><span class="stl_117 stl_08 stl_94" style="font-style:italic; word-spacing:0.0065em;">cglib </span><span class="stl_117 stl_08 stl_29" style="word-spacing:-0.0083em;">dependency before </span><span class="stl_159 stl_08 stl_31" style="word-spacing:0.002em;">Spring 3.2 &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 31.0978em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">You may wonder why </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">cglib </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">is a dependency – it turns out there is a valid reason to include it – &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 32.4311em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the entire conﬁguration cannot function without it. If removed, Spring will throw: &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 36.6673em; "><span class="stl_160 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Caused by: </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">java.lang.IllegalStateException: CGLIB is required to process @Conﬁguration &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 38.0144em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">classes. Either add CGLIB to the classpath or remove the following @Conﬁguration bean &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 39.3478em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic;">deﬁnitions &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 43.5978em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The reason this happens is explained by the way Spring deals with @Conﬁguration classes. &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 44.9311em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">These classes are effectively beans, and because of this they need to be aware of the Context, &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 46.2644em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and respect scope and other bean semantics. This is achieved by dynamically creating a cglib &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 47.5978em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">proxy with this awareness for each @Conﬁguration class, hence the cglib dependency. &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 50.4311em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Also, because of this, there are a few restrictions for Conﬁguration annotated classes: &nbsp;</span></div>
					<div class="stl_01" style="left:4.25em;top: 53.2644em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:4.25em;top: 54.6811em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:5.75em;top: 53.2644em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Conﬁguration classes should not be ﬁnal &nbsp;</span></div>
					<div class="stl_01" style="left:5.75em;top: 54.6811em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">They should have a constructor with no arguments &nbsp;</span></div>
					<div class="stl_01" style="left:42.9067em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 12 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_13.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_13.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:27.2619em;top: 4.0058em; "><span class="stl_113 stl_08 stl_147" style="word-spacing:-0.0035em;">2.2. The cglib dependency in Spring 3.2 and beyond &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.3137em; "><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.015em;">2.2. The </span><span class="stl_117 stl_08 stl_28" style="font-style:italic; word-spacing:0.0065em;">cglib </span><span class="stl_117 stl_08 stl_33" style="word-spacing:-0.0118em;">dependency in </span><span class="stl_159 stl_08 stl_31" style="word-spacing:0.002em;">Spring 3.2 </span><span class="stl_117 stl_08 stl_34" style="word-spacing:0.0094em;">and beyond &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 11.1132em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Starting with Spring 3.2, it is </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">no longer necessary to add </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">cglib </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">as an explicit dependency. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.4603em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This is because Spring is in now inlining cglib – which will ensure that all class based proxying &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.7936em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">functionality will work out of the box with Spring 3.2. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.6269em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The new cglib code is placed under the Spring package: org.springframework.cglib (replacing &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.9603em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the original net.sf.cglib). The reason for the package change is to avoid conﬂicts with any cglib &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.2936em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">versions already existing on the classpath. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.1269em; "><a href="https://jira.spring.io/browse/SPR-9669" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Also, the new cglib 3.0 is now used, upgraded from the older 2.2 dependency (see this </span></a><a href="https://jira.spring.io/browse/SPR-9669" target="_blank"><span class="stl_163 stl_120 stl_20">JIRA &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 23.4603em; "><a href="https://jira.spring.io/browse/SPR-9669" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:-0.0001em;">issue </span></a><a href="https://jira.spring.io/browse/SPR-9669" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for more details). &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 26.2936em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Finally, now that Spring 4.0 is out in the wild, changes like t</span><a href="https://jira.spring.io/browse/SPR-9639" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">his one (removing the cglib &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 27.6269em; "><a href="https://jira.spring.io/browse/SPR-9639" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">dependency) are to be expected with Java 8 just around the corner – you can watch </span></a><a href="https://jira.spring.io/browse/SPR-9639" target="_blank"><span class="stl_164 stl_120 stl_20">this &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 28.9603em; "><a href="https://jira.spring.io/browse/SPR-9639" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:0em;">Spring Jira </span></a><a href="https://jira.spring.io/browse/SPR-9639" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to keep track of the Spring support, and </span></a><a href="http://www.baeldung.com/java8" target="_blank"><span class="stl_163 stl_120 stl_20" style="word-spacing:0em;">the Java 8 Resources page </span></a><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">to keep tabs &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.2936em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">on the that. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.7637em; "><span class="stl_117 stl_08 stl_35" style="word-spacing:-0.0095em;">3. The Java based Web Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 40.5276em; "><span class="stl_148 stl_123 stl_134">@Conﬁguraꢁon &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 41.3609em; "><span class="stl_148 stl_123 stl_130" style="word-spacing:-0.0117em;">@ImportResource( { “classpath*:/rest_conﬁg.xml” } ) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 42.1942em; "><span class="stl_148 stl_123 stl_165" style="word-spacing:-0.017em;">@ComponentScan( basePackages = “org.rest” ) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 43.0276em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0109em;">@PropertySource({ “classpath:rest.properꢁes”, “classpath:web.properꢁes” }) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 43.8609em; "><span class="stl_148 stl_123 stl_167" style="word-spacing:-0.0165em;">public class AppConﬁg{ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 45.5276em; "><span class="stl_148 stl_123 stl_168">@Bean &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 46.3609em; "><span class="stl_148 stl_123 stl_169" style="word-spacing:-0.0192em;">public staꢁc PropertySourcesPlaceholderConﬁgurer properꢁes() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 47.1942em; "><span class="stl_148 stl_123 stl_126" style="word-spacing:-0.0171em;">return new PropertySourcesPlaceholderConﬁgurer(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 48.0276em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 48.8609em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.3965em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">First, the </span><span class="stl_170 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@Conﬁguration </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">annotation – this is the main artifact used by the Java based Spring &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.7436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">conﬁguration; it is itself meta-annotated with </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">@Component</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, which makes the annotated &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.0632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">classes </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">standard beans </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and as such, also candidates for component scanning. The main &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.4103em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">purpose of </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@Conﬁguration </span><a href="http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-java" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">classes is to be sources of bean deﬁnitions for the Spring IoC &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 57.7436em; "><a href="http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-java" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Container. For a more detailed description, see the </span></a><a href="http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-java" target="_blank"><span class="stl_163 stl_120 stl_20" style="word-spacing:0em;">ofﬁcial docs</span></a><span class="stl_171 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:42.9047em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 13 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_14.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_14.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:32.8694em;top: 4.0058em; "><span class="stl_113 stl_08 stl_172" style="word-spacing:-0.0093em;">3. The Java based Web Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.324em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Then, </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ImportResource </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is used to import the existing XML based Spring conﬁguration. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This may be conﬁguration which is still being migrated from XML to Java, or simply legacy &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">conﬁguration that you wish to keep. Either way, importing it into the Container is essential &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 11.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for a successful migration, allowing small steps without to much risk. The equivalent XML &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">annotation that is replaced is: &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.5044em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">&lt;import resource=”classpath*:/rest_conﬁg.xml” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.324em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">Moving on to </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ComponentScan </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– this conﬁgures the component scanning directive, &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">effectively replacing the XML: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 23.4551em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.0139em;">&lt;context:component-scan base-package=”org.rest” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.0044em; "><a href="https://jira.spring.io/browse/SPR-8808" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">As of Spring 3.1, the </span></a><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@Conﬁguration </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">are excluded from classpath scanning by default – see &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.3378em; "><a href="https://jira.spring.io/browse/SPR-8808" target="_blank"><span class="stl_163 stl_120 stl_20" style="word-spacing:0em;">this JIRA issue</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. Before Spring 3.1 though, these classes should have been excluded explicitly: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 32.1217em; "><span class="stl_148 stl_123 stl_174" style="word-spacing:-0.016em;">excludeFilters = { @ComponentScan.Filter( Conﬁguraꢁon.class ) } &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.6711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@Conﬁguration </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">classes should not be autodiscovered because they are already speciﬁed &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and used by the Container – allowing them to be rediscovered and introduced into the Spring &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">context will result in the following error: &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.574em; "><span class="stl_160 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Caused by: </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">org.springframework.context.annotation.ConﬂictingBeanDeﬁnitionException: &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.9211em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Annotation-speciﬁed bean name ‘webConﬁg’ for bean class [org.rest.spring.AppConﬁg] &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.2544em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">conﬂicts with existing, non-compatible bean deﬁnition of same name and class [org.rest. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.5878em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic;">spring.AppConﬁg] &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.824em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">And ﬁnally, using the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">@Bean </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">annotation to conﬁgure the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">properties support </span><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">– &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.1711em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">PropertySourcesPlaceholderConﬁgurer </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is initialized in a @Bean annotated method, indicating &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">it will produce a Spring bean managed by the Container. This new conﬁguration has replaced &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the following XML: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 57.2051em; "><span class="stl_148 stl_123 stl_140">&lt;context:property-placeholder &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 58.0384em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0125em;">locaꢁon=”classpath:persistence.properꢁes, classpath:web.properꢁes” &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 58.8717em; "><span class="stl_148 stl_123 stl_136">ignore-unresolvable=”true”/&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:42.8906em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 14 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_15.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_15.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:40.4609em;top: 4.0058em; "><span class="stl_113 stl_08 stl_176" style="word-spacing:-0.0243em;">3.1. The web.xml &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.3378em; "><a href="http://www.baeldung.com/2012/02/06/properties-with-spring/" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">For a more in depth discussion on why it was necessary to manually register the &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6711em; "><a href="http://www.baeldung.com/2012/02/06/properties-with-spring/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">PropertySourcesPlaceholderConﬁgurer bean, see the </span></a><a href="http://www.baeldung.com/2012/02/06/properties-with-spring/" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:0em;">Properties with Spring Tutorial</span></a><a href="http://www.baeldung.com/2012/02/06/properties-with-spring/" target="_blank"><span class="stl_171 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 12.7245em; "><span class="stl_117 stl_08 stl_37" style="word-spacing:-0.0243em;">3.1. The web.xml &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 17.4884em; "><span class="stl_148 stl_123 stl_167" style="word-spacing:-0.017em;">&lt;?xml version=”1.0” encoding=”UTF-8”?&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 18.3217em; "><span class="stl_148 stl_123 stl_177" style="word-spacing:-0.0178em;">&lt;web-app xmlns=” &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 19.155em; "><span class="stl_148 stl_123 stl_178">hꢀp://java.sun.com/xml/ns/javaee” &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 19.9884em; "><span class="stl_148 stl_123 stl_153">xmlns:web=”hꢀp://java.sun.com/xml/ns/javaee/web-app_3_0.xsd” &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 20.8217em; "><span class="stl_148 stl_123 stl_179">xmlns:xsi=”hꢀp://www.w3.org/2001/XMLSchema-instance” &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 21.655em; "><span class="stl_148 stl_123 stl_126">xsi:schemaLocaꢁon=” &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 22.4884em; "><span class="stl_148 stl_123 stl_180">hꢀp://java.sun.com/xml/ns/javaee &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 23.3217em; "><span class="stl_148 stl_123 stl_139">hꢀp://java.sun.com/xml/ns/javaee/web-app_3_0.xsd” &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 24.1551em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0156em;">id=”rest” version=”3.0”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 25.8217em; "><span class="stl_148 stl_123 stl_139">&lt;context-param&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.0208em;top: 26.6551em; "><span class="stl_148 stl_123 stl_181">&lt;param-name&gt;contextClass&lt;/param-name&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 27.4884em; "><span class="stl_148 stl_123 stl_133">&lt;param-value&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 28.3217em; "><span class="stl_148 stl_123 stl_182">org.springframework.web.context.support.AnnotaꢁonConﬁgWebApplicaꢁonContext &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 29.1551em; "><span class="stl_148 stl_123 stl_129">&lt;/param-value&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 29.9884em; "><span class="stl_148 stl_123 stl_183">&lt;/context-param&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 30.8217em; "><span class="stl_148 stl_123 stl_139">&lt;context-param&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 31.6551em; "><span class="stl_148 stl_123 stl_184">&lt;param-name&gt;contextConﬁgLocaꢁon&lt;/param-name&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.0208em;top: 32.4884em; "><span class="stl_148 stl_123 stl_175">&lt;param-value&gt;org.rest.spring.root&lt;/param-value&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 33.3217em; "><span class="stl_148 stl_123 stl_183">&lt;/context-param&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 34.1551em; "><span class="stl_148 stl_123 stl_158">&lt;listener&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.0208em;top: 34.9884em; "><span class="stl_148 stl_123 stl_181">&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 35.8217em; "><span class="stl_148 stl_123 stl_185">&lt;/listener&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 37.4884em; "><span class="stl_148 stl_123 stl_186">&lt;servlet&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 38.3217em; "><span class="stl_148 stl_123 stl_179">&lt;servlet-name&gt;rest&lt;/servlet-name&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 39.1551em; "><span class="stl_148 stl_123 stl_187">&lt;servlet-class&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 39.9884em; "><span class="stl_148 stl_123 stl_137">org.springframework.web.servlet.DispatcherServlet &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 40.8217em; "><span class="stl_148 stl_123 stl_173">&lt;/servlet-class&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 41.6551em; "><span class="stl_148 stl_123 stl_188">&lt;init-param&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 42.4884em; "><span class="stl_148 stl_123 stl_151">&lt;param-name&gt;contextClass&lt;/param-name&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 43.3217em; "><span class="stl_148 stl_123 stl_189">&lt;param-value&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 44.1551em; "><span class="stl_148 stl_123 stl_182">org.springframework.web.context.support.AnnotaꢁonConﬁgWebApplicaꢁonContext &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 44.9884em; "><span class="stl_148 stl_123 stl_129">&lt;/param-value&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 45.8217em; "><span class="stl_148 stl_123 stl_149">&lt;/init-param&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 46.6551em; "><span class="stl_148 stl_123 stl_188">&lt;init-param&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 47.4884em; "><span class="stl_148 stl_123 stl_126">&lt;param-name&gt;contextConﬁgLocaꢁon&lt;/param-name&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 48.3217em; "><span class="stl_148 stl_123 stl_143">&lt;param-value&gt;org.rest.spring.rest&lt;/param-value&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 49.1551em; "><span class="stl_148 stl_123 stl_149">&lt;/init-param&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 49.9884em; "><span class="stl_148 stl_123 stl_137">&lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 50.8217em; "><span class="stl_148 stl_123 stl_190">&lt;/servlet&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 51.6551em; "><span class="stl_148 stl_123 stl_191">&lt;servlet-mapping&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 52.4884em; "><span class="stl_148 stl_123 stl_179">&lt;servlet-name&gt;rest&lt;/servlet-name&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 53.3217em; "><span class="stl_148 stl_123 stl_150">&lt;url-paꢀern&gt;/api/*&lt;/url-paꢀern&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 54.1551em; "><span class="stl_148 stl_123 stl_192">&lt;/servlet-mapping&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 55.8217em; "><span class="stl_148 stl_123 stl_193">&lt;welcome-ﬁle-list&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 56.6551em; "><span class="stl_148 stl_123 stl_194" style="word-spacing:-0.0184em;">&lt;welcome-ﬁle /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 57.4884em; "><span class="stl_148 stl_123 stl_195">&lt;/welcome-ﬁle-list&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 59.1551em; "><span class="stl_148 stl_123 stl_158">&lt;/web-app&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:42.9042em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 15 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4778em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_16.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_16.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:40.4609em;top: 4.0058em; "><span class="stl_113 stl_08 stl_176" style="word-spacing:-0.0243em;">3.1. The web.xml &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">First, the root context is deﬁned and conﬁgured to use &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6711em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0003em;">AnnotationConﬁgWebApplicationContext </span><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">instead of the default </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">XmlWebApplicationContext</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0044em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The newer </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0003em;">AnnotationConﬁgWebApplicationContext </span><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">accepts </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@Conﬁguration </span><span class="stl_119 stl_120 stl_20">annotated &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 11.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">classes as input for the Container conﬁguration and is needed in order to set up the Java &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">based context. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.5044em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">Unlike </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">XmlWebApplicationContext</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, it assumes no default conﬁguration class locations, so &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.8378em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“contextConﬁgLocation” </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">init-param for the Servlet must be set. This will point to the java &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.1711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">package where the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@Conﬁguration </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">classes are located; the fully qualiﬁed name(s) of the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">classes are also supported. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Next, the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">DispatcherServlet </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is conﬁgured to use the same kind of context, with the only &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">difference that it’s loading conﬁguration classes out of a different package. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Other than this, the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">web.xml </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">doesn’t really change from a XML to a Java based conﬁguration. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 34.8078em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">4. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 38.6073em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The presented approach allows for a smooth </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">migration of &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 39.9407em; "><span class="stl_170 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">the Spring conﬁguration </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">from XML to Java, mixing the old &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 41.2878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and the new. This is important for older projects, which may &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 42.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">have a lot of XML based conﬁguration that cannot be &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 43.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">migrated all at once. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 46.7878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This way, in a migration, the XML beans can be ported in small increments. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 49.6211em; "><a href="http://www.baeldung.com/2011/10/25/building-a-restful-web-service-with-spring-3-1-and-java-based-configuration-part-2/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In </span></a><a href="http://www.baeldung.com/2011/10/25/building-a-restful-web-service-with-spring-3-1-and-java-based-configuration-part-2/" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">the next section on REST with Spring</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, I cover setting up MVC in the project, &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 50.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">conﬁguration of the HTTP status codes, payload marshalling and content &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 52.2878em; "><span class="stl_121 stl_120 stl_20">negotiation. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 55.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This is an Eclipse based project, so it should be easy to import and run as it is. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8911em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 16 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_17.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_17.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_18.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_18.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; z-index:80; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0005em;">2: BUILD A REST API WITH &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.2512em; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0007em;">SPRING 4 AND JAVA CONFIG &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.9271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This section shows how to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">set up REST in Spring </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– the Controller and HTTP response codes, &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.2746em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">conﬁguration of payload marshalling and content negotiation. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.7443em; "><span class="stl_117 stl_08 stl_31" style="word-spacing:-0.0056em;">2. Understanding REST in Spring &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.5575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The Spring framework supports 2 ways of creating RESTful services: &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.3909em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.8075em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:5.6667em;top: 36.3909em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">using MVC with ModelAndView &nbsp;</span></div>
					<div class="stl_01" style="left:5.6667em;top: 37.8075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">using HTTP message converters &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.6271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0456em;">The </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0.0455em;">ModelAndView </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">approach is older and much better documented, but also more verbose &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.9742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and conﬁguration heavy. It tries to shoehorn the REST paradigm into the old model, which &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.3075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is not without problems. The Spring team understood this and provided ﬁrst-class REST &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.6271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">support starting with </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Spring 3.0</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.4604em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0092em;">The new approach, based on </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0.0452em;">HttpMessageConverter </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and annotations, is much more &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.8075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">lightweight and easy to implement. Conﬁguration is minimal and it provides sensible defaults &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.1409em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for what you would expect from a RESTful service. It is however newer and a a bit on the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.3578em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">light side concerning documentation; what’s </span><span class="stl_198 stl_199 stl_20">more</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, the reference doesn’t go out of it’s way &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.8075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0.01em;">to </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">make the distinction and the tradeoffs between the two approaches as clear as they &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.1409em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0.0099em;">should </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">be. Nevertheless, this is the way RESTful services should be build after Spring 3.0. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8901em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 18 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.478em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_19.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_19.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:37.1551em;top: 4.0058em; "><span class="stl_113 stl_08 stl_200" style="word-spacing:-0.0128em;">3. The Java Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_44" style="word-spacing:-0.0131em;">3. The Java Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.8276em; "><span class="stl_148 stl_123 stl_134">@Conﬁguraꢁon &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 12.6609em; "><span class="stl_148 stl_123 stl_78">@EnableWebMvc &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 13.4942em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0127em;">public class WebConﬁg{ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 14.3276em; "><span class="stl_148 stl_123 stl_201">// &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 15.1609em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.6965em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The new </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@EnableWebMvc </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">annotation does a number of useful things – speciﬁcally, in &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.0436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the case of REST, it detect the existence of Jackson and JAXB 2 on the classpath and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.3632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">automatically creates and registers default </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">JSON and XML converters</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. The functionality of &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.7103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the annotation is equivalent to the XML version: &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.5436em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">&lt;mvc:annotation-driven /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.7798em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">This is a shortcut</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, and though it may be useful in many situations, it’s not perfect. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.1269em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">When more complex conﬁguration is needed, remove the annotation and extend &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.4465em; "><span class="stl_170 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0002em;">WebMvcConﬁgurationSupport </span><span class="stl_121 stl_120 stl_20">directly. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.7637em; z-index:640; "><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.03em;">4. </span><span class="stl_117 stl_08 stl_46">T</span><span class="stl_117 stl_08 stl_19">e</span><span class="stl_117 stl_08 stl_47" style="word-spacing:-0.0014em;">sting the Spring Context &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.5632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">Starting with </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Spring 3.1</span><a href="http://spring.io/blog/2011/06/21/spring-3-1-m2-testing-with-configuration-classes-and-profiles/" target="_blank"><span class="stl_121 stl_120 stl_19" style="word-spacing:-0.02em;">, </span></a><a href="http://spring.io/blog/2011/06/21/spring-3-1-m2-testing-with-configuration-classes-and-profiles/" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:0em;">we get </span></a><a href="http://spring.io/blog/2011/06/21/spring-3-1-m2-testing-with-configuration-classes-and-profiles/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">ﬁrst-class testing support for </span></a><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@Conﬁguration </span><span class="stl_121 stl_120 stl_20">classes: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 45.7776em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0083em;">@RunWith( SpringJUnit4ClassRunner.class ) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 46.6109em; "><span class="stl_148 stl_123 stl_202" style="word-spacing:-0.0164em;">@ContextConﬁguraꢁon( classes = { ApplicaꢁonConﬁg.class, PersistenceConﬁg.class }, &nbsp;</span></div>
					<div class="stl_01" style="left:5.1695em;top: 47.4442em; "><span class="stl_148 stl_123 stl_133" style="word-spacing:-0.0144em;">loader = AnnotaꢁonConﬁgContextLoader.class ) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 48.2776em; "><span class="stl_148 stl_123 stl_19" style="word-spacing:-0.0001em;">public class SpringTest{ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 49.9442em; "><span class="stl_148 stl_123 stl_203">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 50.7776em; "><span class="stl_148 stl_123 stl_204" style="word-spacing:-0.0149em;">public void whenSpringContextIsInstanꢁated_thenNoExcepꢁons(){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 51.6109em; "><span class="stl_148 stl_123 stl_205" style="word-spacing:0.0211em;">// When &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 52.4442em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 53.2776em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.8132em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">The Java conﬁguration classes are simply speciﬁed with the </span><span class="stl_170 stl_161 stl_20" style="font-style:italic;">@ContextConﬁguration &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.1603em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">annotation and the new </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">AnnotationConﬁgContextLoader </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">loads the bean deﬁnitions from the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 59.4936em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@Conﬁguration </span><span class="stl_121 stl_120 stl_20">classes. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8911em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 19 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_20.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_20.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:40.4517em;top: 4.0058em; "><span class="stl_113 stl_08 stl_193" style="word-spacing:-0.0082em;">5. The Controller &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.7407em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Notice </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">that the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">WebConﬁg </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">conﬁguration class was not included in the test because it needs &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to run in a Servlet context, which is not provided. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.9745em; "><span class="stl_117 stl_08 stl_48" style="word-spacing:-0.0082em;">5. The Controller &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.774em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@Controller </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is the central artifact in the entire Web Tier of the RESTful API. For the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">purpose of the following examples, the controller is modeling a simple REST resource – Foo: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 25.9051em; "><span class="stl_206 stl_123 stl_125">@Controller &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 26.7384em; "><span class="stl_148 stl_123 stl_207" style="word-spacing:-0.0062em;">@RequestMapping( value = “/foos” ) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 27.5717em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.0145em;">class FooController{ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 29.2384em; "><span class="stl_148 stl_123 stl_89">@Autowired &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 30.0717em; "><span class="stl_148 stl_123 stl_156" style="word-spacing:-0.0207em;">IFooService service; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 31.7384em; "><span class="stl_148 stl_123 stl_208" style="word-spacing:-0.0122em;">@RequestMapping( method = RequestMethod.GET ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 32.5717em; "><span class="stl_148 stl_123 stl_153">@ResponseBody &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 33.4051em; "><span class="stl_148 stl_123 stl_133" style="word-spacing:-0.0145em;">public List&lt; Foo &gt; ﬁndAll(){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 34.2384em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.013em;">return service.ﬁndAll(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 35.0717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.5085em;top: 36.7384em; "><span class="stl_148 stl_123 stl_209" style="word-spacing:-0.0046em;">@RequestMapping( value = “/{id}”, method = RequestMethod.GET ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 37.5717em; "><span class="stl_148 stl_123 stl_153">@ResponseBody &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 38.4051em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0116em;">public Foo ﬁndOne( @PathVariable( “id” ) Long id ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 39.2384em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0142em;">return RestPrecondiꢁons.checkFound( service.ﬁndOne( id ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 40.0717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.5085em;top: 41.7384em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0133em;">@RequestMapping( method = RequestMethod.POST ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 42.5717em; "><span class="stl_148 stl_123 stl_210" style="word-spacing:-0.0085em;">@ResponseStatus( HꢀpStatus.CREATED ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 43.4051em; "><span class="stl_148 stl_123 stl_153">@ResponseBody &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 44.2384em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.0134em;">public Long create( @RequestBody Foo resource ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 45.0717em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0125em;">Precondiꢁons.checkNotNull( resource ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 45.9051em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0132em;">return service.create( resource ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 46.7384em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.5085em;top: 48.4051em; "><span class="stl_148 stl_123 stl_209" style="word-spacing:-0.0048em;">@RequestMapping( value = “/{id}”, method = RequestMethod.PUT ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 49.2384em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0105em;">@ResponseStatus( HꢀpStatus.OK ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 50.0717em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0111em;">public void update( @PathVariable( “id” ) Long id, @RequestBody Foo resource ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 50.9051em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0125em;">Precondiꢁons.checkNotNull( resource ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 51.7384em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0135em;">RestPrecondiꢁons.checkNotNull( service.getById( resource.getId() ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 52.5717em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.013em;">service.update( resource ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 53.4051em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.5085em;top: 55.0717em; "><span class="stl_148 stl_123 stl_214" style="word-spacing:-0.0062em;">@RequestMapping( value = “/{id}”, method = RequestMethod.DELETE ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 55.9051em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0105em;">@ResponseStatus( HꢀpStatus.OK ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 56.7384em; "><span class="stl_148 stl_123 stl_215" style="word-spacing:-0.0104em;">public void delete( @PathVariable( “id” ) Long id ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 57.5717em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0142em;">service.deleteById( id ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 58.4051em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 60.0717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:42.8401em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 20 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_21.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_21.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:32.946em;top: 4.0058em; "><span class="stl_113 stl_08 stl_216" style="word-spacing:-0.0073em;">6. Mapping the HTTP response codes &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">You may have noticed I’m using a very simple, guava style </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">RestPreconditions </span><span class="stl_121 stl_120 stl_20">utility: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.1217em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0139em;">public class RestPrecondiꢁons { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 11.9551em; "><span class="stl_148 stl_123 stl_178" style="word-spacing:-0.0039em;">public staꢁc &lt;T&gt; T checkFound(ﬁnal T resource) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 12.7884em; "><span class="stl_148 stl_123 stl_138" style="word-spacing:-0.0092em;">if (resource == null) { &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 13.6217em; "><span class="stl_148 stl_123 stl_130" style="word-spacing:-0.0111em;">throw new MyResourceNotFoundExcepꢁon(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 14.4551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:6.356em;top: 15.2884em; "><span class="stl_148 stl_123 stl_144" style="word-spacing:-0.0109em;">return resource; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 16.1217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 16.9551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.4907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">The Controller implementation is </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">non-public </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– this is because it doesn’t need to be. Usually &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the controller is the last in the chain of dependencies – it receives HTTP requests from the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Spring front controller (the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">DispathcerServlet</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">) and simply delegate them forward to a service &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">layer. If there is no use case where the controller has to be injected or manipulated through a &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">direct reference, then I prefer not to declare it as public. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.6573em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">request mappings </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">are straightforward – as with any controller, the actual value of the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">mapping as well as the HTTP method are used to determine the target method for the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">request. </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@RequestBody </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">will bind the parameters of the method to the body of the HTTP &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">request, whereas </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ResponseBody </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">does the same for the response and return type. They &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">also ensure that the resource will be marshalled and unmarshalled using the correct HTTP &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.324em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">converter. </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">Content negotiation </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">will take place to choose which one of the active converters &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">will be used, based mostly on the Accept header, although other HTTP headers may be used &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to determine the representation as well. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.4745em; "><span class="stl_117 stl_08 stl_27" style="word-spacing:-0.0073em;">6. Mapping the HTTP response codes &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.2878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The status codes of the HTTP response are one of the most important parts of the REST &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">service, and the subject can quickly become very complex. Getting these right can be what &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">makes or breaks the service. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.0078em; "><span class="stl_117 stl_08 stl_51" style="word-spacing:0.0036em;">6.1. Unmapped Requests &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.8211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">If Spring MVC receives a request which doesn’t have a mapping, it considers the request &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 59.1407em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">not to be allowed and returns a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">405 METHOD NOT ALLOWED </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">back to the client. It is also &nbsp;</span></div>
					<div class="stl_01" style="left:42.9067em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 21 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_22.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_22.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:36.2918em;top: 4.0058em; "><span class="stl_113 stl_08 stl_217" style="word-spacing:-0.001em;">6.2. Valid, Mapped Requests &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.324em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">good practice to include the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Allow </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">HTTP header </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">when returning a 405 to the client, in order &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6573em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">to specify which operations </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">are </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">allowed. This is the standard behavior of Spring MVC and does &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">not require any additional conﬁguration. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.0578em; "><span class="stl_117 stl_08 stl_218" style="word-spacing:-0.001em;">6.2. Valid, Mapped Requests &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">For any request that does have a mapping, Spring MVC considers the request valid and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1907em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">responds with </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">200 OK </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">if no other status code is speciﬁed otherwise. It is because of this that &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.524em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">controller declares different </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ResponseStatus </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for the create, update and delete actions but &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">not for get, which should indeed return the default 200 OK. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.9245em; "><span class="stl_117 stl_08 stl_53" style="word-spacing:0.0058em;">6.3. Client Error &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.7378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In case of a client error, custom exceptions are deﬁned and mapped to the appropriate error &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.0711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">codes. Simply throwing these exceptions from any of the layers of the web tier will ensure &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.4044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Spring maps the corresponding status code on the HTTP response. &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 36.1884em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0134em;">@ResponseStatus( value = HꢀpStatus.BAD_REQUEST ) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 37.0217em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0153em;">public class BadRequestExcepꢁon extends RunꢁmeExcepꢁon{ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 37.8551em; "><span class="stl_148 stl_123 stl_201">// &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 38.6884em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 39.5217em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.011em;">@ResponseStatus( value = HꢀpStatus.NOT_FOUND ) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 40.3551em; "><span class="stl_148 stl_123 stl_219" style="word-spacing:-0.0145em;">public class ResourceNotFoundExcepꢁon extends RunꢁmeExcepꢁon{ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 41.1884em; "><span class="stl_148 stl_123 stl_201">// &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 42.0217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.5711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">These exceptions are part of the REST API and, as such, should only be used in the appropriate &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.9044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">layers corresponding to REST; if for instance a DAO/DAL layer exist, it should not use the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.224em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">exceptions directly. Note also that these are not </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">checked exceptions </span><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">but </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">runtime exceptions </span><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">– &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.5711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">in line with Spring practices and idioms. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.6245em; "><span class="stl_117 stl_08 stl_55" style="word-spacing:0.004em;">6.4. Using </span><span class="stl_117 stl_08 stl_53" style="font-style:italic;">@ExceptionHandler &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.4378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Another option to map custom exceptions on speciﬁc status codes is to use the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.8407em; "><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ExceptionHandler </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">annotation in the controller. The problem with that approach is that &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 60.1878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the annotation only applies to the controller in which it is deﬁned, not to the entire Spring &nbsp;</span></div>
					<div class="stl_01" style="left:42.8411em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 22 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_23.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_23.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:33.8493em;top: 4.0058em; "><span class="stl_113 stl_08 stl_220" style="word-spacing:-0.0045em;">7. Additional Maven dependencies &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Container, which means that it needs to be declared in each controller individually. This quickly &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">becomes cumbersome, especially in more complex applications which many controllers. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.9907em; "><a href="https://jira.spring.io/browse/SPR-8124" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">There are a few </span></a><a href="https://jira.spring.io/browse/SPR-8124" target="_blank"><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">JIRA issues </span></a><a href="https://jira.spring.io/browse/SPR-7278" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">opened with Spring at this time to handle this and other related &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 11.3378em; "><a href="https://jira.spring.io/browse/SPR-8124" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">limitations: </span></a><a href="https://jira.spring.io/browse/SPR-8124" target="_blank"><span class="stl_163 stl_120 stl_20">SPR-8124</span></a><a href="https://jira.spring.io/browse/SPR-8124" target="_blank"><span class="stl_121 stl_120 stl_19" style="word-spacing:-0.02em;">, </span></a><a href="https://jira.spring.io/browse/SPR-7278" target="_blank"><span class="stl_163 stl_120 stl_20">SPR-7278</span></a><a href="https://jira.spring.io/browse/SPR-8406" target="_blank"><span class="stl_121 stl_120 stl_19" style="word-spacing:-0.02em;">, </span></a><a href="https://jira.spring.io/browse/SPR-8406" target="_blank"><span class="stl_163 stl_120 stl_20">SPR-8406</span></a><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.8078em; "><span class="stl_117 stl_08 stl_53" style="word-spacing:-0.0045em;">7. Additional Maven dependencies &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.6211em; "><a href="http://www.baeldung.com/spring-with-maven#mvc" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">In addition to the spring-webmvc dependency </span></a><a href="http://www.baeldung.com/spring-with-maven#mvc" target="_blank"><span class="stl_163 stl_120 stl_20" style="word-spacing:0em;">required for the standard web application</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, we’ll &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">need to set up content marshalling and unmarshalling for the REST API: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 25.7384em; "><span class="stl_148 stl_123 stl_134">&lt;dependencies&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 26.5717em; "><span class="stl_148 stl_123 stl_140">&lt;dependency&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 27.4051em; "><span class="stl_148 stl_123 stl_221">&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 28.2384em; "><span class="stl_148 stl_123 stl_195">&lt;arꢁfactId&gt;jackson-databind&lt;/arꢁfactId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 29.0717em; "><span class="stl_148 stl_123 stl_158">&lt;version&gt;${jackson.version}&lt;/version&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 29.9051em; "><span class="stl_148 stl_123 stl_143">&lt;/dependency&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 30.7384em; "><span class="stl_148 stl_123 stl_140">&lt;dependency&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 31.5717em; "><span class="stl_148 stl_123 stl_215">&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 32.4051em; "><span class="stl_148 stl_123 stl_222">&lt;arꢁfactId&gt;jaxb-api&lt;/arꢁfactId&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 33.2384em; "><span class="stl_148 stl_123 stl_133">&lt;version&gt;${jaxb-api.version}&lt;/version&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 34.0717em; "><span class="stl_148 stl_123 stl_221">&lt;scope&gt;runꢁme&lt;/scope&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 34.9051em; "><span class="stl_148 stl_123 stl_143">&lt;/dependency&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 35.7384em; "><span class="stl_148 stl_123 stl_144">&lt;/dependencies&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 37.4051em; "><span class="stl_148 stl_123 stl_223">&lt;properꢁes&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 38.2384em; "><span class="stl_148 stl_123 stl_149">&lt;jackson.version&gt;2.4.0&lt;/jackson.version&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 39.0717em; "><span class="stl_148 stl_123 stl_141">&lt;jaxb-api.version&gt;2.2.11&lt;/jaxb-api.version&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 39.9051em; "><span class="stl_148 stl_123 stl_182">&lt;/properꢁes&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.4407em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">These are the libraries used to convert the representation of the REST resource to either </span><span class="stl_162 stl_161 stl_20">JSON &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.774em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">or </span><span class="stl_162 stl_161 stl_20">XML</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8391em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 23 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_24.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_24.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:33.8493em;top: 4.0058em; "><span class="stl_113 stl_08 stl_220" style="word-spacing:-0.0045em;">7. Additional Maven dependencies &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 10.9745em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">8. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 14.7877em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This section covered the conﬁguration and implementation &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 16.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of a REST Service using Spring 4 and Java based &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 17.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">conﬁguration, discussing HTTP response codes, basic &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 18.7877em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Content Negotiation and marshaling. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 21.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In the </span><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">next sections of the series </span><a href="http://www.baeldung.com/2011/11/06/restful-web-service-discoverability-part-4/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">I will focus on </span></a><a href="http://www.baeldung.com/2011/11/06/restful-web-service-discoverability-part-4/" target="_blank"><span class="stl_163 stl_120 stl_20" style="word-spacing:0em;">Discoverability of the API</span></a><a href="http://www.baeldung.com/2011/11/06/restful-web-service-discoverability-part-4/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, &nbsp;</span></a></div>
					<div class="stl_01" style="left:7.5em;top: 22.9407em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">advanced </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">content negotiation </span><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">and working with </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">additional representations </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">of a &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 24.2877em; "><span class="stl_121 stl_120 stl_20">Resource. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 27.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This is an Eclipse based project, so it should be easy to import and run as it is. &nbsp;</span></div>
					<div class="stl_01" style="left:42.825em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 24 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_25.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_25.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_26.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_26.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; "><span class="stl_115 stl_12 stl_224" style="word-spacing:-0.0007em;">3: SPRING SECURITY FOR A &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.25em; z-index:109; "><span class="stl_115 stl_12 stl_13" style="word-spacing:-0.0002em;">REST API &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.7104em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This section shows how to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Secure a REST Service using Spring and Spring Security 3.1 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.0575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">with Java based conﬁguration. We will focus on how to set up the Security Conﬁguration &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.3909em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">speciﬁcally for the REST API using a Login and Cookie approach. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.4443em; "><span class="stl_117 stl_08 stl_52" style="word-spacing:-0.0082em;">2. Spring Security in the </span><span class="stl_117 stl_08 stl_47" style="font-style:italic;">web.xml &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.2575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The architecture of Spring Security is based entirely on Servlet Filters and, as such, comes &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.5909em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">before Spring MVC in regards to the processing of HTTP requests. Keeping this in mind, to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.9104em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">begin with, a </span><span class="stl_170 stl_161 stl_20" style="word-spacing:0em;">ﬁlter </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">needs to be declared in the web.xml of the application: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 39.7082em; "><span class="stl_148 stl_123 stl_225">&lt;ﬁlter&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 40.5415em; "><span class="stl_148 stl_123 stl_143">&lt;ﬁlter-name&gt;springSecurityFilterChain&lt;/ﬁlter-name&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 41.3748em; "><span class="stl_148 stl_123 stl_192">&lt;ﬁlter-class&gt;org.springframework.web.ﬁlter.DelegaꢁngFilterProxy&lt;/ﬁlter-class&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 42.2082em; "><span class="stl_148 stl_123 stl_185">&lt;/ﬁlter&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 43.0415em; "><span class="stl_148 stl_123 stl_221">&lt;ﬁlter-mapping&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 43.8748em; "><span class="stl_148 stl_123 stl_143">&lt;ﬁlter-name&gt;springSecurityFilterChain&lt;/ﬁlter-name&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 44.7082em; "><span class="stl_148 stl_123 stl_226">&lt;url-paꢀern&gt;/*&lt;/url-paꢀern&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 45.5415em; "><span class="stl_148 stl_123 stl_166">&lt;/ﬁlter-mapping&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.0909em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The ﬁlter must necessarily be named ‘</span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">springSecurityFilterChain</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0.29em;">’ to</span><span class="stl_121 stl_120 stl_19" style="word-spacing:-0.01em;">&nbsp;</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">match the default bean &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.4242em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">created by Spring Security in the container. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.6604em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Note </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">that the deﬁned ﬁlter is not the actual class implementing the security logic but a &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.0075em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">DelegatingFilterProxy </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">with the purpose of delegating the Filter’s methods to an internal bean. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.3409em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This is done so that the target bean can still beneﬁt from the Spring context lifecycle and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.6742em; "><span class="stl_121 stl_120 stl_20">ﬂexibility. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8255em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 26 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_27.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_27.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:35.7635em;top: 4.0058em; "><span class="stl_113 stl_08 stl_227" style="word-spacing:-0.0153em;">3. The Security Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.324em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The URL pattern used to conﬁgure the Filter is </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">/* </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">even though the entire web service is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6573em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">mapped to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">/api/* </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">so that the security conﬁguration has the option to secure other possible &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">mappings as well, if required. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.4745em; "><span class="stl_117 stl_08 stl_62" style="word-spacing:-0.0153em;">3. The Security Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 20.2384em; "><span class="stl_148 stl_123 stl_167" style="word-spacing:-0.017em;">&lt;?xml version=”1.0” encoding=”UTF-8”?&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 21.0717em; "><span class="stl_148 stl_123 stl_228">&lt;beans:beans &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 21.905em; "><span class="stl_148 stl_123 stl_153">xmlns=”hꢀp://www.springframework.org/schema/security” &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 22.7384em; "><span class="stl_148 stl_123 stl_125">xmlns:xsi=”hꢀp://www.w3.org/2001/XMLSchema-instance” &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 23.5717em; "><span class="stl_148 stl_123 stl_212">xmlns:beans=”hꢀp://www.springframework.org/schema/beans” &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 24.4051em; "><span class="stl_148 stl_123 stl_229">xmlns:sec=”hꢀp://www.springframework.org/schema/security” &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 25.2384em; "><span class="stl_148 stl_123 stl_126">xsi:schemaLocaꢁon=” &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 26.0717em; "><span class="stl_148 stl_123 stl_213">hꢀp://www.springframework.org/schema/security &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 26.9051em; "><span class="stl_148 stl_123 stl_208">hꢀp://www.springframework.org/schema/security/spring-security-3.2.xsd &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 27.7384em; "><span class="stl_148 stl_123 stl_146">hꢀp://www.springframework.org/schema/beans &nbsp;</span></div>
					<div class="stl_01" style="left:6.02em;top: 28.5717em; "><span class="stl_148 stl_123 stl_125">hꢀp://www.springframework.org/schema/beans/spring-beans-4.0.xsd”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 30.2384em; "><span class="stl_148 stl_123 stl_181" style="word-spacing:-0.0156em;">&lt;hꢀp entry-point-ref=”restAuthenꢁcaꢁonEntryPoint”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 31.0717em; "><span class="stl_148 stl_123 stl_230" style="word-spacing:-0.0059em;">&lt;intercept-url paꢀern=”/api/admin/**” access=”ROLE_ADMIN”/&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 32.7384em; "><span class="stl_148 stl_123 stl_231">&lt;form-login &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 33.5717em; "><span class="stl_148 stl_123 stl_181">authenꢁcaꢁon-success-handler-ref=”mySuccessHandler” &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 34.4051em; "><span class="stl_148 stl_123 stl_125">authenꢁcaꢁon-failure-handler-ref=”myFailureHandler” &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 35.2384em; "><span class="stl_148 stl_123 stl_232">/&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 36.9051em; "><span class="stl_148 stl_123 stl_215" style="word-spacing:-0.0102em;">&lt;logout /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 37.7384em; "><span class="stl_148 stl_123 stl_219">&lt;/hꢀp&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 39.4051em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0115em;">&lt;beans:bean id=”mySuccessHandler” &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 40.2384em; "><span class="stl_148 stl_123 stl_153">class=”org.rest.security.MySavedRequestAwareAuthenꢁcaꢁonSuccessHandler”/&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 41.0717em; "><span class="stl_148 stl_123 stl_188" style="word-spacing:-0.0067em;">&lt;beans:bean id=”myFailureHandler” &nbsp;</span></div>
					<div class="stl_01" style="left:6.0208em;top: 41.9051em; "><span class="stl_148 stl_123 stl_208">class=”org.springframework.security.web.authenꢁcaꢁon.SimpleUrlAuthenꢁcaꢁonFailureHandler”/&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 43.5717em; "><span class="stl_148 stl_123 stl_229" style="word-spacing:-0.0108em;">&lt;authenꢁcaꢁon-manager alias=”authenꢁcaꢁonManager”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 44.4051em; "><span class="stl_148 stl_123 stl_131">&lt;authenꢁcaꢁon-provider&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 45.2384em; "><span class="stl_148 stl_123 stl_175">&lt;user-service&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 46.0717em; "><span class="stl_148 stl_123 stl_190" style="word-spacing:-0.0177em;">&lt;user name=”temporary” password=”temporary” authoriꢁes=”ROLE_ADMIN”/&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 46.9051em; "><span class="stl_148 stl_123 stl_215" style="word-spacing:-0.0105em;">&lt;user name=”user” password=”user” authoriꢁes=”ROLE_USER”/&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 47.7384em; "><span class="stl_148 stl_123 stl_146">&lt;/user-service&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 48.5717em; "><span class="stl_148 stl_123 stl_204">&lt;/authenꢁcaꢁon-provider&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 49.4051em; "><span class="stl_148 stl_123 stl_175">&lt;/authenꢁcaꢁon-manager&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 51.0717em; "><span class="stl_148 stl_123 stl_149">&lt;/beans:beans&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.6073em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Most of the conﬁguration is done using the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">security namespace </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– for this to be enabled, the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">schema locations must be deﬁned and pointed to the correct 3.1 or 3.2 XSD versions. The &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.2878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">namespace is designed so that it expresses the common uses of Spring Security while still &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">providing hooks raw beans to accommodate more advanced scenarios. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8722em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 27 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_28.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_28.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:39.4809em;top: 4.0058em; "><span class="stl_113 stl_08 stl_233" style="word-spacing:-0.0136em;">3.2. The Entry Point &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 7.0637em; "><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.015em;">3.1. The </span><span class="stl_117 stl_08 stl_103" style="font-style:italic; word-spacing:0.0052em;">&lt;http&gt; </span><span class="stl_117 stl_08 stl_234">element &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 10.8769em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">&lt;http&gt; </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">element is the main container element for HTTP security conﬁguration. In the &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 12.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">current implementation, it only secured a single mapping: </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">/api/admin/**</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. Note that the &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 13.5298em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">mapping is </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">relative to the root context </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of the web application, not to the rest Servlet; this is &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 14.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">because the entire security conﬁguration lives in the root Spring context and not in the child &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 16.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">context of the Servlet. &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 20.2637em; "><span class="stl_117 stl_08 stl_63" style="word-spacing:-0.0141em;">3.2. The Entry Point &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 24.0769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In a standard web application, the authentication process may be automatically triggered when &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 25.4103em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the client tries to access a secured resource without being authenticated – this is usually done &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 26.7298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">by redirecting to a login page so that the user can enter credentials. However, for a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">REST Web &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 28.0632em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Service </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">this behavior doesn’t make much sense – Authentication should only be done by a &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 29.3965em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">request to the correct URI and all other requests should simply fail with a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">401 UNAUTHORIZED &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 30.7436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">status code if the user is not authenticated. &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 33.5769em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">Spring Security handles this automatic triggering of the authentication process with the &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 34.8965em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">concept of an </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Entry Point </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– this is a required part of the conﬁguration, and can be injected &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 36.2436em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">via the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">entry-point-ref </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">attribute of the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">&lt;http&gt; </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">element. Keeping in mind that this functionality &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 37.5769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">doesn’t make sense in the context of the REST Service, the new custom entry point is deﬁned &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 38.9103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to simply return 401 whenever it is triggered: &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 42.6942em; "><span class="stl_148 stl_123 stl_167" style="word-spacing:-0.0168em;">@Component( “restAuthenꢁcaꢁonEntryPoint” ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 43.5276em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0138em;">public class RestAuthenꢁcaꢁonEntryPoint implements AuthenꢁcaꢁonEntryPoint{ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5799em;top: 45.1942em; "><span class="stl_148 stl_123 stl_158">@Override &nbsp;</span></div>
					<div class="stl_01" style="left:5.5799em;top: 46.0276em; "><span class="stl_148 stl_123 stl_174" style="word-spacing:-0.0158em;">public void commence( HꢀpServletRequest request, HꢀpServletResponse response, &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 46.8609em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0153em;">AuthenꢁcaꢁonExcepꢁon authExcepꢁon ) throws IOExcepꢁon{ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0884em;top: 47.6942em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0149em;">response.sendError( HꢀpServletResponse.SC_UNAUTHORIZED, “Unauthorized” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5799em;top: 48.5276em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.0714em;top: 49.3609em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.238em;top: 52.9103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">A quick sidenote here is that the 401 is sent without the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">WWW-Authenticate </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">header, as &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 54.2436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">required by the HTTP Spec – we can of course set the value manually if we need to. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8246em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 28 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_29.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_29.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:36.0526em;top: 4.0058em; "><span class="stl_113 stl_08 stl_233" style="word-spacing:-0.0097em;">3.3. The Login Form for REST &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_29" style="word-spacing:-0.0097em;">3.3. The Login Form for REST &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">There are multiple ways to do Authentication for a REST API – one of the default Spring &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.1965em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">Security provides is </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Form Login </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– which uses an authentication processing ﬁlter – &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.6269em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic;">org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.4603em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">&lt;form-login&gt; </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">element will create this ﬁlter and will also allow us to set our custom &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.7936em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">authentication success handler on it. This can also be done manually by using the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">&lt;custom- &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1269em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">ﬁlter&gt; </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">element to register a ﬁlter at the position </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">FORM_LOGIN_FILTER </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– but the namespace &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.4603em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">support is ﬂexible enough. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.6965em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Note </span><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">that for a standard web application, the </span><span class="stl_170 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">auto-conﬁg </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">attribute of the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">&lt;http&gt; </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">element is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.0436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">shorthand syntax for some useful security conﬁguration. While this may be appropriate for &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.3769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">some very simple conﬁgurations, it doesn’t ﬁt and should not be used for a REST API. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.7637em; "><span class="stl_117 stl_08 stl_62" style="word-spacing:-0.0042em;">3.4. Authentication should return 200 instead of 301 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.5632em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">By default, form login will answer a successful authentication request with a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">301 MOVED &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.8965em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">PERMANENTLY </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">status code; this makes sense in the context of an actual login form which &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.2436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">needs to redirect after login. For a RESTful web service however, the desired response for a &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.5632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">successful authentication should be </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">200 OK</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.3965em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This is done by injecting a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">custom authentication success handler </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">in the form login ﬁlter, to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.7436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">replace the default one. The new handler implements the exact same login as the default &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.1603em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic;">org.springframework.security.web.authentication. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.4936em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0003em;">SavedRequestAwareAuthenticationSuccessHandler </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">with one notable difference – the redirect &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.8269em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">logic is removed: &nbsp;</span></div>
					<div class="stl_01" style="left:42.8255em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 29 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_30.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_30.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:24.6711em;top: 4.0058em; "><span class="stl_113 stl_08 stl_227" style="word-spacing:-0.0017em;">3.5. Failed Authentication should return 401 instead</span><span class="stl_113 stl_08 stl_19" style="word-spacing:0.2827em;">&nbsp;</span><span class="stl_113 stl_08 stl_235" style="word-spacing:-0.0167em;">of 302 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 8.1217em; "><span class="stl_148 stl_123 stl_181" style="word-spacing:-0.0153em;">public class MySavedRequestAwareAuthenꢁcaꢁonSuccessHandler &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 8.9551em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0149em;">extends SimpleUrlAuthenꢁcaꢁonSuccessHandler { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 10.6217em; "><span class="stl_148 stl_123 stl_165" style="word-spacing:-0.0164em;">private RequestCache requestCache = new HꢀpSessionRequestCache(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 12.2884em; "><span class="stl_148 stl_123 stl_133">@Override &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 13.1217em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.0154em;">public void onAuthenꢁcaꢁonSuccess(HꢀpServletRequest request, HꢀpServletResponse response, &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 13.9551em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0153em;">Authenꢁcaꢁon authenꢁcaꢁon) throws ServletExcepꢁon, IOExcepꢁon { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 14.7884em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0115em;">SavedRequest savedRequest = requestCache.getRequest(request, response); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 16.4551em; "><span class="stl_148 stl_123 stl_236" style="word-spacing:-0.0097em;">if (savedRequest == null) { &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 17.2884em; "><span class="stl_148 stl_123 stl_210">clearAuthenꢁcaꢁonAꢀributes(request); &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 18.1217em; "><span class="stl_148 stl_123 stl_141">return; &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 18.9551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:6.356em;top: 19.7884em; "><span class="stl_148 stl_123 stl_142" style="word-spacing:-0.0069em;">String targetUrlParam = getTargetUrlParameter(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 20.6217em; z-index:695; "><span class="stl_148 stl_123 stl_188" style="word-spacing:-0.0075em;">if (isAlwaysUseDefaultTargetUrl() </span><span class="stl_148 stl_123 stl_237">|</span><span class="stl_148 stl_123 stl_237">| &nbsp;</span></div>
					<div class="stl_01" style="left:6.695em;top: 21.4551em; "><span class="stl_148 stl_123 stl_238" style="word-spacing:-0.0085em;">(targetUrlParam != null &amp;&amp; &nbsp;</span></div>
					<div class="stl_01" style="left:6.695em;top: 22.2884em; "><span class="stl_148 stl_123 stl_118" style="word-spacing:-0.004em;">StringUꢁls.hasText(request.getParameter(targetUrlParam)))) { &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 23.1217em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0101em;">requestCache.removeRequest(request, response); &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 23.9551em; "><span class="stl_148 stl_123 stl_210">clearAuthenꢁcaꢁonAꢀributes(request); &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 24.7884em; "><span class="stl_148 stl_123 stl_141">return; &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 25.6217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:6.356em;top: 27.2884em; "><span class="stl_148 stl_123 stl_210">clearAuthenꢁcaꢁonAꢀributes(request); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 28.1217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 29.7884em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0149em;">public void setRequestCache(RequestCache requestCache) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 30.6217em; "><span class="stl_148 stl_123 stl_165" style="word-spacing:-0.0164em;">this.requestCache = requestCache; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 31.4551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 32.2884em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.0578em; "><span class="stl_117 stl_08 stl_62" style="word-spacing:-0.0017em;">3.5. Failed Authentication should return 401 instead &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.2578em; "><span class="stl_117 stl_08 stl_64" style="word-spacing:-0.0167em;">of 302 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.0573em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:-0.0001em;">Similarly </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– we conﬁgured the authentication failure handler – same way we did with the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.4044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">success handler. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.224em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Luckily </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– in this case, we don’t need to actually deﬁne a new class for this handler – the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.5711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">standard implementation – </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0003em;">SimpleUrlAuthenticationFailureHandler </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– does just ﬁne. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.3907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The only difference is that – now that we’re deﬁning this explicitly in our XML conﬁg – it’s </span><span class="stl_162 stl_161 stl_20">not &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.724em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">going to get a default </span><span class="stl_162 stl_161 stl_20" style="font-style:italic;">defaultFailure</span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Url from Spring </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– and so it won’t redirect. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8382em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 30 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_31.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_31.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:29.8269em;top: 4.0058em; "><span class="stl_113 stl_08 stl_147" style="word-spacing:-0.0132em;">3.6. The Authentication Manager and Provider &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_51" style="word-spacing:-0.0133em;">3.6. The Authentication Manager and Provider &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.8632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">The authentication process uses an </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">in-memory provider </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">to perform authentication – this is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">meant to simplify the conﬁguration as a production implementation of these artifacts is outside &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.5436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the scope of this post. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.597em; "><span class="stl_117 stl_08 stl_27" style="word-spacing:-0.0108em;">3.7 Finally – Authentication against the running &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.797em; "><span class="stl_117 stl_08 stl_89" style="word-spacing:-0.0318em;">REST Service &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.6103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Now let’s see how we can authenticate against the REST API – the URL for login is </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">/j_spring_ &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.9436em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">security_check – </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and a simple </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">curl </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">command performing login would be: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 28.7276em; "><span class="stl_148 stl_123 stl_220" style="word-spacing:-0.0245em;">curl -i -X POST -d j_username=user -d j_password=userPass &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 29.5609em; "><span class="stl_148 stl_123 stl_239">hꢀp://localhost:8080/spring-security-rest/j_spring_security_check &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.1103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This request will return the Cookie which will then be used by any subsequent request against &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.4436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the REST Service. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.2632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">We can use curl to authentication and </span><span class="stl_170 stl_161 stl_20" style="word-spacing:0em;">store the cookie it receives in a ﬁle: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 39.6442em; "><span class="stl_148 stl_123 stl_156" style="word-spacing:-0.0215em;">curl -i -X POST -d j_username=user -d j_password=userPass -c /opt/cookies.txt &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 40.4776em; "><span class="stl_148 stl_123 stl_239">hꢀp://localhost:8080/spring-security-rest/j_spring_security_check &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.0132em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">Then </span><span class="stl_170 stl_161 stl_20" style="word-spacing:0em;">we can use the cookie from the ﬁle </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to do further authenticated requests: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 46.3942em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0133em;">curl -i --header “Accept:applicaꢁon/json” -X GET -b /opt/cookies.txt &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 47.2276em; "><span class="stl_148 stl_123 stl_166">hꢀp://localhost:8080/spring-security-rest/api/foos &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.7632em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">This authenticated request will correctly </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">result in a 200 OK</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 53.1442em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.009em;">HTTP/1.1 200 OK &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 53.9776em; "><span class="stl_148 stl_123 stl_202" style="word-spacing:-0.0148em;">Server: Apache-Coyote/1.1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 54.8109em; "><span class="stl_148 stl_123 stl_128" style="word-spacing:-0.0072em;">Content-Type: applicaꢁon/json;charset=UTF-8 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 55.6442em; "><span class="stl_148 stl_123 stl_228" style="word-spacing:-0.0034em;">Transfer-Encoding: chunked &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 56.4776em; "><span class="stl_148 stl_123 stl_55" style="word-spacing:0.004em;">Date: Wed, 24 Jul 2013 20:31:13 GMT &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 58.1442em; "><span class="stl_148 stl_123 stl_35">[{“id”:0,”name”:”JbidXc”}] &nbsp;</span></div>
					<div class="stl_01" style="left:42.9047em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 31 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_32.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_32.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:36.5959em;top: 4.0058em; "><span class="stl_113 stl_08 stl_240" style="word-spacing:-0.0062em;">4. Maven and other trouble &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_63" style="word-spacing:-0.0062em;">4. Maven and other trouble &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.8769em; "><a href="http://www.baeldung.com/spring-with-maven#mvc" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The Spring </span></a><a href="http://www.baeldung.com/spring-with-maven#mvc" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:-0.0001em;">core dependencies </span></a><a href="http://www.baeldung.com/spring-with-maven#mvc" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">necessary for a web application and for the REST Service &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 12.2103em; "><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">have been discussed in detail. For security, we’ll need to add: </span></a><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">spring-security-web </span></a><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">spring- &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.5436em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">security-conﬁg </span><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– all of these have also been covered in the </span></a><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:0em;">Maven for Spring </span></a><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Security tutorial. &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 16.3769em; "><a href="http://www.baeldung.com/spring-security-with-maven#maven_problem" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">It’s worth paying close attention to the way Maven will resolve </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the older Spring dependencies – &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.7103em; "><a href="http://www.baeldung.com/spring-security-with-maven#maven_problem" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">the resolution strategy will start </span></a><a href="http://www.baeldung.com/spring-security-with-maven#maven_problem" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:-0.0001em;">causing problems </span></a><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">once the security artifacts are added to the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.0436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">pom. To address this problem, some of the core dependencies will need to be overridden in &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.3769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">order to keep them at the right version. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 30.097em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">5. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 33.9103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This section covered the basic security conﬁguration and &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 35.2298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">implementation for a RESTful Service using </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Spring Security &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 36.5632em; "><span class="stl_162 stl_161 stl_20">3.1</span><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">, discussing the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">web.xml</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, the security conﬁguration, the &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 37.9103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">HTTP status codes for the authentication process and the &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 39.2436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Maven resolution of the security artifacts. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8391em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 32 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_33.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_33.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_34.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_34.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0007em;">4: SPRING SECURITY BASIC &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.25em; z-index:150; "><span class="stl_115 stl_12 stl_224">AUTHENTICATION &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.9271em; "><a href="http://www.baeldung.com/spring-mvc-tutorial" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This section shows how to set up, conﬁgure and customize </span></a><a href="http://www.baeldung.com/spring-mvc-tutorial" target="_blank"><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Basic Authentication with Spring</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.2742em; "><a href="http://www.baeldung.com/spring-mvc-tutorial" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We’re going to built on top of this simple </span></a><a href="http://www.baeldung.com/spring-mvc-tutorial" target="_blank"><span class="stl_163 stl_120 stl_20" style="word-spacing:0em;">Spring MVC example</span></a><a href="http://www.baeldung.com/spring-mvc-tutorial" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, and secure the UI of the MVC &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 25.6075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">application with the Basic Auth mechanism provided by Spring Security. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.0776em; "><span class="stl_117 stl_08 stl_66" style="word-spacing:-0.0107em;">2. The Spring Security Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.8909em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The Conﬁguration for Spring Security is still XML: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 37.2582em; "><span class="stl_148 stl_123 stl_167" style="word-spacing:-0.017em;">&lt;?xml version=”1.0” encoding=”UTF-8”?&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 38.0915em; "><span class="stl_148 stl_123 stl_130" style="word-spacing:-0.0104em;">&lt;beans:beans xmlns=”hꢀp://www.springframework.org/schema/security” &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 38.9248em; "><span class="stl_148 stl_123 stl_125">xmlns:xsi=”hꢀp://www.w3.org/2001/XMLSchema-instance” &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 39.7582em; "><span class="stl_148 stl_123 stl_212">xmlns:beans=”hꢀp://www.springframework.org/schema/beans” &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 40.5915em; "><span class="stl_148 stl_123 stl_126">xsi:schemaLocaꢁon=” &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 41.4248em; "><span class="stl_148 stl_123 stl_146">hꢀp://www.springframework.org/schema/security &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 42.2582em; "><span class="stl_148 stl_123 stl_213">hꢀp://www.springframework.org/schema/security/spring-security-3.1.xsd &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 43.0915em; "><span class="stl_148 stl_123 stl_212">hꢀp://www.springframework.org/schema/beans &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 43.9248em; "><span class="stl_148 stl_123 stl_130">hꢀp://www.springframework.org/schema/beans/spring-beans-3.2.xsd”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 45.5915em; "><span class="stl_148 stl_123 stl_134" style="word-spacing:-0.0164em;">&lt;hꢀp use-expressions=”true”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 46.4248em; "><span class="stl_148 stl_123 stl_241" style="word-spacing:-0.0093em;">&lt;intercept-url paꢀern=”/**” access=”isAuthenꢁcated()” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 48.0915em; "><span class="stl_148 stl_123 stl_134" style="word-spacing:-0.0158em;">&lt;hꢀp-basic /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 48.9248em; "><span class="stl_148 stl_123 stl_219">&lt;/hꢀp&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 50.5915em; "><span class="stl_148 stl_123 stl_182">&lt;authenꢁcaꢁon-manager&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 51.4248em; "><span class="stl_148 stl_123 stl_131">&lt;authenꢁcaꢁon-provider&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 52.2582em; "><span class="stl_148 stl_123 stl_175">&lt;user-service&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.712em;top: 53.0915em; "><span class="stl_148 stl_123 stl_236" style="word-spacing:-0.0099em;">&lt;user name=”user1” password=”user1Pass” authoriꢁes=”ROLE_USER” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 53.9248em; "><span class="stl_148 stl_123 stl_146">&lt;/user-service&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 54.7582em; "><span class="stl_148 stl_123 stl_204">&lt;/authenꢁcaꢁon-provider&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 55.5915em; "><span class="stl_148 stl_123 stl_221">&lt;/authenꢁcaꢁon-manager&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 57.2582em; "><span class="stl_148 stl_123 stl_149">&lt;/beans:beans&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:42.8231em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 34 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_35.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_35.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:32.0685em;top: 4.0058em; "><span class="stl_113 stl_08 stl_242" style="word-spacing:-0.0132em;">3. Consuming The Secured Application &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.3378em; "><a href="http://docs.spring.io/autorepo/docs/spring-security/4.0.0.CI-SNAPSHOT/reference/htmlsingle/#jc" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">There is of course the option of </span></a><a href="http://docs.spring.io/autorepo/docs/spring-security/4.0.0.CI-SNAPSHOT/reference/htmlsingle/#jc" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">Java based conﬁguration </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">as well. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.1711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">What is relevant here is the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">&lt;http-basic&gt; </span><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">element inside the main </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">&lt;http&gt; </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">element of the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 11.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">conﬁguration – this is enough to enable Basic Authentication for the entire application. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The Authentication Manager is not the focus of this section, so we are using an in memory &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">manager with the user and password deﬁned in plaintext. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.0044em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">web.xml </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">of the web application enabling Spring Security has already been discussed in &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the previous section. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.8078em; "><span class="stl_117 stl_08 stl_31" style="word-spacing:-0.0132em;">3. Consuming The Secured Application &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.6211em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">curl </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">command is our go to tool for consuming the secured application. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">First, let’s try to request the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">/homepage.html </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">without providing any security credentials: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 34.2384em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0116em;">curl -i hꢀp://localhost:8080/spring-security-mvc-basic-auth/homepage.html &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.7878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We get back the expected </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">401 Unauthorized </span><a href="http://tools.ietf.org/html/rfc1945#section-10.16" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and the </span></a><a href="http://tools.ietf.org/html/rfc1945#section-10.16" target="_blank"><span class="stl_163 stl_120 stl_20" style="word-spacing:0em;">Authentication Challenge</span></a><a href="http://tools.ietf.org/html/rfc1945#section-10.16" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: &nbsp;</span></a></div>
					<div class="stl_01" style="left:5em;top: 41.5717em; "><span class="stl_148 stl_123 stl_124" style="word-spacing:-0.0074em;">HTTP/1.1 401 Unauthorized &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 42.4051em; "><span class="stl_148 stl_123 stl_202" style="word-spacing:-0.0148em;">Server: Apache-Coyote/1.1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 43.2384em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0123em;">Set-Cookie: JSESSIONID=E5A8D3C16B65A0A007CFAACAEEE6916B; Path=/spring-security-mvc-basic-auth/; HꢀpOnly &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 44.0717em; "><span class="stl_148 stl_123 stl_184" style="word-spacing:-0.0165em;">WWW-Authenꢁcate: Basic realm=”Spring Security Applicaꢁon” &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 44.9051em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0066em;">Content-Type: text/html;charset=uꢂ-8 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 45.7384em; "><span class="stl_148 stl_123 stl_243" style="word-spacing:-0.008em;">Content-Length: 1061 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 46.5717em; "><span class="stl_148 stl_123 stl_33" style="word-spacing:0.0014em;">Date: Wed, 29 May 2013 15:14:08 GMT &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The browser would interpret this challenge and prompt us for credentials with a simple dialog, &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">but since we’re using </span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">curl</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, this isn’t the case. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.274em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Now, let’s request the same resource – the homepage – but </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">provide the credentials </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">to access &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">it as well: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 57.9884em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.0113em;">curl -i --user user1:user1Pass hꢀp://localhost:8080/spring-security-mvc-basic-auth/homepage.html &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 61.5378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Now, the response from the server is </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">200 OK </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">along with a </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">Cookie</span><span class="stl_121 stl_120 stl_20">: &nbsp;</span></div>
					<div class="stl_01" style="left:42.8367em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 35 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_36.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_36.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:31.1593em;top: 4.0058em; "><span class="stl_113 stl_08 stl_200" style="word-spacing:-0.0077em;">4. Further Configuration – The Entry Point &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 9.7051em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.009em;">HTTP/1.1 200 OK &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 10.5384em; "><span class="stl_148 stl_123 stl_202" style="word-spacing:-0.0148em;">Server: Apache-Coyote/1.1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.3717em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.0115em;">Set-Cookie: JSESSIONID=301225C7AE7C74B0892887389996785D; Path=/spring-security-mvc-basic-auth/; HꢀpOnly &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 12.2051em; "><span class="stl_148 stl_123 stl_241" style="word-spacing:-0.0074em;">Content-Type: text/html;charset=ISO-8859-1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 13.0384em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0113em;">Content-Language: en-US &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 13.8717em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0125em;">Content-Length: 90 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 14.7051em; "><span class="stl_148 stl_123 stl_78" style="word-spacing:0.0008em;">Date: Wed, 29 May 2013 15:19:38 GMT &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.2544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">From the browser, the application can be consumed normally – the only difference is that a &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.5878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">login page is no longer a hard requirement since all browsers support Basic Authentication &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.9211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and use a dialog to prompt the user for credentials. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.3912em; "><span class="stl_117 stl_08 stl_44" style="word-spacing:-0.0077em;">4. Further Configuration – The Entry Point &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.2044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">By default, the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">BasicAuthenticationEntryPoint </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">provisioned by Spring Security returns a full &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.5378em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">html page for a </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">401 Unauthorized </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">response back to the client. This html representation of the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">error renders well in a browser, but it not well suited for other scenarios, such as a REST API &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.2044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">where a json representation may be preferred. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.0378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The namespace is ﬂexible enough for this new requirement as well – to address this – the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.3711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">entry point can be overridden: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 42.1551em; "><span class="stl_148 stl_123 stl_174" style="word-spacing:-0.016em;">&lt;hꢀp-basic entry-point-ref=”myBasicAuthenꢁcaꢁonEntryPoint” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.7044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The new entry point is deﬁned as a standard bean: &nbsp;</span></div>
					<div class="stl_01" style="left:42.8236em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 36 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_37.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_37.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:36.151em;top: 4.0058em; "><span class="stl_113 stl_08 stl_216" style="word-spacing:-0.0081em;">5. The Maven Dependencies &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 9.7051em; "><span class="stl_206 stl_123 stl_175">@Component &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 10.5384em; "><span class="stl_148 stl_123 stl_204" style="word-spacing:-0.0156em;">public class MyBasicAuthenꢁcaꢁonEntryPoint extends BasicAuthenꢁcaꢁonEntryPoint { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 12.2051em; "><span class="stl_148 stl_123 stl_133">@Override &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 13.0384em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0128em;">public void commence &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 13.8717em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.0152em;">(HꢀpServletRequest request, HꢀpServletResponse response, AuthenꢁcaꢁonExcepꢁon authEx) &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 14.7051em; "><span class="stl_148 stl_123 stl_190" style="word-spacing:-0.0176em;">throws IOExcepꢁon, ServletExcepꢁon { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 15.5384em; "><span class="stl_148 stl_123 stl_124" style="word-spacing:-0.0076em;">response.addHeader(“WWW-Authenꢁcate”, “Basic realm=\”” + getRealmName() + “\””); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 16.3717em; "><span class="stl_148 stl_123 stl_189">response.setStatus(HꢀpServletResponse.SC_UNAUTHORIZED); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 17.2051em; "><span class="stl_148 stl_123 stl_138" style="word-spacing:-0.009em;">PrintWriter writer = response.getWriter(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 18.0384em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.011em;">writer.println(“HTTP Status 401 - “ + authEx.getMessage()); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 18.8717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 20.5384em; "><span class="stl_148 stl_123 stl_133">@Override &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 21.3717em; "><span class="stl_148 stl_123 stl_174" style="word-spacing:-0.0161em;">public void aꢃerProperꢁesSet() throws Excepꢁon { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 22.2051em; "><span class="stl_148 stl_123 stl_157">setRealmName(“Baeldung”); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 23.0384em; "><span class="stl_148 stl_123 stl_212">super.aꢃerProperꢁesSet(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 23.8717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 24.7051em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.2544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">By writing directly to the HTTP Response we now have full control over the format of the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.5878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">response body. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.0578em; "><span class="stl_117 stl_08 stl_27" style="word-spacing:-0.0081em;">5. The Maven Dependencies &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.2878em; "><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0009em;">The Maven dependencies for Spring Security have been discussed before in the </span></a><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:-0.001em;">Spring Security &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 41.6211em; "><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:0em;">with Maven article </span></a><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– we will need both </span></a><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">spring-security-web </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">spring-security-conﬁg </span><span class="stl_119 stl_120 stl_20">available &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">at runtime. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8702em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 37 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_38.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_38.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:36.151em;top: 4.0058em; "><span class="stl_113 stl_08 stl_216" style="word-spacing:-0.0081em;">5. The Maven Dependencies &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 11.3912em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">6. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 13.7877em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In this example we secured the existing REST application with &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 15.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Spring Security and Basic Authentication. We discussed the &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 16.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">XML conﬁguration and we consumed the application with &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 17.7877em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">simple curl commands. Finally took control of the exact error &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 19.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">message format – moving from the standard HTML error page &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 20.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to a custom text or json format. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 23.2877em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-basic-auth#readme" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The implementation of this section can be found in </span></a><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-basic-auth#readme" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:-0.0001em;">the github project </span></a><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-basic-auth#readme" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– this is an &nbsp;</span></a></div>
					<div class="stl_01" style="left:7.5em;top: 24.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Eclipse based project, so it should be easy to import and run as it is. When the &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 25.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">project runs locally, the sample html can be accessed at: &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 28.7878em; "><a href="http://localhost:8080/spring-security-mvc-basic-auth/homepage.html" target="_blank"><span class="stl_163 stl_120 stl_20">http://localhost:8080/spring-security-mvc-basic-auth/homepage.html &nbsp;</span></a></div>
					<div class="stl_01" style="left:42.8226em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 38 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_39.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_39.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_40.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_40.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 7.5em; "><span class="stl_115 stl_12 stl_224" style="word-spacing:-0.0008em;">5: SPRING SECURITY DIGEST &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 10.25em; z-index:119; "><span class="stl_115 stl_12 stl_224">AUTHENTICATION &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 19.1276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 22.9409em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This section illustrates how to set up, conﬁgure and customize Digest Authentication with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 24.2742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Spring. Similar to the previous section about </span><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">Basic Authentication</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, we’re going to built on top &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 25.6075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of the Spring REST Service from the previous sections, and secure the application with the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 26.9409em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Digest Auth mechanism provided by Spring</span><span class="stl_121 stl_120 stl_19" style="word-spacing:0.28em;">&nbsp;</span><span class="stl_121 stl_120 stl_20">Security. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 32.4109em; "><span class="stl_117 stl_08 stl_70" style="word-spacing:-0.0207em;">2. The Security XML Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 36.2242em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">First thing to understand about the conﬁguration is that, while Spring Security does have full &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 37.5438em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">out of the box support for the Digest authentication mechanism, this support is </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">not as well &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 38.8771em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">integrated into the namespace </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">as Basic Authentication was. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 41.7104em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">In this case, we need to manually </span><span class="stl_170 stl_161 stl_20" style="word-spacing:-0.0001em;">deﬁne the raw beans </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">that are going to make up the security &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 43.0575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">conﬁguration – the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">DigestAuthenticationFilter </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">the DigestAuthenticationEntryPoint</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: &nbsp;</span></div>
					<div class="stl_01" style="left:4.9621em;top: 46.8415em; "><span class="stl_148 stl_123 stl_167" style="word-spacing:-0.017em;">&lt;?xml version=”1.0” encoding=”UTF-8”?&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.9621em;top: 47.6748em; "><span class="stl_148 stl_123 stl_130" style="word-spacing:-0.0104em;">&lt;beans:beans xmlns=”hꢀp://www.springframework.org/schema/security” &nbsp;</span></div>
					<div class="stl_01" style="left:5.6423em;top: 48.5082em; "><span class="stl_148 stl_123 stl_125">xmlns:xsi=”hꢀp://www.w3.org/2001/XMLSchema-instance” &nbsp;</span></div>
					<div class="stl_01" style="left:5.6423em;top: 49.3415em; "><span class="stl_148 stl_123 stl_212">xmlns:beans=”hꢀp://www.springframework.org/schema/beans” &nbsp;</span></div>
					<div class="stl_01" style="left:5.6401em;top: 50.1748em; "><span class="stl_148 stl_123 stl_126">xsi:schemaLocaꢁon=” &nbsp;</span></div>
					<div class="stl_01" style="left:6.3181em;top: 51.0082em; "><span class="stl_148 stl_123 stl_146">hꢀp://www.springframework.org/schema/security &nbsp;</span></div>
					<div class="stl_01" style="left:6.3181em;top: 51.8415em; "><span class="stl_148 stl_123 stl_213">hꢀp://www.springframework.org/schema/security/spring-security-3.1.xsd &nbsp;</span></div>
					<div class="stl_01" style="left:6.3181em;top: 52.6748em; "><span class="stl_148 stl_123 stl_212">hꢀp://www.springframework.org/schema/beans &nbsp;</span></div>
					<div class="stl_01" style="left:6.3181em;top: 53.5082em; "><span class="stl_148 stl_123 stl_130">hꢀp://www.springframework.org/schema/beans/spring-beans-3.2.xsd”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:42.8241em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 40 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_41.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_41.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:34.2001em;top: 4.0058em; "><span class="stl_113 stl_08 stl_245" style="word-spacing:-0.0207em;">2. The Security XML Configuration &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 7.8484em; "><span class="stl_148 stl_123 stl_210" style="word-spacing:-0.0086em;">&lt;beans:bean id=”digestFilter” &nbsp;</span></div>
					<div class="stl_01" style="left:6.0921em;top: 8.6817em; "><span class="stl_148 stl_123 stl_143">class=”org.springframework.security.web.authenꢁcaꢁon.www.DigestAuthenꢁcaꢁonFilter”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 9.5151em; "><span class="stl_148 stl_123 stl_182" style="word-spacing:-0.0175em;">&lt;beans:property name=”userDetailsService” ref=”userService” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 10.3484em; "><span class="stl_148 stl_123 stl_143" style="word-spacing:-0.0142em;">&lt;beans:property name=”authenꢁcaꢁonEntryPoint” ref=”digestEntryPoint” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 11.1817em; "><span class="stl_148 stl_123 stl_155">&lt;/beans:bean&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 12.0151em; "><span class="stl_148 stl_123 stl_157" style="word-spacing:-0.0104em;">&lt;beans:bean id=”digestEntryPoint” &nbsp;</span></div>
					<div class="stl_01" style="left:6.0921em;top: 12.8484em; "><span class="stl_148 stl_123 stl_133">class=”org.springframework.security.web.authenꢁcaꢁon.www.DigestAuthenꢁcaꢁonEntryPoint”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 13.6817em; "><span class="stl_148 stl_123 stl_221" style="word-spacing:-0.0138em;">&lt;beans:property name=”realmName” value=”Contacts Realm via Digest Authenꢁcaꢁon” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 14.5151em; "><span class="stl_148 stl_123 stl_219" style="word-spacing:-0.0144em;">&lt;beans:property name=”key” value=”acegi” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 15.3484em; "><span class="stl_148 stl_123 stl_155">&lt;/beans:bean&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 17.0151em; "><span class="stl_148 stl_123 stl_184" style="word-spacing:-0.0166em;">&lt;!-- the security namespace conﬁguraꢁon --&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 17.8484em; "><span class="stl_148 stl_123 stl_181" style="word-spacing:-0.0158em;">&lt;hꢀp use-expressions=”true” entry-point-ref=”digestEntryPoint”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 18.6817em; "><span class="stl_148 stl_123 stl_241" style="word-spacing:-0.0093em;">&lt;intercept-url paꢀern=”/**” access=”isAuthenꢁcated()” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 20.3484em; "><span class="stl_148 stl_123 stl_137" style="word-spacing:-0.0179em;">&lt;custom-ﬁlter ref=”digestFilter” aꢃer=”BASIC_AUTH_FILTER” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 21.1817em; "><span class="stl_148 stl_123 stl_219">&lt;/hꢀp&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 22.8484em; "><span class="stl_148 stl_123 stl_182">&lt;authenꢁcaꢁon-manager&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 23.6817em; "><span class="stl_148 stl_123 stl_131">&lt;authenꢁcaꢁon-provider&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.1054em;top: 24.5151em; "><span class="stl_148 stl_123 stl_181" style="word-spacing:-0.0148em;">&lt;user-service id=”userService”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.7834em;top: 25.3484em; "><span class="stl_148 stl_123 stl_236" style="word-spacing:-0.0099em;">&lt;user name=”user1” password=”user1Pass” authoriꢁes=”ROLE_USER” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:7.1054em;top: 26.1817em; "><span class="stl_148 stl_123 stl_146">&lt;/user-service&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 27.0151em; "><span class="stl_148 stl_123 stl_204">&lt;/authenꢁcaꢁon-provider&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 27.8484em; "><span class="stl_148 stl_123 stl_221">&lt;/authenꢁcaꢁon-manager&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 29.5151em; "><span class="stl_148 stl_123 stl_149">&lt;/beans:beans&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 33.0644em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Next, we need to integrate these beans into the overall security conﬁguration – and in this &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 34.3978em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">case, the namespace is still ﬂexible enough to allow us to do that. &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 37.2311em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The ﬁrst part of this is pointing to the custom entry point bean, via the entry-point-ref &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 38.5644em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">attribute of the main </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">&lt;http&gt; </span><span class="stl_121 stl_120 stl_20">element. &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 41.384em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The second part is </span><span class="stl_170 stl_161 stl_20" style="word-spacing:0em;">adding the newly deﬁned digest ﬁlter into the security ﬁlter chain</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. Since &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 42.7311em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">this ﬁlter is functionally equivalent to the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">BasicAuthenticationFilter</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, we are using the same &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 44.0644em; "><a href="http://docs.spring.io/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-custom-filters" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">relative position in the chain – this is speciﬁed by the </span></a><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">BASIC_AUTH_FILTER </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">alias in the overall &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 45.3978em; "><a href="http://docs.spring.io/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-custom-filters" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:0em;">Spring Security Standard Filters</span></a><a href="http://docs.spring.io/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-custom-filters" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.238em;top: 48.2173em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Finally, notice that the Digest Filter is conﬁgured to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">point to the user service bean </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– and here, &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 49.5644em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the namespace is again very useful as it allows us to specify a bean name for the default user &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 50.8978em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">service created by the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">&lt;user-service&gt; </span><span class="stl_121 stl_120 stl_20">element: &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 54.6817em; "><span class="stl_148 stl_123 stl_202" style="word-spacing:-0.0148em;">&lt;user-service id=”userService”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:42.8906em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 41 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_42.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_42.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:32.1743em;top: 4.0058em; "><span class="stl_113 stl_08 stl_242" style="word-spacing:-0.0104em;">3. Consuming the Secured Application &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_31" style="word-spacing:-0.0104em;">3. Consuming the Secured Application &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.8632em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We’re going to be using </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">curl </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">command </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">to consume the secured application and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">understand how a client can interact with it. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.0298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s start by requesting the homepage – </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">without providing security credentials </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">in the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.3769em; "><span class="stl_121 stl_120 stl_20">request: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 20.1609em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0111em;">curl -i hꢀp://localhost/spring-security-mvc-digest-auth/homepage.html &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.7103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">As expected, we get back a response with a 401 Unauthorized status code: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 27.4942em; "><span class="stl_148 stl_123 stl_124" style="word-spacing:-0.0074em;">HTTP/1.1 401 Unauthorized &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 28.3276em; "><span class="stl_148 stl_123 stl_202" style="word-spacing:-0.0148em;">Server: Apache-Coyote/1.1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 29.1609em; "><span class="stl_148 stl_123 stl_133" style="word-spacing:-0.0134em;">Set-Cookie: JSESSIONID=CF0233C...; Path=/spring-security-mvc-digest-auth/; HꢀpOnly &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 29.9942em; z-index:667; "><span class="stl_148 stl_123 stl_243" style="word-spacing:-0.0092em;">WWW-Authenꢁcate: Digest realm=”Contacts Realm via Digest Authenꢁcaꢁon”, qop=”auth”, &nbsp;</span></div>
					<div class="stl_01" style="left:5.339em;top: 30.8276em; "><span class="stl_148 stl_123 stl_124">nonce=”MTM3MzYzODE2NTg3OTo3MmYxN2JkOWYxZTc4MzdmMzBiN2Q0YmY0ZTU0N2RkZg==” &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 31.6609em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0066em;">Content-Type: text/html;charset=uꢂ-8 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 32.4942em; "><span class="stl_148 stl_123 stl_243" style="word-spacing:-0.008em;">Content-Length: 1061 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 33.3276em; "><span class="stl_148 stl_123 stl_246" style="word-spacing:-0.0032em;">Date: Fri, 12 Jul 2013 14:04:25 GMT &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">If this request were sent by the browser, the authentication challenge would prompt the user &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for credentials using a simple user/password dialog. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.0298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s now </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">provide the correct credentials </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and send the request again: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 44.8276em; "><span class="stl_148 stl_123 stl_227" style="word-spacing:-0.027em;">curl -i --digest --user &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 45.6609em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0088em;">user1:user1Pass hꢀp://localhost/spring-security-mvc-digest-auth/homepage.html &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.6132em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Notice </span><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">that we are enabling Digest Authentication for the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">curl </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">command via the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">–digest </span><span class="stl_121 stl_120 stl_20">ﬂag. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The ﬁrst response from the server will be the same – the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">401 Unauthorized </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– but the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">challenge will now be interpreted and acted upon by a second request – which will succeed &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.5436em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">with a </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">200 OK</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: &nbsp;</span></div>
					<div class="stl_01" style="left:42.825em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 42 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_43.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_43.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:36.1276em;top: 4.0058em; "><span class="stl_113 stl_08 stl_216" style="word-spacing:-0.0081em;">4. The Maven Dependencies &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 8.2884em; "><span class="stl_148 stl_123 stl_124" style="word-spacing:-0.0074em;">HTTP/1.1 401 Unauthorized &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 9.1217em; "><span class="stl_148 stl_123 stl_202" style="word-spacing:-0.0148em;">Server: Apache-Coyote/1.1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 9.9551em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0114em;">Set-Cookie: JSESSIONID=A961E0D...; Path=/spring-security-mvc-digest-auth/; HꢀpOnly &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 10.7884em; z-index:328; "><span class="stl_148 stl_123 stl_243" style="word-spacing:-0.0092em;">WWW-Authenꢁcate: Digest realm=”Contacts Realm via Digest Authenꢁcaꢁon”, qop=”auth”, &nbsp;</span></div>
					<div class="stl_01" style="left:5.3398em;top: 11.6217em; "><span class="stl_148 stl_123 stl_157">MTM3MzYzODgyOTczMTo3YjM4OWQzMGU0YTgwZDg0YmYwZjRlZWJjMDQzZWZkOA==” &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 12.4551em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0066em;">Content-Type: text/html;charset=uꢂ-8 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 13.2884em; "><span class="stl_148 stl_123 stl_243" style="word-spacing:-0.008em;">Content-Length: 1061 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 14.1217em; "><span class="stl_148 stl_123 stl_31" style="word-spacing:0.0021em;">Date: Fri, 12 Jul 2013 14:15:29 GMT &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 15.7884em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.009em;">HTTP/1.1 200 OK &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 16.6217em; "><span class="stl_148 stl_123 stl_202" style="word-spacing:-0.0148em;">Server: Apache-Coyote/1.1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 17.4551em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0117em;">Set-Cookie: JSESSIONID=55F996B...; Path=/spring-security-mvc-digest-auth/; HꢀpOnly &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 18.2884em; "><span class="stl_148 stl_123 stl_241" style="word-spacing:-0.0074em;">Content-Type: text/html;charset=ISO-8859-1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 19.1217em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0113em;">Content-Language: en-US &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 19.9551em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0125em;">Content-Length: 90 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 20.7884em; "><span class="stl_148 stl_123 stl_31" style="word-spacing:0.0021em;">Date: Fri, 12 Jul 2013 14:15:29 GMT &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 22.4551em; "><span class="stl_148 stl_123 stl_89">&lt;html&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 23.2884em; "><span class="stl_148 stl_123 stl_136">&lt;head&gt;&lt;/head&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 24.9551em; "><span class="stl_148 stl_123 stl_247">&lt;body&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 25.7884em; "><span class="stl_148 stl_123 stl_209" style="word-spacing:-0.0046em;">&lt;h1&gt;This is the homepage&lt;/h1&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 26.6217em; "><span class="stl_148 stl_123 stl_248">&lt;/body&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 27.4551em; "><span class="stl_148 stl_123 stl_236">&lt;/html&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.9907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">A ﬁnal note on this interaction is that a client can </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">preemptively send the correct &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.324em; "><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">Authorization </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">header </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">with the ﬁrst request, and thus entirely avoid the server security &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">challenge and the second request. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.1412em; "><span class="stl_117 stl_08 stl_27" style="word-spacing:-0.0081em;">4. The Maven Dependencies &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.9544em; "><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">The security dependencies are discussed in depth in the </span></a><a href="http://www.baeldung.com/spring-security-with-maven" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:0em;">Spring Security Maven tutorial</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. In &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.2878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">short, we will need to deﬁne </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">spring-security-web </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">spring-security-conﬁg </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">as dependencies &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.6211em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">in our </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">pom.xml</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8231em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 43 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_44.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_44.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:36.1276em;top: 4.0058em; "><span class="stl_113 stl_08 stl_216" style="word-spacing:-0.0081em;">4. The Maven Dependencies &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 11.3912em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">5. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 15.2044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In this section we introduce security into a simple Spring &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 16.5377em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">REST API by leveraging the Digest Authentication support in &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 17.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the framework. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 20.7044em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-mvc-digest-auth#readme" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">The implementation of these examples can be found in </span></a><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-mvc-digest-auth#readme" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:0em;">the github project </span></a><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– this &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 22.0377em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is an Eclipse based project, so it should be easy to import and run as it is. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 24.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">When the project runs locally, the homepage html can be accessed at (or, with &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 26.2044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">minimal Tomcat conﬁguration, on port 80): &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 29.0378em; "><a href="http://localhost:8080/spring-security-mvc-digest-auth/homepage.html" target="_blank"><span class="stl_163 stl_120 stl_20">http://localhost:8080/spring-security-mvc-digest-auth/homepage.html &nbsp;</span></a></div>
					<div class="stl_01" style="left:7.5em;top: 31.8711em; "><a href="http://www.baeldung.com/2011/11/20/basic-and-digest-authentication-for-a-restful-service-with-spring-security-3-1/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Finally, in the next section we’ll see that there is no reason </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">an application &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 33.1907em; "><a href="http://www.baeldung.com/2011/11/20/basic-and-digest-authentication-for-a-restful-service-with-spring-security-3-1/" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">needs to </span></a><a href="http://www.baeldung.com/2011/11/20/basic-and-digest-authentication-for-a-restful-service-with-spring-security-3-1/" target="_blank"><span class="stl_163 stl_120 stl_20" style="word-spacing:-0.0001em;">choose between Basic and Digest authentication </span></a><span class="stl_119 stl_120 stl_19" style="word-spacing:-0.02em;">– </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">both can be set up &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 34.524em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">simultaneously on the same URI structure</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, in such a way that the client can pick &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 35.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">between the two mechanisms when consuming the web application. &nbsp;</span></div>
					<div class="stl_01" style="left:42.809em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 44 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_45.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_45.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_46.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_46.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; z-index:92; "><span class="stl_115 stl_12 stl_13" style="word-spacing:-0.0001em;">6: BASIC AND DIGEST &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.25em; z-index:110; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0004em;">AUTHENTICATION FOR A &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13em; "><span class="stl_115 stl_12 stl_224" style="word-spacing:-0.0006em;">REST SERVICE WITH SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.75em; z-index:139; "><span class="stl_115 stl_12 stl_224">SECURITY &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.6276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.4271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">This section discusses how to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">set up both Basic and Digest Authentication on the same &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.7604em; "><a href="http://www.baeldung.com/2011/10/31/securing-a-restful-web-service-with-spring-security-3-1-part-3/" target="_blank"><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">URI structure of a REST API</span></a><a href="http://www.baeldung.com/2011/10/31/securing-a-restful-web-service-with-spring-security-3-1-part-3/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. In the two </span></a><a href="http://www.baeldung.com/2011/10/31/securing-a-restful-web-service-with-spring-security-3-1-part-3/" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">previous sections</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, we discussed another method of &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.1075em; "><a href="http://www.baeldung.com/2011/10/31/securing-a-restful-web-service-with-spring-security-3-1-part-3/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">securing the REST Service – </span></a><a href="http://www.baeldung.com/2011/10/31/securing-a-restful-web-service-with-spring-security-3-1-part-3/" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:0em;">form based authentication</span></a><a href="http://www.baeldung.com/2011/10/31/securing-a-restful-web-service-with-spring-security-3-1-part-3/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, so Basic and Digest authentication is &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 32.4409em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the natural alternative, as well as the more RESTful one. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.4943em; "><span class="stl_117 stl_08 stl_64" style="word-spacing:-0.0078em;">2. Configuration of Basic Authentication &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.3075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The main reason that form based authentication is not ideal for a RESTful Service is that &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.6271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">Spring Security will </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">make use of Sessions </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– this is of course state on the server, so </span><span class="stl_162 stl_161 stl_20">the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.9604em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">statelessness constraints in REST </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is practically ignored. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.8075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We’ll start by setting up Basic Authentication – ﬁrst we remove the old custom entry point &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.1409em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and ﬁlter from the main </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">&lt;http&gt; </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">security element: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 50.9248em; "><span class="stl_148 stl_123 stl_229" style="word-spacing:-0.0106em;">&lt;hꢀp create-session=”stateless”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 51.7582em; "><span class="stl_148 stl_123 stl_238" style="word-spacing:-0.009em;">&lt;intercept-url paꢀern=”/api/admin/**” access=”ROLE_ADMIN” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 53.4248em; "><span class="stl_148 stl_123 stl_204" style="word-spacing:-0.0154em;">&lt;hꢀp-basic /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 54.2582em; "><span class="stl_148 stl_123 stl_219">&lt;/hꢀp&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.8075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Note how support for basic authentication has been added with a single conﬁguration line – &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 59.1409em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">&lt;http-basic /&gt; </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– which handles the creation and wiring of both the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">BasicAuthenticationFilter &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 60.4742em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">BasicAuthenticationEntryPoint</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8095em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 46 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_47.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_47.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:23.1512em;top: 4.0058em; "><span class="stl_113 stl_08 stl_249" style="word-spacing:-0.0035em;">2.1. Satisfying the stateless constraint – getting rid of sessions &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_27" style="word-spacing:-0.0007em;">2.1. Satisfying the stateless constraint – getting rid of &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.2637em; "><span class="stl_117 stl_08 stl_168">sessions &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.0769em; "><a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">One of the main constraints of the RESTful architectural style </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is that the client-server &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.4103em; "><a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">communication is fully stateless, as the </span></a><a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:-0.0001em;">original dissertation </span></a><a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm" target="_blank"><span class="stl_121 stl_120 stl_20">reads: &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 18.416em; "><span class="stl_250 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">5.1.3 Stateless &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.9936em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">We next add a constraint to the client-server interaction: communication must be stateless &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.3269em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">in nature, as in the client-stateless-server (CSS) style of Section 3.4.3 (Figure 5-3), such that &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.6603em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">each request from client to server must contain all of the information necessary to understand &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.9798em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">the request, and cannot take advantage of any stored context on the server. </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Session state is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.3132em; "><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">therefore kept entirely on the client. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.5632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The concept of </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Session </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">on the server is one with a long history in Spring Security, and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.9103em; "><a href="https://jira.springsource.org/browse/SEC-1424" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">removing it entirely has been difﬁcult until now, especially wh</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">en conﬁguration was done by &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.2436em; "><a href="https://jira.springsource.org/browse/SEC-1424" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">using the namespace. However, Spring Security 3.1 </span></a><a href="https://jira.springsource.org/browse/SEC-1424" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:-0.0001em;">augments </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the namespace conﬁguration &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.5632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">with a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">new </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">stateless </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">option </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for session creation, which effectively guarantees that no session &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.9103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">will be created or used by Spring. What this new option does is completely removes all &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.2436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">session related ﬁlters from the security ﬁlter chain, ensuring that authentication is performed &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.5769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for each request. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.047em; "><span class="stl_117 stl_08 stl_47" style="word-spacing:-0.0083em;">3. Configuration of Digest Authentication &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.8603em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Starting with the previous conﬁguration, the ﬁlter and entry point necessary to set up digest &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.1798em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">authentication will be deﬁned as beans. Then, the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">digest entry point </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">will override the one &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.5132em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">created by </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">&lt;http-basic&gt; </span><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">behind the scenes. Finally, the custom </span><span class="stl_170 stl_161 stl_20" style="word-spacing:0em;">digest ﬁlter </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">will be introduced &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.8603em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">in the security ﬁlter chain using the after semantics of the security namespace to position it &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.1936em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">directly after the basic authentication ﬁlter. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8561em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 47 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_48.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_48.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:21.0833em;top: 4.0058em; "><span class="stl_113 stl_08 stl_251">4.SupportingbothauthenticationprotocolsinthesameRESTfulservice &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 8.2884em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0129em;">&lt;hꢀp create-session=”stateless” entry-point-ref=”digestEntryPoint”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 9.1217em; "><span class="stl_148 stl_123 stl_238" style="word-spacing:-0.009em;">&lt;intercept-url paꢀern=”/api/admin/**” access=”ROLE_ADMIN” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 10.7884em; "><span class="stl_148 stl_123 stl_204" style="word-spacing:-0.0154em;">&lt;hꢀp-basic /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 11.6217em; "><span class="stl_148 stl_123 stl_137" style="word-spacing:-0.0178em;">&lt;custom-ﬁlter ref=”digestFilter” aꢃer=”BASIC_AUTH_FILTER” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 12.4551em; "><span class="stl_148 stl_123 stl_219">&lt;/hꢀp&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 14.1217em; "><span class="stl_148 stl_123 stl_149" style="word-spacing:-0.0103em;">&lt;beans:bean id=”digestFilter” class= &nbsp;</span></div>
					<div class="stl_01" style="left:5.1703em;top: 14.9551em; "><span class="stl_148 stl_123 stl_219">“org.springframework.security.web.authenꢁcaꢁon.www.DigestAuthenꢁcaꢁonFilter”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 15.7884em; "><span class="stl_148 stl_123 stl_182" style="word-spacing:-0.0175em;">&lt;beans:property name=”userDetailsService” ref=”userService” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 16.6217em; "><span class="stl_148 stl_123 stl_143" style="word-spacing:-0.0142em;">&lt;beans:property name=”authenꢁcaꢁonEntryPoint” ref=”digestEntryPoint” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 17.4551em; "><span class="stl_148 stl_123 stl_226">&lt;/beans:bean&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 19.1217em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0116em;">&lt;beans:bean id=”digestEntryPoint” class= &nbsp;</span></div>
					<div class="stl_01" style="left:5.1703em;top: 19.9551em; "><span class="stl_148 stl_123 stl_158">“org.springframework.security.web.authenꢁcaꢁon.www.DigestAuthenꢁcaꢁonEntryPoint”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 20.7884em; "><span class="stl_148 stl_123 stl_130" style="word-spacing:-0.0112em;">&lt;beans:property name=”realmName” value=”Contacts Realm via Digest Authenꢁcaꢁon”/&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 21.6217em; "><span class="stl_148 stl_123 stl_219" style="word-spacing:-0.0145em;">&lt;beans:property name=”key” value=”acegi” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 22.4551em; "><span class="stl_148 stl_123 stl_226">&lt;/beans:bean&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 24.1217em; "><span class="stl_148 stl_123 stl_182">&lt;authenꢁcaꢁon-manager&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 24.9551em; "><span class="stl_148 stl_123 stl_131">&lt;authenꢁcaꢁon-provider&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 25.7884em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0146em;">&lt;user-service id=”userService”&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 26.6217em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.0158em;">&lt;user name=”eparaschiv” password=”eparaschiv” authoriꢁes=”ROLE_ADMIN” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 27.4551em; "><span class="stl_148 stl_123 stl_221" style="word-spacing:-0.0139em;">&lt;user name=”user” password=”user” authoriꢁes=”ROLE_USER” /&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 28.2884em; "><span class="stl_148 stl_123 stl_146">&lt;/user-service&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 29.1217em; "><span class="stl_148 stl_123 stl_204">&lt;/authenꢁcaꢁon-provider&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 29.9551em; "><span class="stl_148 stl_123 stl_175">&lt;/authenꢁcaꢁon-manager&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.5044em; "><a href="https://jira.spring.io/browse/SEC-1860" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">Unfortunately there is no </span></a><a href="https://jira.spring.io/browse/SEC-1860" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:-0.0001em;">support </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">in the security namespace to automatically conﬁgure the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">digest authentication the way basic authentication can be conﬁgured with </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">&lt;http-basic&gt;</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Because of that, the necessary beans had to be deﬁned and wired manually into the security &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.5044em; "><span class="stl_121 stl_120 stl_20">conﬁguration. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.9745em; "><span class="stl_117 stl_08 stl_66" style="word-spacing:0em;">4. Supporting both authentication protocols in the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.1745em; "><span class="stl_117 stl_08 stl_82" style="word-spacing:0.0023em;">same RESTful service &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.9878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Basic or Digest authentication alone can be easily implemented in Spring Security 3.x; it is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.3211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">supporting both of them for the same RESTful web service, on the same URI mappings that &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.6544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">introduces a new level of complexity into the conﬁguration and testing of the service. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8085em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 48 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_49.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_49.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:37.5384em;top: 4.0058em; "><span class="stl_113 stl_08 stl_176" style="word-spacing:-0.0127em;">4.1. Anonymous request &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_37" style="word-spacing:-0.0127em;">4.1. Anonymous request &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.8632em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">With both basic and digest ﬁlters in the security chain, the way a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">anonymous request </span><span class="stl_119 stl_120 stl_19" style="word-spacing:-0.02em;">– a &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">request containing no authentication credentials (</span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">Authorization </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">HTTP header) – is processed &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.5298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">by Spring Security is – the two authentication ﬁlters will ﬁnd </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">no credentials </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and will &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">continue execution of the ﬁlter chain. Then, seeing how the request wasn’t authenticated, &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.2103em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">an </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">AccessDeniedException </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">is thrown and caught in the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">ExceptionTranslationFilter</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, which &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.5436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">commences the digest entry point, prompting the client for credentials. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.3769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The responsibilities of both the basic and digest ﬁlters are very narrow – they will continue &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.7103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to execute the security ﬁlter chain if they are unable to identify the type of authentication &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.0436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">credentials in the request. It is because of this that Spring Security can have the ﬂexibility to be &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.3769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">conﬁgured with support for multiple authentication protocols on the same URI. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">When a request is made containing the correct authentication credentials – either basic or &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.5436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">digest – that protocol will be rightly used. However, for an anonymous request, the client will &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">get prompted only for digest authentication credentials. This is because the digest entry point &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.1965em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is conﬁgured as the main and single entry point of the Spring Security chain; as such </span><span class="stl_162 stl_161 stl_20">digest &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.5298em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">authentication can be considered the default. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.597em; "><span class="stl_117 stl_08 stl_73" style="word-spacing:-0.002em;">4.2. Request with authentication credentials &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.3965em; "><span class="stl_119 stl_120 stl_19" style="word-spacing:-0.02em;">A </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">request with credentials </span><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">for Basic authentication will be identiﬁed by the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">Authorization &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.7436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">header starting with the preﬁx </span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">“Basic”</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. When processing such a request, the credentials will &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.0769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">be decoded in the basic authentication ﬁlter and the request will be authorized. Similarly, &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.4103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">a request with credentials for Digest authentication will use the preﬁx </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0.2899em;">“Digest” </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for it’s &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.7436em; "><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">Authorization </span><span class="stl_121 stl_120 stl_20">header. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.2137em; z-index:1576; "><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.03em;">5. </span><span class="stl_117 stl_08 stl_46">T</span><span class="stl_117 stl_08 stl_19">e</span><span class="stl_117 stl_08 stl_74" style="word-spacing:0.0004em;">sting both scenarios &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.0269em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The tests will consume the REST service by creating a new resource after authenticating with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.3603em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">either basic or digest: &nbsp;</span></div>
					<div class="stl_01" style="left:42.8095em;top: 62.1175em; "><span class="stl_56 stl_08 stl_112" style="word-spacing:0.7255em;">Page 49 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_50.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_50.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:37.2643em;top: 4.0058em; z-index:5; "><span class="stl_113 stl_08 stl_252" style="word-spacing:-0.03em;">5. </span><span class="stl_113 stl_08 stl_253">T</span><span class="stl_113 stl_08 stl_252">e</span><span class="stl_113 stl_08 stl_254" style="word-spacing:0.0004em;">sting both scenarios &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 8.2884em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 9.1217em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.0121em;">public void givenAuthenꢁcatedByBasicAuth_whenAResourceIsCreated_then201IsReceived(){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 9.9551em; "><span class="stl_148 stl_123 stl_256" style="word-spacing:0.016em;">// Given &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 10.7884em; "><span class="stl_148 stl_123 stl_205" style="word-spacing:0.0211em;">// When &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 11.6217em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0124em;">Response response = given() &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 12.4551em; "><span class="stl_148 stl_123 stl_229" style="word-spacing:-0.0122em;">.auth().preempꢁve().basic( ADMIN_USERNAME, ADMIN_PASSWORD ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 13.2884em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.0156em;">.contentType( HꢀpConstants.MIME_JSON ).body( new Foo( randomAlphabeꢁc( 6 ) ) ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 14.1217em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0116em;">.post( paths.getFooURL() ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 15.7884em; "><span class="stl_148 stl_123 stl_257" style="word-spacing:0.0159em;">// Then &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 16.6217em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0134em;">assertThat( response.getStatusCode(), is( 201 ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 17.4551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 18.2884em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 19.1217em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.0122em;">public void givenAuthenꢁcatedByDigestAuth_whenAResourceIsCreated_then201IsReceived(){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 19.9551em; "><span class="stl_148 stl_123 stl_256" style="word-spacing:0.016em;">// Given &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 20.7884em; "><span class="stl_148 stl_123 stl_205" style="word-spacing:0.0211em;">// When &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 21.6217em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0124em;">Response response = given() &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 22.4551em; "><span class="stl_148 stl_123 stl_153" style="word-spacing:-0.0125em;">.auth().digest( ADMIN_USERNAME, ADMIN_PASSWORD ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 23.2884em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.0156em;">.contentType( HꢀpConstants.MIME_JSON ).body( new Foo( randomAlphabeꢁc( 6 ) ) ) &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 24.1217em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0116em;">.post( paths.getFooURL() ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 25.7884em; "><span class="stl_148 stl_123 stl_257" style="word-spacing:0.0159em;">// Then &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 26.6217em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0134em;">assertThat( response.getStatusCode(), is( 201 ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 27.4551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.4073em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Note </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">that the test using basic authentication adds credentials to the request preemptively, &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.7544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">regardless if the server has challenged for authentication or not. This is to ensure that the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.0878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">server doesn’t need to challenge the client for credentials, because if it did, the challenge &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.4211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">would be for Digest credentials, since that is the default. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 44.7245em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">6. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 48.5378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This section covered the conﬁguration and implementation of &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 49.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">both Basic and Digest authentication for a RESTful service, &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 51.2044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">using mostly Spring Security 3.0 namespace support as well &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 52.5378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">as some new features added by Spring Security 3.1. &nbsp;</span></div>
					<div class="stl_01" style="left:16.1671em;top: 55.3711em; "><a href="https://github.com/eugenp/REST#readme" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">For the full implementation, check out the </span></a><a href="https://github.com/eugenp/REST#readme" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:-0.0001em;">github </span></a><a href="https://github.com/eugenp/REST#readme" target="_blank"><span class="stl_121 stl_120 stl_20">project. &nbsp;</span></a></div>
					<div class="stl_01" style="left:42.8377em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 50 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_51.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_51.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_52.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_52.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; z-index:89; "><span class="stl_115 stl_12 stl_259" style="word-spacing:-0.0002em;">7: HTTP MESSAGE &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.25em; "><span class="stl_115 stl_12 stl_260" style="word-spacing:-0.0012em;">CONVERTERS WITH THE &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13em; z-index:121; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0011em;">SPRING FRAMEWORK &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.8776em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.6771em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">This section describes </span><span class="stl_170 stl_161 stl_20" style="word-spacing:0em;">how to Conﬁgure </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">HttpMessageConverter </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">in Spring. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.5242em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Simply put, message converters are used to marshall and unmarshall Java Objects to and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.8575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">from JSON, XML, etc – over HTTP. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.3276em; "><span class="stl_117 stl_08 stl_75" style="word-spacing:-0.0145em;">2. The Basics &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.3609em; "><span class="stl_117 stl_08 stl_77" style="word-spacing:0.0043em;">2.1. Enable Web MVC &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.1604em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The Web Application needs to be </span><span class="stl_170 stl_161 stl_20" style="word-spacing:0em;">conﬁgured with Spring MVC support </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– one convenient and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.5075em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">very customizable way to do this is to use the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@EnableWebMvc </span><span class="stl_121 stl_120 stl_20">annotation: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 49.2915em; "><span class="stl_148 stl_123 stl_78">@EnableWebMvc &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 50.1248em; "><span class="stl_148 stl_123 stl_134">@Conﬁguraꢁon &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 50.9582em; "><span class="stl_148 stl_123 stl_142" style="word-spacing:-0.0075em;">@ComponentScan({ “org.baeldung.web” }) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 51.7915em; "><span class="stl_148 stl_123 stl_153" style="word-spacing:-0.0123em;">public class WebConﬁg extends WebMvcConﬁgurerAdapter { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 52.6248em; "><span class="stl_148 stl_123 stl_261">... &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 53.4582em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:42.8386em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 52 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_53.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_53.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:33.141em;top: 4.0058em; "><span class="stl_113 stl_08 stl_245" style="word-spacing:-0.0045em;">2.2. The Default Message Converters &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 8.7407em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Note </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">that this class extends WebMvcConﬁgurerAdapter – which will allow us to change the &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 10.0878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">default list of Http Converters with our own. &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 15.5578em; "><span class="stl_117 stl_08 stl_70" style="word-spacing:-0.0044em;">2.2. The Default Message Converters &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 19.3711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">By default, the following </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">HttpMessageConverters </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">instances are pre-enabled: &nbsp;</span></div>
					<div class="stl_01" style="left:6.488em;top: 22.2044em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.488em;top: 23.6211em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.488em;top: 25.0377em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.988em;top: 22.2044em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">ByteArrayHttpMessageConverter </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– converts byte arrays &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 23.6211em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">StringHttpMessageConverter </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– converts Strings &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 25.0377em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">ResourceHttpMessageConverter </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– converts </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">org.springframework.core.io.Resource &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 26.3711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">for any type of octet stream &nbsp;</span></div>
					<div class="stl_01" style="left:6.488em;top: 27.7877em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.488em;top: 29.2044em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.988em;top: 27.7877em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">SourceHttpMessageConverter </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– converts </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">javax.xml.transform.Source &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 29.2044em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">FormHttpMessageConverter </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– converts form data to/from a </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">MultiValueMap&lt;String, &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 30.5378em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic;">String&gt;</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:6.488em;top: 31.9544em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.488em;top: 34.7044em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.488em;top: 37.4544em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.488em;top: 40.2044em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.488em;top: 42.9544em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.988em;top: 31.9544em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0003em;">Jaxb2RootElementHttpMessageConverter </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– converts Java objects to/from XML &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 33.2878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">(added only if JAXB2 is present on the classpath) &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 34.7044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">MappingJackson2HttpMessageConverter – converts JSON (added only if Jackson 2 &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 36.0378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is present on the classpath) &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 37.4544em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0003em;">MappingJacksonHttpMessageConverter </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– converts JSON (added only if Jackson is &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 38.7878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">present on the classpath) &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 40.2044em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">AtomFeedHttpMessageConverter </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– converts Atom feeds (added only if Rome is &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 41.5378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">present on the classpath) &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 42.9544em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">RssChannelHttpMessageConverter </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– converts RSS feeds </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">(added only if Rome is &nbsp;</span></div>
					<div class="stl_01" style="left:7.988em;top: 44.2878em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">present on the classpath) &nbsp;</span></div>
					<div class="stl_01" style="left:42.8367em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 53 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_54.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_54.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:29.691em;top: 4.0058em; "><span class="stl_113 stl_08 stl_262" style="word-spacing:-0.0092em;">3. Client-Server Communication – JSON only &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_78" style="word-spacing:-0.0092em;">3. Client-Server Communication – JSON only &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.097em; "><span class="stl_117 stl_08 stl_29" style="word-spacing:0.0048em;">3.1. High Level Content Negotiation &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.9103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Each </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">HttpMessageConverter </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">implementation has one or several associated MIME Types. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.7298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">When receiving a new request, Spring will </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">use of the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">“Accept” </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">header to determine the media &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.0632em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">type </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">that it needs to respond with. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.9103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">It will then try to ﬁnd a registered converter that is capable of handling that speciﬁc media &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.2298em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">type – and it will use it to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">convert the entity </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and send back the response. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.0769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The process is similar for receiving a request which contains JSON information – the framework &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.3965em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">will </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0.29em;">use the</span><span class="stl_162 stl_161 stl_19" style="word-spacing:-0.0101em;">&nbsp;</span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“Content-Type” </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">header to determine the media </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">type of the request body. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.2298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">It will then search for a </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">HttpMessageConverter </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">that can </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">convert the body </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">sent by the client to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.5769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">a Java Object. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.3965em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s clarify this with a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">quick example: &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 38.2436em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 38.2298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the Client sends a GET request to </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">/foos </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">with the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Accept </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">header set to </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">application/json &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 39.5769em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– to get all </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Foo </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">resources as Json &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 40.9936em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 42.4103em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 40.9936em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the Foo Spring Controller is hit and returns the corresponding Foo Java entities &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 42.4103em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">Spring then uses one of the Jackson message converters to marshall the entities to &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 43.7436em; "><span class="stl_119 stl_120 stl_20">json &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.5769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s now look at the speciﬁcs of how this works – and how we should leverage the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">@ &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.9103em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">ResponseBody </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@RequestBody </span><span class="stl_121 stl_120 stl_20">annotations. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.9637em; "><span class="stl_117 stl_08 stl_19" style="word-spacing:0em;">3.2. </span><span class="stl_117 stl_08 stl_29" style="font-style:italic;">@ResponseBody &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.7632em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ResponseBody </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">on a Controller method indicates to Spring that </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the return value of the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.0965em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">method is serialized directly to the body of the HTTP Response</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. As discussed above, the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.4436em; "><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“Accept” </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">header speciﬁed by the Client will be used to choose the appropriate Http Converter &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 59.7769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to marshall the entity. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8226em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 54 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_55.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_55.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:39.5476em;top: 4.0058em; "><span class="stl_113 stl_08 stl_263" style="word-spacing:0.0041em;">3.3. @RequestBody &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s look at a simple example: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.1217em; "><span class="stl_148 stl_123 stl_207" style="word-spacing:-0.0046em;">@RequestMapping(method=RequestMethod.GET, value=”/foos/{id}”) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.9551em; "><span class="stl_148 stl_123 stl_145" style="word-spacing:-0.0066em;">public @ResponseBody Foo ﬁndById(@PathVariable long id) { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 12.7884em; "><span class="stl_148 stl_123 stl_229" style="word-spacing:-0.0126em;">return fooService.get(id); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 13.6217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.1573em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Now, the client will specify the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">“Accept” </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">header to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">application/json </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">in the request – example &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.5044em; "><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">curl </span><span class="stl_121 stl_120 stl_20">command: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 22.2884em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.0108em;">curl --header “Accept: applicaꢁon/json” hꢀp://localhost:8080/spring-rest/foos/1 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.8378em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Foo </span><span class="stl_121 stl_120 stl_20">class: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 29.6217em; "><span class="stl_148 stl_123 stl_133" style="word-spacing:-0.0146em;">public class Foo { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 30.4551em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0104em;">private long id; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 31.2884em; "><span class="stl_148 stl_123 stl_241" style="word-spacing:-0.0085em;">private String name; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 32.1217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">And the Http Response Body: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 38.0384em; "><span class="stl_148 stl_123 stl_19">{</span></div>
					<div class="stl_01" style="left:5.678em;top: 38.8717em; "><span class="stl_148 stl_123 stl_264" style="word-spacing:0.009em;">“id”: 1, &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 39.7051em; z-index:535; "><span class="stl_148 stl_123 stl_218" style="word-spacing:0.0105em;">“name”: “Paul”, &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 40.5384em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.3078em; "><span class="stl_117 stl_08 stl_79" style="word-spacing:0.0041em;">3.3. @RequestBody &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.1073em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@RequestBody </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is used on the argument of a Controller method – it indicates to Spring </span><span class="stl_162 stl_161 stl_20">that &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.4407em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the body of the HTTP Request is deserialized to that particular Java entity</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. As discussed &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.7878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">previously, the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“Content-Type” </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">header speciﬁed by the Client will be used to determine the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">appropriate converter for this. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8362em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 55 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_56.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_56.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:24.8527em;top: 4.0058em; "><span class="stl_113 stl_08 stl_263" style="word-spacing:-0.0014em;">4. Custom Converters Configuration – adding XML Support &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.324em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s look at </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">an example</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.1217em; "><span class="stl_148 stl_123 stl_214" style="word-spacing:-0.0047em;">@RequestMapping(method=RequestMethod.PUT, value=”/foos/{id}”) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.9551em; "><span class="stl_148 stl_123 stl_226" style="word-spacing:-0.0076em;">public @ResponseBody void updateFoo(@RequestBody Foo foo, @PathVariable String id) { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 12.7884em; "><span class="stl_148 stl_123 stl_138">fooService.update(foo); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 13.6217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.1573em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Now, let’s consume this with a JSON object – we’re specifying </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">“Content-Type” </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">to be &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.5044em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic;">application/json</span><span class="stl_121 stl_120 stl_20">: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 22.2884em; "><span class="stl_148 stl_123 stl_265" style="word-spacing:-0.0066em;">curl -i -X PUT -H “Content-Type: applicaꢁon/json” \ &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 23.1217em; "><span class="stl_148 stl_123 stl_178" style="word-spacing:-0.0021em;">-d ‘{“id”:”83”,”name”:”klik”}’ hꢀp://localhost:8080/spring-rest/foos/1 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We get back a 200 OK – a successful response: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 30.4551em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.009em;">HTTP/1.1 200 OK &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 31.2884em; "><span class="stl_148 stl_123 stl_202" style="word-spacing:-0.0148em;">Server: Apache-Coyote/1.1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 32.1217em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0103em;">Content-Length: 0 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 32.9551em; "><span class="stl_148 stl_123 stl_31" style="word-spacing:0.0022em;">Date: Fri, 10 Jan 2014 11:18:54 GMT &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.1412em; "><span class="stl_117 stl_08 stl_63" style="word-spacing:0.0027em;">4. Custom Converters Configuration – adding XML &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.3412em; "><span class="stl_117 stl_08 stl_39">Support &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.1407em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">We can </span><span class="stl_170 stl_161 stl_20" style="word-spacing:0em;">customize the message converters by extending the WebMvcConﬁgurerAdapter &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.474em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">class </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and overriding the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">conﬁgureMessageConverters </span><span class="stl_121 stl_120 stl_20">method: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 48.8551em; "><span class="stl_148 stl_123 stl_78">@EnableWebMvc &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 49.6884em; "><span class="stl_148 stl_123 stl_134">@Conﬁguraꢁon &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 50.5217em; "><span class="stl_148 stl_123 stl_142" style="word-spacing:-0.0075em;">@ComponentScan({ “org.baeldung.web” }) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 51.3551em; "><span class="stl_148 stl_123 stl_153" style="word-spacing:-0.0123em;">public class WebConﬁg extends WebMvcConﬁgurerAdapter { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 53.0217em; "><span class="stl_148 stl_123 stl_133">@Override &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 53.8551em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0116em;">public void conﬁgureMessageConverters(List&lt;HꢀpMessageConverter&lt;?&gt;&gt; converters) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 54.6884em; "><span class="stl_148 stl_123 stl_211">messageConverters.add(createXmlHꢀpMessageConverter()); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 55.5217em; "><span class="stl_148 stl_123 stl_133" style="word-spacing:-0.0142em;">messageConverters.add(new MappingJackson2HꢀpMessageConverter()); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 57.1884em; "><span class="stl_148 stl_123 stl_236">super.conﬁgureMessageConverters(converters); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 58.0217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:42.8231em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 56 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_57.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_57.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:24.8527em;top: 4.0058em; "><span class="stl_113 stl_08 stl_263" style="word-spacing:-0.0014em;">4. Custom Converters Configuration – adding XML Support &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 7.3484em; "><span class="stl_148 stl_123 stl_165" style="word-spacing:-0.0165em;">private HꢀpMessageConverter&lt;Object&gt; createXmlHꢀpMessageConverter() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 8.1817em; "><span class="stl_148 stl_123 stl_174" style="word-spacing:-0.0156em;">MarshallingHꢀpMessageConverter xmlConverter = &nbsp;</span></div>
					<div class="stl_01" style="left:6.695em;top: 9.0151em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.0132em;">new MarshallingHꢀpMessageConverter(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 10.6817em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0115em;">XStreamMarshaller xstreamMarshaller = new XStreamMarshaller(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.3605em;top: 11.5151em; "><span class="stl_148 stl_123 stl_157">xmlConverter.setMarshaller(xstreamMarshaller); &nbsp;</span></div>
					<div class="stl_01" style="left:6.3605em;top: 12.3484em; "><span class="stl_148 stl_123 stl_236">xmlConverter.setUnmarshaller(xstreamMarshaller); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 14.0151em; "><span class="stl_148 stl_123 stl_134" style="word-spacing:-0.0164em;">return xmlConverter; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 14.8484em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 15.6817em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.634em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Note </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">that </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the XStream library now needs to be present on the classpath</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.884em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Also be aware that by extending this support class, </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">we are losing the default message &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.2173em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">converters which were previously pre-registered </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– we only have what we deﬁne. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.0644em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s go over this example – we are creating a new converter – the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.3978em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">MarshallingHttpMessageConverter </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– and we’re using the Spring XStream support to conﬁgure &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.7173em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">it. This allows a great deal of ﬂexibility since </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">we’re working with the low level APIs of the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.0507em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">underlying marshalling framework </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– in this case XStream – and we can conﬁgure that however &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.3978em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">we want. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.2311em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We can of course now do the same for Jackson – by deﬁning our own &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.5644em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0003em;">MappingJackson2HttpMessageConverter </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">we can now set a custom </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">ObjectMapper </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">on this &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.8978em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">converter and have it conﬁgured as we need to. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.7311em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In this case XStream was the selected marshaller/unmarshaller implementation, but others like &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.0644em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">CastorMarshaller </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">can be used to – refer to Spring api documentation for full list of available &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.3978em; "><span class="stl_121 stl_120 stl_20">marshallers. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.2311em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">At this point – with XML enabled on the back end – we can consume the API with XML &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.5644em; "><span class="stl_121 stl_120 stl_20">Representations: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 53.3484em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.011em;">curl --header “Accept: applicaꢁon/xml” hꢀp://localhost:8080/spring-rest/foos/1 &nbsp;</span></div>
					<div class="stl_01" style="left:42.8697em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 57 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_58.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_58.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:23.9453em;top: 4.0058em; z-index:24; "><span class="stl_113 stl_08 stl_229" style="word-spacing:0.0179em;">5. Using Spring’s Rest</span><span class="stl_113 stl_08 stl_253">T</span><span class="stl_113 stl_08 stl_252">e</span><span class="stl_113 stl_08 stl_216" style="word-spacing:-0.0039em;">mplate with Http Message Converters &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_80" style="word-spacing:0.0061em;">5. Using Spring’s </span><span class="stl_117 stl_08 stl_81" style="font-style:italic; word-spacing:0.0175em;">RestTemplate </span><span class="stl_117 stl_08 stl_60" style="word-spacing:-0.0007em;">with Http Message &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.2637em; "><span class="stl_117 stl_08 stl_80">Converters &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.0769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">As well as with the server side, Http Message Conversion can be conﬁgured in the client side &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.4103em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">on the Spring </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">RestTemplate</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.2436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We’re going to conﬁgure the template with the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“Accept” </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“Content-Type” </span><span class="stl_119 stl_120 stl_20">headers &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.5769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">when appropriate and we’re going to try to consume the REST API with full marshalling and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.9103em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">unmarshalling of the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Foo </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Resource – both with JSON and with XML. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.9637em; "><span class="stl_117 stl_08 stl_53" style="word-spacing:-0.0047em;">5.1. Retrieving the Resource with no Accept Header &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 28.7276em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 29.5609em; "><span class="stl_148 stl_123 stl_221" style="word-spacing:-0.0139em;">public void testGetFoo() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 30.3942em; z-index:614; "><span class="stl_148 stl_123 stl_214" style="word-spacing:-0.0061em;">String URI = “hꢀp://localhost:8080/spring-rest/foos/{id}”; &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 31.2276em; "><span class="stl_148 stl_123 stl_78" style="word-spacing:0.0007em;">RestTemplate restTemplate = new RestTemplate(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 32.0609em; "><span class="stl_148 stl_123 stl_207" style="word-spacing:-0.0061em;">Foo foo = restTemplate.getForObject(URI, Foo.class, “1”); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 32.8942em; "><span class="stl_148 stl_123 stl_155" style="word-spacing:-0.0077em;">Assert.assertEquals(new Integer(1), foo.getId()); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 33.7276em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.497em; "><span class="stl_117 stl_08 stl_64" style="word-spacing:0.0008em;">5.2. Retrieving a Resource with </span><span class="stl_117 stl_08 stl_31" style="font-style:italic;">application/xml &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.697em; "><span class="stl_117 stl_08 stl_44" style="word-spacing:0.0056em;">Accept header &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.5103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s now explicitly retrieve the Resource as an XML Representation – we’re going to deﬁne &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.8436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">a set of Converters – same way we did previously – and we’re going to set these on the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.1769em; "><span class="stl_121 stl_120 stl_20">RestTemplate. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8221em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 58 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_59.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_59.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:23.2686em;top: 4.0058em; "><span class="stl_113 stl_08 stl_227" style="word-spacing:-0.0043em;">5.3. Retrieving a Resource with application/json Accept header &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Because we’re consuming XML, we’re going to use the same XStream marshaller as before: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 10.5384em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.3717em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.013em;">public void givenConsumingXml_whenReadingTheFoo_thenCorrect() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 12.2051em; z-index:365; "><span class="stl_148 stl_123 stl_142" style="word-spacing:-0.0071em;">String URI = BASE_URI + “foos/{id}”; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 13.0384em; "><span class="stl_148 stl_123 stl_78" style="word-spacing:0.0008em;">RestTemplate restTemplate = new RestTemplate(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 13.8717em; "><span class="stl_148 stl_123 stl_136">restTemplate.setMessageConverters(getMessageConverters()); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 15.5384em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0134em;">HꢀpHeaders headers = new HꢀpHeaders(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 16.3717em; "><span class="stl_148 stl_123 stl_213">headers.setAccept(Arrays.asList(MediaType.APPLICATION_XML)); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 17.2051em; "><span class="stl_148 stl_123 stl_204" style="word-spacing:-0.0156em;">HꢀpEnꢁty&lt;String&gt; enꢁty = new HꢀpEnꢁty&lt;String&gt;(headers); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 18.8717em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0149em;">ResponseEnꢁty&lt;Foo&gt; response = &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 19.7051em; "><span class="stl_148 stl_123 stl_266" style="word-spacing:-0.0023em;">restTemplate.exchange(URI, HꢀpMethod.GET, enꢁty, Foo.class, “1”); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 20.5384em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.013em;">Foo resource = response.getBody(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 22.2051em; "><span class="stl_148 stl_123 stl_226" style="word-spacing:-0.0061em;">assertThat(resource, notNullValue()); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 23.0384em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 23.8717em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.012em;">private List&lt;HꢀpMessageConverter&lt;?&gt;&gt; getMessageConverters() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 24.7051em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0108em;">XStreamMarshaller marshaller = new XStreamMarshaller(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 25.5384em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0146em;">MarshallingHꢀpMessageConverter marshallingConverter = &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 26.3717em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.0107em;">new MarshallingHꢀpMessageConverter(marshaller); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 27.2051em; "><span class="stl_148 stl_123 stl_153">converters.add(marshallingConverter); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 30.2884em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0111em;">List&lt;HꢀpMessageConverter&lt;?&gt;&gt; converters = new ArrayList&lt;HꢀpMessageConverter&lt;?&gt;&gt;(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 31.1217em; "><span class="stl_148 stl_123 stl_143" style="word-spacing:-0.0145em;">return converters; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 31.9551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.7245em; "><span class="stl_117 stl_08 stl_64" style="word-spacing:0.0008em;">5.3. Retrieving a Resource with </span><span class="stl_117 stl_08 stl_72" style="font-style:italic;">application/json &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.9245em; "><span class="stl_117 stl_08 stl_44" style="word-spacing:0.0056em;">Accept header &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.7378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Similarly, let’s now consume the REST API by asking for JSON: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 46.5217em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 47.3551em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0134em;">public void givenConsumingJson_whenReadingTheFoo_thenCorrect() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 48.1884em; z-index:1316; "><span class="stl_148 stl_123 stl_142" style="word-spacing:-0.0071em;">String URI = BASE_URI + “foos/{id}”; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 49.8551em; "><span class="stl_148 stl_123 stl_78" style="word-spacing:0.0008em;">RestTemplate restTemplate = new RestTemplate(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 50.6884em; "><span class="stl_148 stl_123 stl_136">restTemplate.setMessageConverters(getMessageConverters()); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 52.3551em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0134em;">HꢀpHeaders headers = new HꢀpHeaders(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 53.1884em; "><span class="stl_148 stl_123 stl_136">headers.setAccept(Arrays.asList(MediaType.APPLICATION_JSON)); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 54.0217em; "><span class="stl_148 stl_123 stl_204" style="word-spacing:-0.0156em;">HꢀpEnꢁty&lt;String&gt; enꢁty = new HꢀpEnꢁty&lt;String&gt;(headers); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 55.6884em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0149em;">ResponseEnꢁty&lt;Foo&gt; response = &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 56.5217em; "><span class="stl_148 stl_123 stl_266" style="word-spacing:-0.0023em;">restTemplate.exchange(URI, HꢀpMethod.GET, enꢁty, Foo.class, “1”); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 57.3551em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.013em;">Foo resource = response.getBody(); &nbsp;</span></div>
					<div class="stl_01" style="left:42.8231em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 59 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_60.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_60.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:29.416em;top: 4.0058em; "><span class="stl_113 stl_08 stl_167" style="word-spacing:0.0033em;">5.4. Update a Resource with XML Content-Type &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 8.0151em; "><span class="stl_148 stl_123 stl_226" style="word-spacing:-0.0061em;">assertThat(resource, notNullValue()); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 8.8484em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 9.6817em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.012em;">private List&lt;HꢀpMessageConverter&lt;?&gt;&gt; getMessageConverters() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 10.5151em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0111em;">List&lt;HꢀpMessageConverter&lt;?&gt;&gt; converters = new ArrayList&lt;HꢀpMessageConverter&lt;?&gt;&gt;(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 11.3484em; "><span class="stl_148 stl_123 stl_143" style="word-spacing:-0.0139em;">converters.add(new MappingJackson2HꢀpMessageConverter()); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 12.1817em; "><span class="stl_148 stl_123 stl_143" style="word-spacing:-0.0145em;">return converters; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 13.0151em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.7845em; "><span class="stl_117 stl_08 stl_83" style="word-spacing:0.0032em;">5.4. Update a Resource with XML Content-Type &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.5978em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Finally, let’s also send JSON data to the REST API and specify the media type of that data via &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.9311em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">Content-Type </span><span class="stl_121 stl_120 stl_20">header: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 26.7151em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 27.5484em; "><span class="stl_148 stl_123 stl_229" style="word-spacing:-0.0124em;">public void givenConsumingXml_whenWriꢁngTheFoo_thenCorrect() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 28.3817em; z-index:632; "><span class="stl_148 stl_123 stl_142" style="word-spacing:-0.0071em;">String URI = BASE_URI + “foos/{id}”; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 29.2151em; "><span class="stl_148 stl_123 stl_78" style="word-spacing:0.0008em;">RestTemplate restTemplate = new RestTemplate(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 30.0484em; "><span class="stl_148 stl_123 stl_136">restTemplate.setMessageConverters(getMessageConverters()); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 31.7151em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.0089em;">Foo resource = new Foo(4, “jason”); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 32.5484em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0134em;">HꢀpHeaders headers = new HꢀpHeaders(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 33.3817em; "><span class="stl_148 stl_123 stl_136">headers.setAccept(Arrays.asList(MediaType.APPLICATION_JSON)); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 34.2151em; "><span class="stl_148 stl_123 stl_214">headers.setContentType((MediaType.APPLICATION_XML)); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 35.0484em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0126em;">HꢀpEnꢁty&lt;Foo&gt; enꢁty = new HꢀpEnꢁty&lt;Foo&gt;(resource, headers); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 36.7151em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0149em;">ResponseEnꢁty&lt;Foo&gt; response = &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 37.5484em; "><span class="stl_148 stl_123 stl_150" style="word-spacing:-0.0049em;">restTemplate.exchange(URI, HꢀpMethod.PUT, enꢁty, Foo.class, resource.getId()); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 38.3817em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.0129em;">Foo fooResponse = response.getBody(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 40.0484em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.0114em;">Assert.assertEquals(resource.getId(), fooResponse.getId()); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 40.8817em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.4173em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">What’s interesting here is that we’re able to mix the media types – </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">we are sending XML data &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.7507em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">but we’re waiting for JSON data back from the server</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. This shows just how powerful the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.0978em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Spring conversion mechanism really is. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8246em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 60 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_61.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_61.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:29.416em;top: 4.0058em; "><span class="stl_113 stl_08 stl_167" style="word-spacing:0.0033em;">5.4. Update a Resource with XML Content-Type &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 10.1412em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">6. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 12.5377em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In this section, we looked at how Spring MVC allows us to &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 13.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">specify and fully customize Http Message Converters to &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 15.1907em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">automatically marshall/unmarshall Java Entities to and from &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 16.524em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">XML or JSON</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. This is of course a simplistic deﬁnition, and &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 17.8711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">there is so much more that the message conversion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 19.2044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">mechanism can do – as we can see from the last test example. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 22.0377em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">We have also looked at how to leverage the same powerful mechanism with the &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 23.3711em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">RestTemplate </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">client – leading to a fully type-safe way of consuming the API. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 26.2044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This is an Eclipse based project, so it should be easy to import and run as it is. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8911em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 61 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_62.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_62.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_63.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_63.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0004em;">8: REST API DISCOVERABILITY &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.25em; z-index:97; "><span class="stl_115 stl_12 stl_13" style="word-spacing:-0.0002em;">AND HATEOAS &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.9271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The section will focus on </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Discoverability of the REST API, HATEOAS </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and practical scenarios &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.2742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">driven by tests. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.7443em; "><span class="stl_117 stl_08 stl_70" style="word-spacing:-0.0182em;">2. Why make the API Discoverable &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.5438em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">Discoverability </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of an API is a topic that doesn’t get enough well deserved attention, and as a &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.8909em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">consequence very few APIs get it right. It is also something that, if done correctly, can make &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.2242em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the API not only RESTful and usable but also elegant. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.0438em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">To understand </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">discoverability </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">you need to understand that constraint that is Hypermedia &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.3909em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">As The Engine Of Application State (HATEOAS); this constraint of a REST API is about full &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.7242em; "><a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">discoverability of actions/transitions on a Resource from Hyper</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">media (Hypertext really), as &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.0575em; "><a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the </span></a><a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven" target="_blank"><span class="stl_164 stl_120 stl_20" style="word-spacing:0em;">only driver </span></a><a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of application state. &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 45.8771em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">If interaction is to be </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">driven </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">by the API through the conversation itself, concretely via &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.2104em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Hypertext, then there can be </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">no documentation</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, as that would coerce the client to make &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.5575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">assumptions that are in fact outside of the context of the API. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.3771em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">In conclusion, </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the server should be descriptive enough to instruct the client how to use the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.7104em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">API </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">via Hypertext only, which, in the case of a HTTP conversation, may be the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Link </span><span class="stl_121 stl_120 stl_20">header. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8236em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 63 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_64.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_64.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:30.0827em;top: 4.0058em; "><span class="stl_113 stl_08 stl_267" style="word-spacing:-0.0103em;">3. Discoverability Scenarios (Driven by tests) &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_55" style="word-spacing:-0.0103em;">3. Discoverability Scenarios (Driven by tests) &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.8632em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">So what does it mean for a REST service to be </span><a href="https://code.google.com/p/rest-assured/" target="_blank"><span class="stl_162 stl_161 stl_20">discoverable</span></a><a href="https://code.google.com/p/rest-assured/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">? Throughout this section, we will &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 12.2103em; "><a href="https://code.google.com/p/rest-assured/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">test individual traits of discoverability using Junit, </span></a><a href="https://code.google.com/p/rest-assured/" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">rest-assured </span></a><a href="https://code.google.com/p/hamcrest/" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span></a><a href="https://code.google.com/p/hamcrest/" target="_blank"><span class="stl_196 stl_120 stl_20">Hamcrest</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. Since </span><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">the REST &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.5436em; "><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">Service has been previously secured</span><a href="https://gist.github.com/eugenp/1341570" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, each test ﬁrst need to </span></a><a href="https://gist.github.com/eugenp/1341570" target="_blank"><span class="stl_244 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">authenticate </span></a><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">before consuming &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the API. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.9303em; "><span class="stl_117 stl_08 stl_74" style="word-spacing:-0.0189em;">3.1. Discover the valid HTTP methods &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.7298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">When a REST Service is consumed with an </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">invalid HTTP method</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, the response should be a &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.0632em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">405 METHOD NOT ALLOWED</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">; in addition, it should also help the client </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">discover </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the valid &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.3965em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">HTTP methods that are allowed for that particular Resource, using the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Allow </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">HTTP Header in &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.7436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the response: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 30.5276em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 31.3609em; "><span class="stl_148 stl_123 stl_208" style="word-spacing:-0.011em;">public void &nbsp;</span></div>
					<div class="stl_01" style="left:5.1703em;top: 32.1942em; "><span class="stl_148 stl_123 stl_129">whenInvalidPOSTIsSentToValidURIOfResource_thenAllowHeaderListsTheAllowedAcꢁons(){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 33.0276em; "><span class="stl_148 stl_123 stl_256" style="word-spacing:0.016em;">// Given &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 33.8609em; "><span class="stl_148 stl_123 stl_215" style="word-spacing:-0.0101em;">String uriOfExisꢁngResource = restTemplate.createResource(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 35.5276em; "><span class="stl_148 stl_123 stl_205" style="word-spacing:0.0211em;">// When &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 36.3609em; "><span class="stl_148 stl_123 stl_143" style="word-spacing:-0.014em;">Response res = givenAuth().post( uriOfExisꢁngResource ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 38.0276em; "><span class="stl_148 stl_123 stl_257" style="word-spacing:0.0159em;">// Then &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 38.8609em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.0126em;">String allowHeader = res.getHeader( HꢀpHeaders.ALLOW ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 39.6942em; "><span class="stl_148 stl_123 stl_215" style="word-spacing:-0.0102em;">assertThat( allowHeader, AnyOf.&lt;String&gt; anyOf( &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 40.5276em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0113em;">containsString(“GET”), containsString(“PUT”), containsString(“DELETE”) ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 41.3609em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.1303em; "><span class="stl_117 stl_08 stl_51" style="word-spacing:-0.0095em;">3.2. Discover the URI of newly created Resource &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.9436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The operation of creating a new Resource should always include the URI of the newly created &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.2632em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">resource in the response, using the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Location </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">HTTP Header. If the client does a GET on that &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.6103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">URI, the resource should be available: &nbsp;</span></div>
					<div class="stl_01" style="left:42.8095em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 64 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_65.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_65.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:26.9111em;top: 4.0058em; "><span class="stl_113 stl_08 stl_186" style="word-spacing:-0.0161em;">3.3. Discover the URI to GET All Resources of that type &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 8.2884em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 9.1217em; "><span class="stl_148 stl_123 stl_181" style="word-spacing:-0.0137em;">public void whenResourceIsCreated_thenUriOfTheNewlyCreatedResourceIsDiscoverable() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 9.9551em; "><span class="stl_148 stl_123 stl_205" style="word-spacing:0.0211em;">// When &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 10.7884em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.008em;">Foo newResource = new Foo(randomAlphabeꢁc(6)); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 11.6217em; "><span class="stl_148 stl_123 stl_124" style="word-spacing:-0.0076em;">Response createResp = givenAuth().contentType(“applicaꢁon/json”) &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 12.4551em; "><span class="stl_148 stl_123 stl_155">.body(unpersistedResource).post(getFooURL()); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 13.2884em; "><span class="stl_148 stl_123 stl_130" style="word-spacing:-0.0111em;">String uriOfNewResource= createResp.getHeader(HꢀpHeaders.LOCATION); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 14.9551em; "><span class="stl_148 stl_123 stl_257" style="word-spacing:0.0159em;">// Then &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 15.7884em; "><span class="stl_148 stl_123 stl_144" style="word-spacing:-0.0101em;">Response response = givenAuth().header(HꢀpHeaders.ACCEPT, “applicaꢁon/json”) &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 16.6217em; "><span class="stl_148 stl_123 stl_226">.get(uriOfNewResource); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 18.2884em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.0108em;">Foo resourceFromServer = response.body().as(Foo.class); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 19.1217em; "><span class="stl_148 stl_123 stl_188" style="word-spacing:-0.0068em;">assertThat(newResource, equalTo(resourceFromServer)); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 19.9551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The test follows a simple scenario: a new </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Foo </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">resource is created and the HTTP response is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.824em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">used to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">discover the URI </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">where the Resource is now accessible. The tests then goes one step &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">further and does a GET on that URI to retrieve the resource and compares it to the original, to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">make sure that it has been correctly persisted. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.5578em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:-0.0159em;">3.3. Discover the URI to GET All Resources of that type &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.3573em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">When we GET any particular </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Foo </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">resource, we should be able to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">discover </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">what we can do &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.7044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">next: we can list all the available </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Foo </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">resources. Thus, the operation of retrieving an resource &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.0378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">should always include in its response the URI where to get all the resources of that type, again &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.3573em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">making use of the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Link </span><span class="stl_121 stl_120 stl_20">header: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 43.1551em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 43.9884em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.0114em;">public void whenResourceIsRetrieved_thenUriToGetAllResourcesIsDiscoverable() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 44.8217em; "><span class="stl_148 stl_123 stl_256" style="word-spacing:0.016em;">// Given &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 45.6551em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0147em;">String uriOfExisꢁngResource = createAsUri(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 47.3217em; "><span class="stl_148 stl_123 stl_205" style="word-spacing:0.0211em;">// When &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 48.1551em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.0106em;">Response getResponse = givenAuth().get(uriOfExisꢁngResource); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 49.8217em; "><span class="stl_148 stl_123 stl_257" style="word-spacing:0.0159em;">// Then &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 50.6551em; "><span class="stl_148 stl_123 stl_221" style="word-spacing:-0.0136em;">String uriToAllResources = HTTPLinkHeaderUꢁl &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 51.4884em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0126em;">.extractURIByRel(getResponse.getHeader(“Link”), “collecꢁon”); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 53.1551em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0079em;">Response getAllResponse = givenAuth().get(uriToAllResources); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 53.9884em; "><span class="stl_148 stl_123 stl_153" style="word-spacing:-0.012em;">assertThat(getAllResponse.getStatusCode(), is(200)); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 54.8217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:42.8231em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 65 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_66.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_66.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:26.2477em;top: 4.0058em; "><span class="stl_113 stl_08 stl_267" style="word-spacing:-0.0002em;">4. Other potential discoverable URIs and microformats &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.7407em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Note </span><a href="https://gist.github.com/eugenp/8269915" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">that the full low level code for extractURIByRel – responsible </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for extracting the URIs by &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0878em; "><a href="https://gist.github.com/eugenp/8269915" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">rel relation is </span></a><a href="https://gist.github.com/eugenp/8269915" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">shown here</span></a><a href="https://gist.github.com/eugenp/8269915" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 14.324em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This test covers the thorny subject of </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Link Relations in REST</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: the URI to retrieve all resources &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.6711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">uses the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">rel=”collection” </span><span class="stl_121 stl_120 stl_20">semantics. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This type of link relation has not yet been standardized, but i</span><a href="http://microformats.org/wiki/existing-rel-values#non_HTML_rel_values" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0003em;">s already </span></a><a href="http://microformats.org/wiki/existing-rel-values#non_HTML_rel_values" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">in use </span></a><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">by several &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">microformats and proposed for standardization. Usage of non-standard link relations opens up &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the discussion about microformats and richer semantics in RESTful web services. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.6412em; "><span class="stl_117 stl_08 stl_37" style="word-spacing:-0.002em;">4. Other potential discoverable URIs and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.8412em; "><span class="stl_117 stl_08 stl_28">microformats &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.6407em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Other URIs could potentially be discovered via the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Link </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">header, but there is only so much &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.9878em; "><a href="http://tools.ietf.org/html/rfc5988#section-6.2.1" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the existing types of link relations allow without moving to a </span></a><a href="http://en.wikipedia.org/wiki/Microformat" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">richer semantic markup such as &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 35.3211em; "><a href="http://tools.ietf.org/html/rfc5988#section-6.2.1" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">deﬁning custom link relations</span></a><a href="http://tools.ietf.org/html/rfc5023" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, the </span></a><a href="http://tools.ietf.org/html/rfc5023" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:-0.0001em;">Atom Publishing Protocol </span></a><a href="http://tools.ietf.org/html/rfc5023" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">or </span></a><a href="http://en.wikipedia.org/wiki/Microformat" target="_blank"><span class="stl_244 stl_120 stl_20">microformats</span></a><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.1407em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">For example the client should be able to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">discover the URI to create new Resources </span><span class="stl_119 stl_120 stl_20">when &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.4878em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">doing a </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">GET </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">on a speciﬁc Resource; unfortunately there is no link relation to model create &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.8211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">semantics. Luckily it is standard practice that the URI for creation is the same as the URI to GET &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.1544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">all resources of that type, with the only difference being the POST HTTP method. Forms can &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.4878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">also be used to achieve this. &nbsp;</span></div>
					<div class="stl_01" style="left:42.81em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 66 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_67.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_67.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:26.2477em;top: 4.0058em; "><span class="stl_113 stl_08 stl_267" style="word-spacing:-0.0002em;">4. Other potential discoverable URIs and microformats &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 9.9745em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">5. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 13.774em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We have seen how a REST API is fully discoverable </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">from the &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 15.1073em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">root </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and with </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">no prior knowledge </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– meaning the client is able &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 16.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to navigate it by doing a GET on the root. Moving forward, all &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 17.7877em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">state changes are driven by the client using the available and &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 19.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">discoverable transitions that the REST API provides in &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 20.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">representations (hence </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Representational State Transfer</span><span class="stl_121 stl_120 stl_20">). &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 23.2877em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This section covered the some of the traits of discoverability in the context of &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 24.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">a REST web service, discussing HTTP method discovery, the relation between &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 25.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">create and get, discovery of the URI to get all resources, etc. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 28.7878em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">The implementation of all these examples and code snippets can be found in </span></a><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_244 stl_120 stl_20">my &nbsp;</span></a></div>
					<div class="stl_01" style="left:7.5em;top: 30.1211em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:-0.0001em;">github project </span></a><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– this is an Eclipse based project, so it should be easy to imp</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">ort and &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 31.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">run as it is. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8566em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 67 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_68.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_68.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_69.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_69.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0006em;">9: HATEOAS FOR A SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.25em; z-index:136; "><span class="stl_115 stl_12 stl_224" style="word-spacing:-0.0005em;">REST SERVICE &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.9271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This section will focus on the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">implementation of discoverability in a Spring REST Service </span><span class="stl_119 stl_120 stl_20">and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.2742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">on satisfying the HATEOAS constraint. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.7443em; "><span class="stl_117 stl_08 stl_70" style="word-spacing:-0.0083em;">2. Decouple Discoverability through events &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.5438em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Discoverability as a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">separate aspect or concern </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">of the web layer should be decoupled from &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.8909em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the controller handling the HTTP request. In order to do so, the Controller will ﬁre off events &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.2242em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for all the actions that require additional manipulation of the HTTP response. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.0575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">First, the events: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 42.8415em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0134em;">public class SingleResourceRetrieved extends ApplicaꢁonEvent { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 43.6748em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.015em;">private HꢀpServletResponse response; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 45.3415em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0114em;">public SingleResourceRetrieved(Object source, &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 46.1748em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0147em;">HꢀpServletResponse response) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 47.0082em; "><span class="stl_148 stl_123 stl_127">super(source); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 48.6748em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0115em;">this.response = response; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 49.5082em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 51.1748em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0147em;">public HꢀpServletResponse getResponse() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 52.0082em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.0112em;">return response; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 52.8415em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 53.6748em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 54.5082em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.0137em;">public class ResourceCreated extends ApplicaꢁonEvent { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 55.3415em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.015em;">private HꢀpServletResponse response; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 56.1748em; "><span class="stl_148 stl_123 stl_133" style="word-spacing:-0.0141em;">private long idOfNewResource; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 57.8415em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0115em;">public ResourceCreated(Object source, &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 58.6748em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0147em;">HꢀpServletResponse response, long idOfNewResource) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 59.5082em; "><span class="stl_148 stl_123 stl_127">super(source); &nbsp;</span></div>
					<div class="stl_01" style="left:42.81em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 69 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_70.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_70.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:30.6377em;top: 4.0058em; "><span class="stl_113 stl_08 stl_245" style="word-spacing:-0.0082em;">2. Decouple Discoverability through events &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 8.0151em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0115em;">this.response = response; &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 8.8484em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0146em;">this.idOfNewResource = idOfNewResource; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 9.6817em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 11.3484em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0147em;">public HꢀpServletResponse getResponse() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 12.1817em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.0112em;">return response; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 13.0151em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 13.8484em; "><span class="stl_148 stl_123 stl_219" style="word-spacing:-0.0142em;">public long getIdOfNewResource() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 14.6817em; "><span class="stl_148 stl_123 stl_221" style="word-spacing:-0.0141em;">return idOfNewResource; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 15.5151em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 16.3484em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.884em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Then, the Controller, with </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">2 simple operations – </span><span class="stl_170 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">ﬁnd by id and create: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 23.6817em; "><span class="stl_206 stl_123 stl_125">@Controller &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 24.5151em; "><span class="stl_148 stl_123 stl_209" style="word-spacing:-0.0035em;">@RequestMapping(value = “/foos”) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 25.3484em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0149em;">public class FooController { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 27.0151em; "><span class="stl_148 stl_123 stl_89">@Autowired &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 27.8484em; "><span class="stl_148 stl_123 stl_215" style="word-spacing:-0.0099em;">private ApplicaꢁonEventPublisher eventPublisher; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 29.5151em; "><span class="stl_148 stl_123 stl_89">@Autowired &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 30.3484em; "><span class="stl_148 stl_123 stl_177" style="word-spacing:-0.019em;">private IFooService service; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 32.0151em; "><span class="stl_148 stl_123 stl_210" style="word-spacing:-0.0083em;">@RequestMapping(value = “foos/{id}”, method = RequestMethod.GET) &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 32.8484em; "><span class="stl_148 stl_123 stl_153">@ResponseBody &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 33.6817em; "><span class="stl_148 stl_123 stl_149" style="word-spacing:-0.0098em;">public Foo ﬁndById(@PathVariable(“id”) Long id, HꢀpServletResponse response) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 34.5151em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.0111em;">Foo resourceById = Precondiꢁons.checkNotNull(service.ﬁndOne(id)); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 36.1817em; "><span class="stl_148 stl_123 stl_209" style="word-spacing:-0.0043em;">eventPublisher.publishEvent(new SingleResourceRetrieved(this, response)); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 37.0151em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0115em;">return resourceById; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 37.8484em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 39.5151em; "><span class="stl_148 stl_123 stl_208" style="word-spacing:-0.0122em;">@RequestMapping(method = RequestMethod.POST) &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 40.3484em; "><span class="stl_148 stl_123 stl_268">@ResponseStatus(HꢀpStatus.CREATED) &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 41.1817em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0113em;">public void create(@RequestBody Foo resource, HꢀpServletResponse response) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 42.0151em; "><span class="stl_148 stl_123 stl_138">Precondiꢁons.checkNotNull(resource); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 42.8484em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.0092em;">Long newId = service.create(resource).getId(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 44.5151em; "><span class="stl_148 stl_123 stl_269" style="word-spacing:-0.0038em;">eventPublisher.publishEvent(new ResourceCreated(this, response, newId)); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 45.3484em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 46.1817em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.7173em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">These events can then be handled by any number of </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">decoupled listeners</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, each focusing on &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.0644em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">it’s own particular case and each moving towards satisfying the overall HATEOAS constraint. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.8978em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The listeners should be the last objects in the call stack and no direct access to them is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.2311em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">necessary; as such they are not public. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8712em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 70 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_71.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_71.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:25.1061em;top: 4.0058em; "><span class="stl_113 stl_08 stl_240" style="word-spacing:-0.0029em;">3. Make the URI of a newly created Resource discoverable &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_53" style="word-spacing:-0.0025em;">3. Make the URI of a newly created Resource &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.2637em; "><span class="stl_117 stl_08 stl_270">discoverable &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.0769em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">As discussed in the </span><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">previous section on HATEOAS</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, the operation of creating a new Resource &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.3965em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">should return the URI of that resource in the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Location </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">HTTP header of the response; this is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.7436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">handled by a listener: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 19.5276em; "><span class="stl_206 stl_123 stl_175">@Component &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 20.3609em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0132em;">class ResourceCreatedDiscoverabilityListener &nbsp;</span></div>
					<div class="stl_01" style="left:5.339em;top: 21.1942em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0151em;">implements ApplicaꢁonListener&lt; ResourceCreated &gt;{ &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 22.8609em; "><span class="stl_148 stl_123 stl_133">@Override &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 23.6942em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0117em;">public void onApplicaꢁonEvent( ResourceCreated resourceCreatedEvent ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 24.5276em; "><span class="stl_148 stl_123 stl_130" style="word-spacing:-0.0114em;">Precondiꢁons.checkNotNull( resourceCreatedEvent ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 26.1942em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0128em;">HꢀpServletResponse response = resourceCreatedEvent.getResponse(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 27.0276em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.0132em;">long idOfNewResource = resourceCreatedEvent.getIdOfNewResource(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 28.6942em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0136em;">addLinkHeaderOnResourceCreaꢁon( response, idOfNewResource ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 29.5276em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.5085em;top: 30.3609em; "><span class="stl_148 stl_123 stl_219" style="word-spacing:-0.0146em;">void addLinkHeaderOnResourceCreaꢁon &nbsp;</span></div>
					<div class="stl_01" style="left:5.8475em;top: 31.1942em; "><span class="stl_148 stl_123 stl_167" style="word-spacing:-0.0161em;">( HꢀpServletResponse response, long idOfNewResource ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 32.0276em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0119em;">URI uri = ServletUriComponentsBuilder.fromCurrentRequestUri(). &nbsp;</span></div>
					<div class="stl_01" style="left:6.5255em;top: 32.8609em; "><span class="stl_148 stl_123 stl_265">path(“/{idOfNewResource}”).buildAndExpand(idOfNewResource).toUri(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.1865em;top: 33.6942em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0107em;">response.setHeader( “Locaꢁon”, uri.toASCIIString() ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 34.5276em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 35.3609em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.9103em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">We are now making use of the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">ServletUriComponentsBuilder </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– this was introduced in Spring 3.1 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.2298em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">help with using the current Request</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. This way, we don’t need to pass anything around and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.5769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">we can simply access this statically. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.4103em; "><a href="https://jira.spring.io/browse/SPR-8020" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">If the API would return </span></a><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">ResponseEntity </span><a href="https://jira.spring.io/browse/SPR-8020" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– we could also use the Location support </span></a><a href="https://jira.spring.io/browse/SPR-8020" target="_blank"><span class="stl_244 stl_120 stl_20">introduced &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 45.7436em; "><a href="https://jira.spring.io/browse/SPR-8020" target="_blank"><span class="stl_244 stl_120 stl_20">here</span></a><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.2137em; "><span class="stl_117 stl_08 stl_44" style="word-spacing:0em;">4. Get of single Resource &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.0269em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">On retrieving a single Resource, the client should be able to discover the URI to get all &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.3603em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Resources of that particular type: &nbsp;</span></div>
					<div class="stl_01" style="left:42.9377em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 71 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_72.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_72.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:36.0185em;top: 4.0058em; "><span class="stl_113 stl_08 stl_233" style="word-spacing:-0.0065em;">5. Discoverability at the Root &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 8.2884em; "><span class="stl_206 stl_123 stl_175">@Component &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 9.1217em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0131em;">class SingleResourceRetrievedDiscoverabilityListener &nbsp;</span></div>
					<div class="stl_01" style="left:5.1695em;top: 9.9551em; "><span class="stl_148 stl_123 stl_133" style="word-spacing:-0.0147em;">implements ApplicaꢁonListener&lt; SingleResourceRetrieved &gt;{ &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 11.6217em; "><span class="stl_148 stl_123 stl_133">@Override &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 12.4551em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0117em;">public void onApplicaꢁonEvent( SingleResourceRetrieved resourceRetrievedEvent ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 13.2884em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0112em;">Precondiꢁons.checkNotNull( resourceRetrievedEvent ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 14.9551em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0128em;">HꢀpServletResponse response = resourceRetrievedEvent.getResponse(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 15.7884em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0129em;">addLinkHeaderOnSingleResourceRetrieval( request, response ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 16.6217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 17.4551em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.015em;">void addLinkHeaderOnSingleResourceRetrieval ( HꢀpServletResponse response ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 18.2884em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.0119em;">String requestURL = ServletUriComponentsBuilder.fromCurrentRequestUri(). &nbsp;</span></div>
					<div class="stl_01" style="left:6.695em;top: 19.1217em; "><span class="stl_148 stl_123 stl_124">build().toUri().toASCIIString(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 19.9551em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0152em;">int posiꢁonOfLastSlash = requestURL.lastIndexOf( “/” ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 20.7884em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.0155em;">String uriForResourceCreaꢁon = requestURL.substring( 0, posiꢁonOfLastSlash ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 22.4551em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0104em;">String linkHeaderValue = LinkUꢁl &nbsp;</span></div>
					<div class="stl_01" style="left:6.695em;top: 23.2884em; "><span class="stl_148 stl_123 stl_229" style="word-spacing:-0.0124em;">.createLinkHeader( uriForResourceCreaꢁon, “collecꢁon” ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 24.1217em; "><span class="stl_148 stl_123 stl_133" style="word-spacing:-0.0142em;">response.addHeader( LINK_HEADER, linkHeaderValue ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 24.9551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 25.7884em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.7407em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Note </span><a href="http://microformats.org/wiki/existing-rel-values#non_HTML_rel_values" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">that the semantics of the link relation make use of the </span></a><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“collection” </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">relation type, speciﬁed &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.0878em; "><a href="http://microformats.org/wiki/existing-rel-values#non_HTML_rel_values" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and used in </span></a><a href="http://microformats.org/wiki/existing-rel-values#non_HTML_rel_values" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">several microformats</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, but not yet standardized. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.324em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Link </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">header is one of the most used HTTP header for the purposes of discoverability. The &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">utility to create this header is simple enough: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 41.4551em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0133em;">public ﬁnal class LinkUꢁl { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 42.2884em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0106em;">public staꢁc String createLinkHeader(ﬁnal String uri, ﬁnal String rel) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 43.1217em; z-index:1306; "><span class="stl_148 stl_123 stl_53" style="word-spacing:0.0056em;">return “&lt;” + uri + “&gt;; rel=\”” + rel + “\””; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 43.9551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 44.7884em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.9745em; "><span class="stl_117 stl_08 stl_29" style="word-spacing:-0.0065em;">5. Discoverability at the Root &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.7878em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The root is the entry point in the entire service – it is what the client comes into contact with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">when consuming the API for the ﬁrst time. If the HATEOAS constraint is to be considered and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.4407em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">implemented throughout, then this is the place to start. The fact that </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">all the main URIs of the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.774em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">system have to be discoverable from the root </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">shouldn’t come as much of a surprise by this &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 60.1211em; "><span class="stl_121 stl_120 stl_20">point. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8722em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 72 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_73.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_73.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:29.5027em;top: 4.0058em; "><span class="stl_113 stl_08 stl_242" style="word-spacing:-0.0023em;">5.1. Discoverability is not about changing URIs &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s now look at the controller for this: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.1217em; "><span class="stl_148 stl_123 stl_226" style="word-spacing:-0.0078em;">@RequestMapping( value = “admin”,method = RequestMethod.GET ) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.9551em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.0134em;">@ResponseStatus( value = HꢀpStatus.NO_CONTENT ) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 12.7884em; "><span class="stl_148 stl_123 stl_204" style="word-spacing:-0.0155em;">public void adminRoot( HꢀpServletRequest request, HꢀpServletResponse response ){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 13.6217em; "><span class="stl_148 stl_123 stl_236" style="word-spacing:-0.0098em;">String rootUri = request.getRequestURL().toString(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 15.2884em; "><span class="stl_148 stl_123 stl_230" style="word-spacing:-0.0056em;">URI fooUri = new UriTemplate( “{rootUri}/{resource}” ).expand( rootUri, “foo” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 16.1217em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0082em;">String linkToFoo = LinkUꢁl.createLinkHeader &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 16.9551em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.0118em;">( fooUri.toASCIIString(), “collecꢁon” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 17.7884em; "><span class="stl_148 stl_123 stl_265" style="word-spacing:-0.0064em;">response.addHeader( “Link”, linkToFoo ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 18.6217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This is of course an illustration of the concept, focusing on a single, sample URI, for Foo &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Resources – a real implementation should add, similarly, URIs for all the Resources published to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the client. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.8912em; "><span class="stl_117 stl_08 stl_82" style="word-spacing:-0.0022em;">5.1. Discoverability is not about changing URIs &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.7044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This can be a controversial point – one the one hand, the purpose of HATOAS is to have the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.0378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">client discover the URIs of the API and not rely on hardcoded values. On the other hand – this &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.3711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is not how the web works: yes, URIs are discovered, but they are also bookmarked. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.2044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">A subtle but important distinction is evolution of the API – the old URIs should still work, but &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.5378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">any client that will discover the API should discover the new URIs – which allows the API to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">change dynamically, and good clients to work well even when the API changes. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.7044em; "><a href="http://www.w3.org/Provider/Style/URI.html" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In conclusion – just because all URIs of the RESTful web servic</span></a><a href="http://www.w3.org/TR/cooluris/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0002em;">e should be considered </span></a><a href="http://www.w3.org/TR/cooluris/" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">cool URIs &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 45.0378em; "><a href="http://www.w3.org/Provider/Style/URI.html" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">(and cool URIs </span></a><a href="http://www.w3.org/Provider/Style/URI.html" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">don’t change</span></a><a href="http://www.w3.org/Provider/Style/URI.html" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">) – that doesn’t mean that adhering to the HATEOAS constraint &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 46.3711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">isn’t extremely useful when evolving the API. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.8412em; "><span class="stl_117 stl_08 stl_66" style="word-spacing:-0.0042em;">6. Caveats of Discoverability &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.6544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">As some of the discussions around the previous articles state, the ﬁrst goal of discoverability &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.974em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">is to make minimal or no use of </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">documentation </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and have the client learn and understand &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.3211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">how to use the API via the responses it gets. In fact, this shouldn’t be regarded as such a far &nbsp;</span></div>
					<div class="stl_01" style="left:42.8702em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 73 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_74.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_74.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:36.0701em;top: 4.0058em; "><span class="stl_113 stl_08 stl_271" style="word-spacing:-0.0042em;">6. Caveats of Discoverability &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.324em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">fetched ideal – it is how we consume every new web page – </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">without any documentation</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. So, if &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the concept is more problematic in the context of REST, then it must be a matter of technical &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">implementation, not of a question of whether or not it’s possible. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">That being said, technically, we are still far from the a fully working solution – the speciﬁcation &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and framework support are still evolving, and because of that, some compromises may have to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">be made; these are nevertheless compromises and should be regarded as such. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 25.2245em; "><span class="stl_117 stl_08 stl_272" style="word-spacing:0.0112em;">7. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:15.5742em;top: 29.0378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In this section we covered the implementation of some of the &nbsp;</span></div>
					<div class="stl_01" style="left:15.5833em;top: 30.3711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">traits of discoverability in the context of a RESTful Service with &nbsp;</span></div>
					<div class="stl_01" style="left:15.5833em;top: 31.7044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Spring MVC and touched on the concept of discoverability at &nbsp;</span></div>
					<div class="stl_01" style="left:15.5833em;top: 33.0378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the root. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 35.8711em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The implementation of all these examples and code snippets can </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">be found in &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 37.2878em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">my github project </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– this is an Eclipse based project, so it should be easy to import &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 38.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and run as it is. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8746em;top: 62.1175em; "><span class="stl_56 stl_08 stl_273" style="word-spacing:0.7445em;">Page 74 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_75.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_75.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_76.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_76.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0006em;">10: ETAGS FOR REST WITH &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.25em; z-index:93; "><span class="stl_115 stl_12 stl_116">SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.9271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This section will focus on </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">working with ETags in Spring</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, integration testing of the REST API &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.2742em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">and consumption scenarios with </span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">curl</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.7443em; z-index:228; "><span class="stl_117 stl_08 stl_31" style="word-spacing:-0.008em;">2. REST and E</span><span class="stl_117 stl_08 stl_46">T</span><span class="stl_117 stl_08 stl_19">a</span><span class="stl_117 stl_08 stl_19">gs &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.5575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">From the ofﬁcial Spring documentation on ETag support: &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.8075em; "><a href="http://en.wikipedia.org/wiki/HTTP_ETag" target="_blank"><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">An </span></a><a href="http://en.wikipedia.org/wiki/HTTP_ETag" target="_blank"><span class="stl_196 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">ETag </span></a><a href="http://en.wikipedia.org/wiki/HTTP_ETag" target="_blank"><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">(entity tag) is an HTTP response header returned by an HTTP/1.</span></a><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">1 compliant web &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.1409em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">server used to determine change in content at a given URL. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.3771em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">ETags are used for two things – caching and conditional requests. The </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">ETag value can be &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.7104em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">though as a hash </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">computed out of the bytes of the Response body. Because a cryptographic &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.0575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">hash function is likely used, even the smallest modiﬁcation of the body will drastically change &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.3909em; "><a href="http://tools.ietf.org/html/rfc2616#section-13.3.3" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the output and thus the value of the ETag. This is only true fo</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">r strong ETags – the protocol &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.7242em; "><a href="http://tools.ietf.org/html/rfc2616#section-13.3.3" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">does provide a </span></a><a href="http://tools.ietf.org/html/rfc2616#section-13.3.3" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">weak Etag </span></a><a href="http://tools.ietf.org/html/rfc2616#section-13.3.3" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">as well. &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 51.5438em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">Using an </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">If-* </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">header </span><a href="http://tools.ietf.org/html/rfc2616#section-14.26" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">turns a standard GET request into a </span></a><a href="http://tools.ietf.org/html/rfc2616#section-14.24" target="_blank"><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">conditional GET</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. The two </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">If-* &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.8909em; "><a href="http://tools.ietf.org/html/rfc2616#section-14.26" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">headers that are using with ETags are </span></a><a href="http://tools.ietf.org/html/rfc2616#section-14.26" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">“If-None-Match” </span></a><a href="http://tools.ietf.org/html/rfc2616#section-14.26" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span></a><a href="http://tools.ietf.org/html/rfc2616#section-14.24" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">“If-Match” </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– each with it’s own &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.2242em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">semantics as discussed later in this section. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8566em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 76 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_77.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_77.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:30.9452em;top: 4.0058em; "><span class="stl_113 stl_08 stl_274" style="word-spacing:-0.0119em;">3. Client-Server communication with curl &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 8.5578em; "><span class="stl_117 stl_08 stl_23" style="word-spacing:-0.0117em;">3. Client-Server communication with </span><span class="stl_117 stl_08 stl_19" style="font-style:italic;">curl &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 12.3711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">A simple Client-Server communication involving ETags can be broken down into the steps: &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 15.1907em; "><span class="stl_121 stl_120 stl_19" style="word-spacing:-0.02em;">- </span><span class="stl_170 stl_161 stl_20">ﬁrst</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, the Client makes a REST API call – the Response includes the ETag header to be &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 16.5377em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">stored for further use: &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 20.3217em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0083em;">curl -H “Accept: applicaꢁon/json” -i hꢀp://localhost:8080/rest-sec/api/resources/1 &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 23.4051em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.009em;">HTTP/1.1 200 OK &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 24.2384em; "><span class="stl_148 stl_123 stl_195" style="word-spacing:-0.019em;">ETag: “f88dd058fe004909615a64f01be66a7” &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 25.0717em; "><span class="stl_148 stl_123 stl_128" style="word-spacing:-0.0072em;">Content-Type: applicaꢁon/json;charset=UTF-8 &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 25.9051em; "><span class="stl_148 stl_123 stl_243" style="word-spacing:-0.0081em;">Content-Length: 52 &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 29.4407em; "><span class="stl_121 stl_120 stl_19" style="word-spacing:-0.02em;">- </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">next </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">request the Client makes to the REST API includes the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">If-None-Match </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">request header &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 30.7878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">with the ETag value from the previous step; if the Resource has not changed on the Server, &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 32.1073em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">the Response will contain </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">no body </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and a status code of </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">304 – Not Modiﬁed: &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 35.9051em; "><span class="stl_148 stl_123 stl_137" style="word-spacing:-0.0177em;">curl -H “Accept: applicaꢁon/json” -H ‘If-None-Match: “f88dd058fe004909615a64f01be66a7”’ &nbsp;</span></div>
					<div class="stl_01" style="left:5.2416em;top: 36.7384em; "><span class="stl_148 stl_123 stl_265" style="word-spacing:-0.0051em;">-i hꢀp://localhost:8080/rest-sec/api/resources/1 &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 37.5717em; "><span class="stl_206 stl_123 stl_19">?</span></div>
					<div class="stl_01" style="left:5.0714em;top: 40.6551em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.013em;">HTTP/1.1 304 Not Modiﬁed &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 41.4884em; "><span class="stl_148 stl_123 stl_195" style="word-spacing:-0.019em;">ETag: “f88dd058fe004909615a64f01be66a7” &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 45.024em; "><span class="stl_121 stl_120 stl_19" style="word-spacing:-0.02em;">- </span><span class="stl_162 stl_161 stl_20">now</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, before retrieving the Resource again, we will change it by performing an update: &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 48.8217em; "><span class="stl_148 stl_123 stl_238" style="word-spacing:-0.0086em;">curl --user admin@fake.com:adminpass -H “Content-Type: applicaꢁon/json” -i &nbsp;</span></div>
					<div class="stl_01" style="left:5.4104em;top: 49.6551em; "><span class="stl_148 stl_123 stl_266" style="word-spacing:-0.0028em;">-X PUT --data ‘{ “id”:1, “name”:”newRoleName2”, “descripꢁon”:”theNewDescripꢁon” }’ &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 52.7384em; "><span class="stl_148 stl_123 stl_275">hꢀp://localhost:8080/rest-sec/api/resources/1 &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 55.8217em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.009em;">HTTP/1.1 200 OK &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 56.6551em; "><span class="stl_148 stl_123 stl_174" style="word-spacing:-0.0155em;">ETag: “d41d8cd98f00b204e9800998ecf8427e” &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 57.4884em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0103em;">Content-Length: 0 &nbsp;</span></div>
					<div class="stl_01" style="left:42.9033em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 77 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_78.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_78.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:37.2385em;top: 4.0058em; z-index:6; "><span class="stl_113 stl_08 stl_252" style="word-spacing:0em;">4. E</span><span class="stl_113 stl_08 stl_253">T</span><span class="stl_113 stl_08 stl_252">a</span><span class="stl_113 stl_08 stl_276" style="word-spacing:0.0012em;">g support in Spring &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.7407em; "><span class="stl_121 stl_120 stl_19" style="word-spacing:-0.02em;">- </span><span class="stl_170 stl_161 stl_20">ﬁnally</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, we send out the the last request to retrieve the Privilege again; keep in mind that it has &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">been updated since the last time it was retrieved, so the previous ETag value should no longer &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 11.4211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">work – the response will contain the new data and a new ETag which, again, can be stored for &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.7544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">further use: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 16.5384em; "><span class="stl_148 stl_123 stl_191" style="word-spacing:-0.0179em;">curl -H “Accept: applicaꢁon/json” -H ‘If-None-Match: “f88dd058fe004909615a64f01be66a7”’ -i &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 21.0384em; "><span class="stl_148 stl_123 stl_275">hꢀp://localhost:8080/rest-sec/api/resources/1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 24.1217em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.009em;">HTTP/1.1 200 OK &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 24.9551em; "><span class="stl_148 stl_123 stl_219" style="word-spacing:-0.0128em;">ETag: “03cb37ca667706c68c0aad4cb04c3a211” &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 25.7884em; "><span class="stl_148 stl_123 stl_128" style="word-spacing:-0.0072em;">Content-Type: applicaꢁon/json;charset=UTF-8 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 26.6217em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0102em;">Content-Length: 56 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">And there you have it – ETags in the wild and saving bandwidth. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.6412em; z-index:652; "><span class="stl_117 stl_08 stl_19" style="word-spacing:0em;">4. E</span><span class="stl_117 stl_08 stl_46">T</span><span class="stl_117 stl_08 stl_19">a</span><span class="stl_117 stl_08 stl_33" style="word-spacing:0.0012em;">g support in Spring &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">On to the Spring support – to use ETag in Spring is extremely easy to set up and completely &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.774em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">transparent </span><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">for the application. The support is enabled by adding a simple </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">Filter </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">in the web. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.1211em; "><span class="stl_121 stl_120 stl_20">xml: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 45.9051em; "><span class="stl_148 stl_123 stl_225">&lt;ﬁlter&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 46.7384em; "><span class="stl_148 stl_123 stl_130">&lt;ﬁlter-name&gt;etagFilter&lt;/ﬁlter-name&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 47.5717em; "><span class="stl_148 stl_123 stl_129">&lt;ﬁlter-class&gt;org.springframework.web.ﬁlter.ShallowEtagHeaderFilter&lt;/ﬁlter-class&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 48.4051em; "><span class="stl_148 stl_123 stl_185">&lt;/ﬁlter&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 49.2384em; "><span class="stl_148 stl_123 stl_221">&lt;ﬁlter-mapping&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 50.0717em; "><span class="stl_148 stl_123 stl_130">&lt;ﬁlter-name&gt;etagFilter&lt;/ﬁlter-name&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 50.9051em; "><span class="stl_148 stl_123 stl_275">&lt;url-paꢀern&gt;/api/*&lt;/url-paꢀern&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 51.7384em; "><span class="stl_148 stl_123 stl_166">&lt;/ﬁlter-mapping&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.2878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The ﬁlter is mapped on the same URI pattern as the RESTful API itself. The ﬁlter itself is the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">standard implementation of ETag functionality since Spring 3.0. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 59.4407em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">The implementation is a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">shallow </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">one – the ETag is calculated based on the response, which &nbsp;</span></div>
					<div class="stl_01" style="left:42.8556em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 78 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_79.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_79.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:40.7617em;top: 4.0058em; z-index:14; "><span class="stl_113 stl_08 stl_252" style="word-spacing:-0.03em;">5. </span><span class="stl_113 stl_08 stl_253">T</span><span class="stl_113 stl_08 stl_252">e</span><span class="stl_113 stl_08 stl_252" style="word-spacing:0em;">sting E</span><span class="stl_113 stl_08 stl_277">T</span><span class="stl_113 stl_08 stl_252">a</span><span class="stl_113 stl_08 stl_252">gs &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.324em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">will </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">save bandwidth </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">but </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">not server performance</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. So, a request that will beneﬁt from the ETag &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">support will still be processed as a standard request, consume any resource that it would &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">normally consume (database connections, etc) and only before having it’s response returned &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 11.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">back to the client will the ETag support kick in. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">At that point the ETag will be calculated out of the Response body and set on the Resource &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">itself; also, if the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">If-None-Match </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">header was set on the Request, it will be handled as well. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.324em; "><span class="stl_119 stl_120 stl_19" style="word-spacing:-0.02em;">A </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">deeper implementation </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of the ETag mechanism could potentially provide much greater &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">beneﬁts – such as serving some requests from the cache and not having to perform the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">computation at all – but the implementation would most deﬁnitely not be as simple, nor as &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">pluggable as the shallow approach described here. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.8078em; z-index:798; "><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.03em;">5. </span><span class="stl_117 stl_08 stl_46">T</span><span class="stl_117 stl_08 stl_19">e</span><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.001em;">sting E</span><span class="stl_117 stl_08 stl_46">T</span><span class="stl_117 stl_08 stl_19">a</span><span class="stl_117 stl_08 stl_19">gs &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s start simple – we need to verify that the response of a simple request retrieving a single &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Resource will actually return the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">“ETag” </span><span class="stl_121 stl_120 stl_20">header: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 36.7384em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 37.5717em; "><span class="stl_148 stl_123 stl_221" style="word-spacing:-0.0139em;">public void givenResourceExists_whenRetrievingResource_thenEtagIsAlsoReturned() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 38.4051em; "><span class="stl_148 stl_123 stl_256" style="word-spacing:0.016em;">// Given &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 39.2384em; "><span class="stl_148 stl_123 stl_221" style="word-spacing:-0.0134em;">String uriOfResource = createAsUri(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 40.9051em; "><span class="stl_148 stl_123 stl_205" style="word-spacing:0.0211em;">// When &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 41.7384em; "><span class="stl_148 stl_123 stl_149" style="word-spacing:-0.0096em;">Response ﬁndOneResponse = RestAssured.given().header(“Accept”, “applicaꢁon/json”).get(uriOfResource); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 43.4051em; "><span class="stl_148 stl_123 stl_257" style="word-spacing:0.0159em;">// Then &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 44.2384em; "><span class="stl_148 stl_123 stl_236">assertNotNull(ﬁndOneResponse.getHeader(“ETag”)); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 45.0717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.6073em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Next, we verify the happy path of the ETag behaviour </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– if the Request to retrieve the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">Resource &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.9544em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">from the server uses the correct </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">ETag </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">value, then the Resource is no longer returned. &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 53.7384em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 54.5717em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.0113em;">public void givenResourceWasRetrieved_whenRetrievingAgainWithEtag_thenNotModiﬁedReturned() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 55.4051em; "><span class="stl_148 stl_123 stl_256" style="word-spacing:0.016em;">// Given &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 56.2384em; "><span class="stl_148 stl_123 stl_221" style="word-spacing:-0.0134em;">String uriOfResource = createAsUri(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 57.0717em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0149em;">Response ﬁndOneResponse = RestAssured.given(). &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 57.9051em; "><span class="stl_148 stl_123 stl_275" style="word-spacing:-0.0055em;">header(“Accept”, “applicaꢁon/json”).get(uriOfResource); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 58.7384em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.0089em;">String etagValue = ﬁndOneResponse.getHeader(HꢀpHeaders.ETAG); &nbsp;</span></div>
					<div class="stl_01" style="left:42.8566em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 79 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_80.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_80.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:40.7617em;top: 4.0058em; z-index:14; "><span class="stl_113 stl_08 stl_252" style="word-spacing:-0.03em;">5. </span><span class="stl_113 stl_08 stl_253">T</span><span class="stl_113 stl_08 stl_252">e</span><span class="stl_113 stl_08 stl_252" style="word-spacing:0em;">sting E</span><span class="stl_113 stl_08 stl_277">T</span><span class="stl_113 stl_08 stl_252">a</span><span class="stl_113 stl_08 stl_252">gs &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 8.1817em; "><span class="stl_148 stl_123 stl_205" style="word-spacing:0.0211em;">// When &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 9.0151em; "><span class="stl_148 stl_123 stl_204" style="word-spacing:-0.0154em;">Response secondFindOneResponse= RestAssured.given(). &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 9.8484em; "><span class="stl_148 stl_123 stl_214" style="word-spacing:-0.0057em;">header(“Accept”, “applicaꢁon/json”).headers(“If-None-Match”, etagValue) &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 10.6817em; "><span class="stl_148 stl_123 stl_188">.get(uriOfResource); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 12.3484em; "><span class="stl_148 stl_123 stl_257" style="word-spacing:0.0159em;">// Then &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 13.1817em; "><span class="stl_148 stl_123 stl_153" style="word-spacing:-0.0126em;">assertTrue(secondFindOneResponse.getStatusCode() == 304); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 14.0151em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.5507em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Step by step: &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 20.3978em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 21.8144em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 20.3978em; "><span class="stl_119 stl_120 stl_19" style="word-spacing:-0.02em;">a </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Resource </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is ﬁrst created and then retrieved – the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">ETag </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">value is stored for further use &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 21.8144em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">a new retrieve request is sent, this time with the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“If-None-Match” </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">header specifying the &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 23.1478em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">ETag </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">value previously stored &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 24.5644em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 24.5507em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">on this second request, the server simply returns a </span><span class="stl_170 stl_161 stl_20" style="word-spacing:0em;">304 Not Modiﬁed</span><span class="stl_121 stl_120 stl_20">, since the &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 25.8978em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Resource itself has indeed not beeing modiﬁed between the two retrieval operations &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.7173em; "><span class="stl_162 stl_161 stl_20">Finally</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, we verify the case where the Resource is </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">changed </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">between the ﬁrst and the second &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.0644em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">retrieval requests: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 33.8484em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 34.6817em; "><span class="stl_148 stl_123 stl_208" style="word-spacing:-0.011em;">public void &nbsp;</span></div>
					<div class="stl_01" style="left:5.3398em;top: 35.5151em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.0117em;">givenResourceWasRetrievedThenModiﬁed_whenRetrievingAgainWithEtag_thenResourceIsReturned() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 36.3484em; "><span class="stl_148 stl_123 stl_256" style="word-spacing:0.016em;">// Given &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 37.1817em; "><span class="stl_148 stl_123 stl_221" style="word-spacing:-0.0134em;">String uriOfResource = createAsUri(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 38.0151em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0149em;">Response ﬁndOneResponse = RestAssured.given(). &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 38.8484em; "><span class="stl_148 stl_123 stl_275" style="word-spacing:-0.0055em;">header(“Accept”, “applicaꢁon/json”).get(uriOfResource); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 39.6817em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.0089em;">String etagValue = ﬁndOneResponse.getHeader(HꢀpHeaders.ETAG); &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 41.3484em; "><span class="stl_148 stl_123 stl_236">exisꢁngResource.setName(randomAlphabeꢁc(6)); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 42.1817em; "><span class="stl_148 stl_123 stl_145">update(exisꢁngResource); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 43.8484em; "><span class="stl_148 stl_123 stl_205" style="word-spacing:0.0211em;">// When &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 44.6817em; "><span class="stl_148 stl_123 stl_204" style="word-spacing:-0.0154em;">Response secondFindOneResponse= RestAssured.given(). &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 45.5151em; "><span class="stl_148 stl_123 stl_214" style="word-spacing:-0.0057em;">header(“Accept”, “applicaꢁon/json”).headers(“If-None-Match”, etagValue) &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 46.3484em; "><span class="stl_148 stl_123 stl_188">.get(uriOfResource); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 48.0151em; "><span class="stl_148 stl_123 stl_257" style="word-spacing:0.0159em;">// Then &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 48.8484em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0129em;">assertTrue(secondFindOneResponse.getStatusCode() == 200); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 49.6817em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.2173em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Step by step: &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 56.0644em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 57.4811em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 58.8978em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 56.0644em; "><span class="stl_119 stl_120 stl_19" style="word-spacing:-0.02em;">a </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Resource </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is ﬁrst created and then retrieved – the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">ETag </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">value is stored for further use &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 57.4811em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the same </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Resource </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">is then updated &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 58.8978em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">a new retrieve request is sent, this time with the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“If-None-Match” </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">header specifying the &nbsp;</span></div>
					<div class="stl_01" style="left:42.8236em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 80 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_81.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_81.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:40.6501em;top: 4.0058em; z-index:6; "><span class="stl_113 stl_08 stl_252" style="word-spacing:0em;">6. E</span><span class="stl_113 stl_08 stl_253">T</span><span class="stl_113 stl_08 stl_252">a</span><span class="stl_113 stl_08 stl_247" style="word-spacing:0.0064em;">gs are BIG &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 7.3378em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">ETag </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">value previously stored &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 8.7544em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 8.7407em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">on this second request, the server will returns a </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">200 OK </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">along with the full Resource, &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 10.0878em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">since the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">ETag </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">value is no longer correct, as the Resource has been updated in the &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 11.4211em; "><span class="stl_119 stl_120 stl_20">meantime &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.2407em; "><a href="https://jira.spring.io/browse/SPR-10164" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Finally, the last test – which is </span></a><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">not going to work </span><a href="https://jira.spring.io/browse/SPR-10164" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">because the functionality has </span></a><a href="https://jira.spring.io/browse/SPR-10164" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">not yet been &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 15.5878em; "><a href="https://jira.spring.io/browse/SPR-10164" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:-0.0001em;">implemented in Spring </span></a><a href="https://jira.spring.io/browse/SPR-10164" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– is the support for the </span></a><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">If-Match HTTP header</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 19.3717em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 20.2051em; "><span class="stl_148 stl_123 stl_133" style="word-spacing:-0.0129em;">public void givenResourceExists_whenRetrievedWithIfMatchIncorrectEtag_then412IsReceived() { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 21.0384em; "><span class="stl_148 stl_123 stl_256" style="word-spacing:0.016em;">// Given &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 21.8717em; "><span class="stl_148 stl_123 stl_157" style="word-spacing:-0.0099em;">T exisꢁngResource = getApi().create(createNewEnꢁty()); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 23.5384em; "><span class="stl_148 stl_123 stl_205" style="word-spacing:0.0211em;">// When &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 24.3717em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0107em;">String uriOfResource = baseUri + “/” + exisꢁngResource.getId(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 25.2051em; "><span class="stl_148 stl_123 stl_144" style="word-spacing:-0.0102em;">Response ﬁndOneResponse = RestAssured.given().header(“Accept”, “applicaꢁon/json”). &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 26.0384em; "><span class="stl_148 stl_123 stl_207" style="word-spacing:-0.0055em;">headers(“If-Match”, randomAlphabeꢁc(8)).get(uriOfResource); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 27.7051em; "><span class="stl_148 stl_123 stl_257" style="word-spacing:0.0159em;">// Then &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 28.5384em; "><span class="stl_148 stl_123 stl_236" style="word-spacing:-0.0097em;">assertTrue(ﬁndOneResponse.getStatusCode() == 412); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 29.3717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.9073em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Step by step: &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 35.7544em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 37.1711em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 35.7544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">a Resource is ﬁrst created &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 37.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the Resource is then retrieved with the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“If-Match” </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">header specifying an incorrect ETag &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 38.4907em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">value – this is a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">conditional GET request &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 39.9211em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 39.9073em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the server should return a </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">412 Precondition Failed &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.3912em; z-index:1004; "><span class="stl_117 stl_08 stl_19" style="word-spacing:0em;">6. E</span><span class="stl_117 stl_08 stl_46">T</span><span class="stl_117 stl_08 stl_19">a</span><span class="stl_117 stl_08 stl_28" style="word-spacing:0.0064em;">gs are BIG &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.1907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We have only used ETags for </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">read operations </span><a href="http://greenbytes.de/tech/webdav/draft-reschke-http-etag-on-write-latest.html#rfc.section.1.1" target="_blank"><span class="stl_119 stl_120 stl_19" style="word-spacing:-0.02em;">– a </span></a><a href="http://greenbytes.de/tech/webdav/draft-reschke-http-etag-on-write-latest.html#rfc.section.1.1" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">RFC exists </span></a><a href="http://greenbytes.de/tech/webdav/draft-reschke-http-etag-on-write-latest.html#rfc.section.1.1" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">trying to clarify how &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 50.524em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">implementations should deal with ETags on </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">write operations </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– this is not standard, but is an &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">interesting read. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.7044em; "><a href="http://blog.furiousbob.com/2011/12/06/hateoas-restful-services-using-spring-3-1/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">There are of course other possible uses of the ETag mechanism, such an for an </span></a><a href="http://blog.furiousbob.com/2011/12/06/hateoas-restful-services-using-spring-3-1/" target="_blank"><span class="stl_244 stl_120 stl_20">Optimistic &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 56.0378em; "><a href="http://blog.furiousbob.com/2011/12/06/hateoas-restful-services-using-spring-3-1/" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">Locking Mechanism using Spring 3.1 </span></a><a href="http://blog.furiousbob.com/2011/12/06/hateoas-restful-services-using-spring-3-1/" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">as well as dealing with the </span></a><a href="http://www.w3.org/1999/04/Editing/" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">related “Lost Update Problem”</span></a><a href="http://www.w3.org/1999/04/Editing/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 58.8711em; "><a href="https://www.mnot.net/blog/2007/08/07/etags" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">There are also several known </span></a><a href="https://www.mnot.net/blog/2007/08/07/etags" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:-0.0001em;">potential pitfalls and caveats </span></a><a href="https://www.mnot.net/blog/2007/08/07/etags" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to be aware of when using ETags. &nbsp;</span></a></div>
					<div class="stl_01" style="left:42.8901em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 81 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_82.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_82.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:40.6501em;top: 4.0058em; z-index:6; "><span class="stl_113 stl_08 stl_252" style="word-spacing:0em;">6. E</span><span class="stl_113 stl_08 stl_253">T</span><span class="stl_113 stl_08 stl_252">a</span><span class="stl_113 stl_08 stl_247" style="word-spacing:0.0064em;">gs are BIG &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 11.3912em; "><span class="stl_117 stl_08 stl_272" style="word-spacing:0.0112em;">7. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.4281em;top: 15.9878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In this section, we only scratched the surface with what’s &nbsp;</span></div>
					<div class="stl_01" style="left:16.4373em;top: 17.3211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">possible with Spring and ETags. &nbsp;</span></div>
					<div class="stl_01" style="left:16.4373em;top: 20.1544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">For a full implementation of an ETag enabled RESTful service, &nbsp;</span></div>
					<div class="stl_01" style="left:16.4373em;top: 21.4878em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">along with integration tests verifying the ETag behavior, &nbsp;</span></a></div>
					<div class="stl_01" style="left:16.4373em;top: 22.8907em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">check out </span><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">the github project </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– this is an Eclipse based project, &nbsp;</span></div>
					<div class="stl_01" style="left:16.4373em;top: 24.3211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">so it should be easy to import and run as it is. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8246em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 82 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_83.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_83.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_84.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_84.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 7.5em; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0004em;">11: REST PAGINATION IN &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 10.25em; z-index:87; "><span class="stl_115 stl_12 stl_116">SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 19.1276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 22.9271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This section will focus on the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">implementation of pagination </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">in a REST API, using Spring MVC &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 24.2742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and Spring Data. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 29.7443em; "><span class="stl_117 stl_08 stl_53" style="word-spacing:0.0019em;">2. Page as Resource vs Page as Representation &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 33.5575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The ﬁrst question when designing pagination in the context of a RESTful architecture is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 34.8771em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">whether to consider the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">page an actual Resource or just a Representation of Resources. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 37.7242em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">Treating the page itself as a resource introduces a host of problems such as no longer &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 39.0575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">being able to uniquely identify resources between calls. This, coupled with the fact that, in &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 40.3909em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the persistence layer, the page is not proper entity but a holder that is constructed when &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 41.7104em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">necessary, makes the choice straightforward: </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the page is part of the representation</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 44.5438em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The next question in the pagination design in the context of REST is </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">where to include the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 45.8771em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">paging information</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: &nbsp;</span></div>
					<div class="stl_01" style="left:6.3787em;top: 48.7242em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.3787em;top: 50.1409em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.8787em;top: 48.7104em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">in the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">URI path</span><span class="stl_121 stl_120 stl_19" style="word-spacing:-0.02em;">: </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">/foo/page/1 &nbsp;</span></div>
					<div class="stl_01" style="left:7.8787em;top: 50.1271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">URI query</span><span class="stl_121 stl_120 stl_19" style="word-spacing:-0.02em;">: </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">/foo?page=1 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 52.9604em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Keeping in mind that </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">a page is not a Resource</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, encoding the page information in the URI is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 54.3075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">no longer an option. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1287em;top: 57.1271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">We are going to use the standard way of solving this problem by </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">encoding the paging &nbsp;</span></div>
					<div class="stl_01" style="left:4.1288em;top: 58.4604em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">information in a URI query</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8085em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 84 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_85.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_85.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:40.4526em;top: 4.0058em; "><span class="stl_113 stl_08 stl_278" style="word-spacing:-0.0088em;">3. The Controller &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.9745em; "><span class="stl_117 stl_08 stl_94" style="word-spacing:-0.0088em;">3. The Controller &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.774em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Now, for the</span><span class="stl_121 stl_120 stl_19" style="word-spacing:0.28em;">&nbsp;</span><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">implementation – the Spring </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">MVC Controller for pagination </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is straightforward: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 17.5717em; "><span class="stl_148 stl_123 stl_209" style="word-spacing:-0.0048em;">@RequestMapping( value = “admin/foo”,params = { “page”, “size” },method = GET ) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 18.405em; "><span class="stl_148 stl_123 stl_179">@ResponseBody &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 19.2384em; "><span class="stl_148 stl_123 stl_208" style="word-spacing:-0.0122em;">public List&lt; Foo &gt; ﬁndPaginated( &nbsp;</span></div>
					<div class="stl_01" style="left:5.1695em;top: 20.0717em; "><span class="stl_148 stl_123 stl_214" style="word-spacing:-0.0064em;">@RequestParam( “page” ) int page, @RequestParam( “size” ) int size, &nbsp;</span></div>
					<div class="stl_01" style="left:5.1695em;top: 20.905em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.0131em;">UriComponentsBuilder uriBuilder, HꢀpServletResponse response ){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 22.5717em; "><span class="stl_148 stl_123 stl_243" style="word-spacing:-0.0093em;">Page&lt; Foo &gt; resultPage = service.ﬁndPaginated( page, size ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 23.4051em; "><span class="stl_148 stl_123 stl_145" style="word-spacing:-0.0067em;">if( page &gt; resultPage.getTotalPages() ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 24.2384em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.0108em;">throw new ResourceNotFoundExcepꢁon(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 25.0717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.5085em;top: 25.9051em; "><span class="stl_148 stl_123 stl_214" style="word-spacing:-0.0064em;">eventPublisher.publishEvent( new PaginatedResultsRetrievedEvent&lt; Foo &gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 26.7384em; "><span class="stl_148 stl_123 stl_209" style="word-spacing:-0.0043em;">( Foo.class, uriBuilder, response, page, resultPage.getTotalPages(), size ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.51em;top: 28.4051em; "><span class="stl_148 stl_123 stl_149" style="word-spacing:-0.0082em;">return resultPage.getContent(); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 29.2384em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.7878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The two query parameters are injected into the Controller method via </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">@RequestParam</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We’re also injecting both the Http Response and the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">UriComponentsBuilder </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">to help with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.9407em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">Discoverability </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– which we are decoupling via a custom event. If that is not a goal of the API, &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.2878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">you can simply remove the custom event and be done. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.1211em; "><a href="http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-seven-pagination/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Finally – note that the focus of this article is only the REST and the web layer – to go deeper &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 42.4544em; "><a href="http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-seven-pagination/" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">into the data access part of pagination you can </span></a><a href="http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-seven-pagination/" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">check out this article </span></a><a href="http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-seven-pagination/" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">about Pagination with &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 43.7878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Spring Data. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.2578em; "><span class="stl_117 stl_08 stl_82" style="word-spacing:-0.0222em;">4. Discoverability for REST pagination &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.0573em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">Withing the scope of </span><span class="stl_162 stl_161 stl_20">pagination</span><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">, satisfying the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">HATEOAS constraint of REST </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">means enabling &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.4044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the client of the API to discover the next and previous pages based on the current page in &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.724em; "><a href="http://www.iana.org/assignments/link-relations/link-relations.xml" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the navigation. For this purpose, we’re going to use the </span></a><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Link </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">HTTP header</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, coupled with the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.0573em; "><a href="http://www.iana.org/assignments/link-relations/link-relations.xml" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">ofﬁcial </span></a><span class="stl_170 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">“next“, “prev“, “ﬁrst” </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">“last” </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">link relation types. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8221em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 85 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_86.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_86.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:32.7693em;top: 4.0058em; "><span class="stl_113 stl_08 stl_186" style="word-spacing:-0.0222em;">4. Discoverability for REST pagination &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.324em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In REST, </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Discoverability is a cross cutting concern</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, applicable not only to speciﬁc operations &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">but to types of operations. For example, each time a Resource is created, the URI of that &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Resource should be discoverable by the client. Since this requirement is relevant for the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 11.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">creation of ANY Resource, it should be dealt with separately and decoupled from the main &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Controller ﬂow. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.4907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">With Spring, this </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">decoupling is done with Events</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, as was thoroughly discussed in the </span><span class="stl_244 stl_120 stl_20">previous &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.8378em; "><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">section focused on Discoverability </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of the REST Service. In the case of pagination, the event &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.1711em; "><span class="stl_119 stl_120 stl_19" style="word-spacing:-0.02em;">– </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">PaginatedResultsRetrievedEvent </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– is ﬁred in the controller layer, and discoverability is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">implemented with a custom listener for this event: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 23.2884em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0123em;">void addLinkHeaderOnPagedResourceRetrieval( &nbsp;</span></div>
					<div class="stl_01" style="left:5.1703em;top: 24.1217em; "><span class="stl_148 stl_123 stl_143" style="word-spacing:-0.0129em;">UriComponentsBuilder uriBuilder, HꢀpServletResponse response, &nbsp;</span></div>
					<div class="stl_01" style="left:5.1695em;top: 24.9551em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0078em;">Class clazz, int page, int totalPages, int size ){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 26.6217em; "><span class="stl_148 stl_123 stl_144" style="word-spacing:-0.0102em;">String resourceName = clazz.getSimpleName().toString().toLowerCase(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 27.4551em; "><span class="stl_148 stl_123 stl_168" style="word-spacing:-0.0024em;">uriBuilder.path( “/admin/” + resourceName ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 29.1217em; "><span class="stl_148 stl_123 stl_149" style="word-spacing:-0.0097em;">StringBuilder linkHeader = new StringBuilder(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 29.9551em; "><span class="stl_148 stl_123 stl_229" style="word-spacing:-0.0123em;">if( hasNextPage( page, totalPages ) ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 30.7884em; "><span class="stl_148 stl_123 stl_157" style="word-spacing:-0.0099em;">String uriNextPage = constructNextPageUri( uriBuilder, page, size ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 31.6217em; "><span class="stl_148 stl_123 stl_129" style="word-spacing:-0.0119em;">linkHeader.append( createLinkHeader( uriNextPage, “next” ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 32.4551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.5085em;top: 33.2884em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.0119em;">if( hasPreviousPage( page ) ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 34.1217em; "><span class="stl_148 stl_123 stl_155" style="word-spacing:-0.0076em;">String uriPrevPage = constructPrevPageUri( uriBuilder, page, size ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 34.9551em; "><span class="stl_148 stl_123 stl_174" style="word-spacing:-0.0158em;">appendCommaIfNecessary( linkHeader ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 35.7884em; "><span class="stl_148 stl_123 stl_241" style="word-spacing:-0.009em;">linkHeader.append( createLinkHeader( uriPrevPage, “prev” ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 36.6217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.5085em;top: 37.4551em; "><span class="stl_148 stl_123 stl_211" style="word-spacing:-0.0135em;">if( hasFirstPage( page ) ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 38.2884em; "><span class="stl_148 stl_123 stl_236" style="word-spacing:-0.0095em;">String uriFirstPage = constructFirstPageUri( uriBuilder, size ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 39.1217em; "><span class="stl_148 stl_123 stl_174" style="word-spacing:-0.0158em;">appendCommaIfNecessary( linkHeader ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 39.9551em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.012em;">linkHeader.append( createLinkHeader( uriFirstPage, “ﬁrst” ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 40.7884em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.5085em;top: 41.6217em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.0119em;">if( hasLastPage( page, totalPages ) ){ &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 42.4551em; "><span class="stl_148 stl_123 stl_215" style="word-spacing:-0.01em;">String uriLastPage = constructLastPageUri( uriBuilder, totalPages, size ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 43.2884em; "><span class="stl_148 stl_123 stl_174" style="word-spacing:-0.0158em;">appendCommaIfNecessary( linkHeader ); &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 44.1217em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0116em;">linkHeader.append( createLinkHeader( uriLastPage, “last” ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 44.9551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.5085em;top: 45.7884em; "><span class="stl_148 stl_123 stl_145" style="word-spacing:-0.0066em;">response.addHeader( “Link”, linkHeader.toString() ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 46.6217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.1711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In short, the listener checks if the navigation allows for a </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">next, previous, ﬁrst </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">last </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">pages and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.4907em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– if it does – </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">adds the relevant URIs to the Link HTTP Header</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.7407em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Note </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">that, for brevity, I included only a partial code sample and the full code here. &nbsp;</span></div>
					<div class="stl_01" style="left:42.809em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 86 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_87.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_87.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:37.2351em;top: 4.0058em; z-index:5; "><span class="stl_113 stl_08 stl_252" style="word-spacing:-0.03em;">5. </span><span class="stl_113 stl_08 stl_253">T</span><span class="stl_113 stl_08 stl_252">e</span><span class="stl_113 stl_08 stl_279" style="word-spacing:0.0025em;">st Driving Pagination &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 9.9745em; z-index:137; "><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.03em;">5. </span><span class="stl_117 stl_08 stl_46">T</span><span class="stl_117 stl_08 stl_19">e</span><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0025em;">st Driving Pagination &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.7877em; "><a href="https://code.google.com/p/rest-assured/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Both the main logic of pagination and discoverability are cover</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">ed by small, focused integration &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">tests; as in the </span><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">previous section</span><a href="https://code.google.com/p/rest-assured/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, the </span></a><a href="https://code.google.com/p/rest-assured/" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">rest-assured library </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is used to consume the REST service &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and to verify the results. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.2877em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">These are a few example of pagination integration tests; for a full test suite, check out the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">github project (link at the end of the section): &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 24.4051em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 25.2384em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0135em;">public void whenResourcesAreRetrievedPaged_then200IsReceived(){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 26.0717em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.0119em;">Response response = givenAuth().get( paths.getFooURL() + “?page=0&amp;size=2” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 27.7384em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0151em;">assertThat( response.getStatusCode(), is( 200 ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 28.5717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 29.4051em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 30.2384em; "><span class="stl_148 stl_123 stl_190" style="word-spacing:-0.0161em;">public void whenPageOfResourcesAreRetrievedOutOfBounds_then404IsReceived(){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 31.0717em; z-index:776; "><span class="stl_148 stl_123 stl_207" style="word-spacing:-0.0063em;">String url = getFooURL() + “?page=” + randomNumeric(5) + “&amp;size=2”; &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 31.9051em; "><span class="stl_148 stl_123 stl_155" style="word-spacing:-0.0076em;">Response response = givenAuth().get(url); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 33.5717em; "><span class="stl_148 stl_123 stl_202" style="word-spacing:-0.0163em;">assertThat( response.getStatusCode(), is( 404 ) ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 34.4051em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 35.2384em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 36.0717em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0125em;">public void givenResourcesExist_whenFirstPageIsRetrieved_thenPageContainsResources(){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 36.9051em; "><span class="stl_148 stl_123 stl_128">createResource(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 38.5717em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.0119em;">Response response = givenAuth().get( paths.getFooURL() + “?page=0&amp;size=2” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 40.2384em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0133em;">assertFalse( response.body().as( List.class ).isEmpty() ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 41.0717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.2578em; z-index:1094; "><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.03em;">6. </span><span class="stl_117 stl_08 stl_46">T</span><span class="stl_117 stl_08 stl_19">e</span><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0023em;">st Driving Pagination Discoverability &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.0573em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">Testing that </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">pagination is discoverable </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">by a client is relatively straightforward, although &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.3907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">there is a lot of ground to cover. The tests are focused on the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">position of the current page in &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.724em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">navigation </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and the different URIs that should be discoverable from each position: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 56.1051em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 56.9384em; "><span class="stl_148 stl_123 stl_134" style="word-spacing:-0.0146em;">public void whenFirstPageOfResourcesAreRetrieved_thenSecondPageIsNext(){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 57.7717em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0109em;">Response response = givenAuth().get( getFooURL()+”?page=0&amp;size=2” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 59.4384em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.0155em;">String uriToNextPage = extractURIByRel( response.getHeader( “Link” ), “next” ); &nbsp;</span></div>
					<div class="stl_01" style="left:42.8556em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 87 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_88.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_88.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:37.8043em;top: 4.0058em; "><span class="stl_113 stl_08 stl_140" style="word-spacing:-0.0009em;">7. Getting All Resources &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 7.3484em; "><span class="stl_148 stl_123 stl_152" style="word-spacing:-0.0049em;">assertEquals( getFooURL()+”?page=1&amp;size=2”, uriToNextPage ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 8.1817em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 9.8484em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 10.6817em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0139em;">public void whenFirstPageOfResourcesAreRetrieved_thenNoPreviousPage(){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 11.5151em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0109em;">Response response = givenAuth().get( getFooURL()+”?page=0&amp;size=2” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 13.1817em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0132em;">String uriToPrevPage = extractURIByRel( response.getHeader( “Link” ), “prev” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 14.0151em; "><span class="stl_148 stl_123 stl_241" style="word-spacing:-0.0087em;">assertNull( uriToPrevPage ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 14.8484em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 15.6817em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 16.5151em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0135em;">public void whenSecondPageOfResourcesAreRetrieved_thenFirstPageIsPrevious(){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 17.3484em; "><span class="stl_148 stl_123 stl_155" style="word-spacing:-0.0079em;">Response response = givenAuth().get( getFooURL()+”?page=1&amp;size=2” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 19.0151em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0132em;">String uriToPrevPage = extractURIByRel( response.getHeader( “Link” ), “prev” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 19.8484em; "><span class="stl_148 stl_123 stl_188" style="word-spacing:-0.007em;">assertEquals( getFooURL()+”?page=0&amp;size=2”, uriToPrevPage ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 20.6817em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 21.5151em; "><span class="stl_148 stl_123 stl_255">@Test &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 22.3484em; "><span class="stl_148 stl_123 stl_181" style="word-spacing:-0.0139em;">public void whenLastPageOfResourcesIsRetrieved_thenNoNextPageIsDiscoverable(){ &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 23.1817em; "><span class="stl_148 stl_123 stl_130" style="word-spacing:-0.0114em;">Response ﬁrst = givenAuth().get( getFooURL()+”?page=0&amp;size=2” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 24.0151em; "><span class="stl_148 stl_123 stl_167" style="word-spacing:-0.0164em;">String uriToLastPage = extractURIByRel( ﬁrst.getHeader( “Link” ), “last” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 25.6817em; "><span class="stl_148 stl_123 stl_157" style="word-spacing:-0.0098em;">Response response = givenAuth().get( uriToLastPage ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 27.3484em; "><span class="stl_148 stl_123 stl_173" style="word-spacing:-0.0155em;">String uriToNextPage = extractURIByRel( response.getHeader( “Link” ), “next” ); &nbsp;</span></div>
					<div class="stl_01" style="left:5.5085em;top: 28.1817em; "><span class="stl_148 stl_123 stl_166" style="word-spacing:-0.0114em;">assertNull( uriToNextPage ); &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 29.0151em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.9673em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Note </span><a href="https://gist.github.com/eugenp/8269915" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">that the full low level code for extractURIByRel – responsible </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for extracting the URIs by &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.3144em; "><a href="https://gist.github.com/eugenp/8269915" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">rel relation </span></a><a href="https://gist.github.com/eugenp/8269915" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">is here</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.2012em; "><span class="stl_117 stl_08 stl_34" style="word-spacing:-0.0009em;">7. Getting All Resources &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.0144em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">On the same topic of pagination and discoverability, the choice must be made if a client is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.334em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">allowed to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">retrieve all the Resources in the system </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">at once, or if the client </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">MUST </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">ask for them &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.6811em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">paginated. If the choice is made that the client cannot retrieve all Resources with a single &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.0144em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">request, and pagination is not optional but required, then several options are available for the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.334em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">response to a get all request</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. One option is to return a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">404 </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">(Not Found) </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and use the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic;">Link &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.6673em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">header </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to make the ﬁrst page discoverable: &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.9173em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Link=&lt;http://localhost:8080/rest/api/admin/foo?page=0&amp;size=2&gt;; rel=”</span><span class="stl_170 stl_161 stl_20" style="font-style:italic;">ﬁrst</span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">“, &lt;http:// &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.2507em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">localhost:8080/rest/api/admin/foo?page=103&amp;size=2&gt;; rel=”</span><span class="stl_162 stl_161 stl_20" style="font-style:italic;">last</span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">“ &nbsp;</span></div>
					<div class="stl_01" style="left:42.808em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 88 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_89.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_89.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:31.611em;top: 4.0058em; "><span class="stl_113 stl_08 stl_176" style="word-spacing:-0.0103em;">8. REST Paging with Range HTTP headers &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.1573em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">Another option is to return redirect – </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">303 </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">(See Other) </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– to the ﬁrst page. A more conservative &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 11.4907em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">route would be to simply return to the client a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">405 </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">(Method Not Allowed) </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for the GET request. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.9745em; "><span class="stl_117 stl_08 stl_37" style="word-spacing:-0.0103em;">8. REST Paging with Range HTTP headers &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.774em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">A relatively different way of implementing pagination is to work with the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">HTTP </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Range </span><span class="stl_162 stl_161 stl_20">headers &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.1073em; "><span class="stl_119 stl_120 stl_19" style="word-spacing:-0.02em;">– </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">Range, Content-Range, If-Range, Accept-Ranges </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– and </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">HTTP status codes </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– 206 (</span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">Partial &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.4544em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic;">Content</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">), 413 (</span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Request Entity Too Large</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">), 416 (</span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Requested Range Not Satisﬁable</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">). One view on &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.7877em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">this approach is that the HTTP Range extensions were not intended for pagination, and that &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">they should be managed by the Server, not by the Application. Implementing pagination based &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">on the HTTP Range header extensions is nevertheless technically possible, although not nearly &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.7878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">as common as the implementation discussed in this section. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 36.4578em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">9. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:15.6575em;top: 40.2711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We illustrated how to implement Pagination in a REST API &nbsp;</span></div>
					<div class="stl_01" style="left:15.6667em;top: 41.6044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">using Spring, and discussed how to set up and test &nbsp;</span></div>
					<div class="stl_01" style="left:15.6667em;top: 42.9377em; "><span class="stl_121 stl_120 stl_20">Discoverability. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 45.7711em; "><a href="http://www.baeldung.com/jpa-pagination" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">If you want to go in depth on pagination in the persistence lev</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">el, check out my &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 47.1044em; "><a href="http://www.baeldung.com/jpa-pagination" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">JPA </span></a><a href="http://www.baeldung.com/jpa-pagination" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">or </span></a><a href="http://www.baeldung.com/hibernate-pagination" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">Hibernate </span></a><a href="http://www.baeldung.com/hibernate-pagination" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">pagination tutorials. &nbsp;</span></a></div>
					<div class="stl_01" style="left:7.5em;top: 49.924em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">The implementation of all these examples and code snippets </span></a><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">can be found in </span><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_244 stl_120 stl_20">my &nbsp;</span></a></div>
					<div class="stl_01" style="left:7.5em;top: 51.2711em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:-0.0001em;">github project </span></a><a href="https://github.com/eugenp/tutorials/tree/master/spring-security-rest-full#readme" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– this is an Eclipse based project, so it should be easy to im</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">port and &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 52.6044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">run as it is. &nbsp;</span></div>
					<div class="stl_01" style="left:42.809em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 89 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_90.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_90.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_91.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_91.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; "><span class="stl_115 stl_12 stl_116" style="word-spacing:-0.0007em;">12: ERROR HANDLING FOR &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.25em; z-index:95; "><span class="stl_115 stl_12 stl_224" style="word-spacing:-0.0006em;">REST WITH SPRING &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.9271em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This section will focus on </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">how to implement Exception Handling with Spring for a REST API</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.2742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We’ll look at both the recommended solution with Spring 3.2 and 4.x but also at the older &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.6075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">options as well. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.4271em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Before Spring 3.2</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, the two main approaches to handling exceptions in a Spring MVC &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.7742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">application were: </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">HandlerExceptionResolver </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">or the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ExceptionHandler </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">annotation. Both of &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.1075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">these have some clear downsides. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.9271em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">After 3.2 </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">we now have the new </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ControllerAdvice </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">annotation to address the limitations of &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.2742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the previous two solutions. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.0938em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">All of these do have one thing in common – they deal with the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">separation of concerns </span><span class="stl_119 stl_120 stl_20">very &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.4409em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">well. The app can throw exception normally to indicate a failure of some kind – exceptions &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.7742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">which will then be handled separately. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.2443em; "><span class="stl_117 stl_08 stl_51" style="word-spacing:-0.0042em;">2. Solution 1 – The Controller level </span><span class="stl_117 stl_08 stl_51" style="font-style:italic; word-spacing:-0.0042em;">@ &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.4443em; "><span class="stl_117 stl_08 stl_80" style="font-style:italic;">ExceptionHandler &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.2575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The ﬁrst solution works at the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@Controller </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">level – we will deﬁne a method to handle &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.5909em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">exceptions, and annotate that with </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">@ExceptionHandler</span><span class="stl_121 stl_120 stl_20">: &nbsp;</span></div>
					<div class="stl_01" style="left:42.8911em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 91 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_92.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_92.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:29.6802em;top: 4.0058em; "><span class="stl_113 stl_08 stl_263" style="word-spacing:-0.0019em;">3. Solution 2 – The HandlerExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 8.2884em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0138em;">public class FooController{ &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 9.1217em; "><span class="stl_148 stl_123 stl_261">... &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 9.9551em; "><span class="stl_148 stl_123 stl_144" style="word-spacing:-0.0105em;">@ExcepꢁonHandler({ CustomExcepꢁon1.class, CustomExcepꢁon2.class }) &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 10.7884em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.013em;">public void handleExcepꢁon() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 11.6217em; "><span class="stl_148 stl_123 stl_201">// &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 12.4551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 13.2884em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.824em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This approach has a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">major drawback </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ExceptionHandler </span><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">annotated method is </span><span class="stl_162 stl_161 stl_20">only &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 18.1573em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">active for that particular Controller</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, not globally for the entire application. Of course adding &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">this to every controller makes it not well suited for a general exception handling mechanism. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.324em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">The limitation is often worked around by having </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">all Controllers extend a Base Controller &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.6573em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">class </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– however, this can be a problem for applications where, for whatever reasons, the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Controllers cannot be made to extend from such a class. For example, the Controllers &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">may already extend from another base class which may be in another jar or not directly &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">modiﬁable, or may themselves not be directly modiﬁable. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Next, we’ll look at another way to solve the exception handling problem – one that is global &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and does not include any changes to existing artifacts such as Controllers. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.3078em; "><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.006em;">3. Solution 2 – The </span><span class="stl_117 stl_08 stl_100" style="font-style:italic;">HandlerExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.1211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The second solution is to deﬁne an </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">HandlerExceptionResolver </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– this will resolve any &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.4407em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">exception thrown by the application. It will also allow us to implement a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">uniform exception &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.774em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">handling mechanism </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">in our REST API. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Before going for a custom resolver, let’s go over the existing implementations. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.6745em; "><span class="stl_117 stl_08 stl_53" style="word-spacing:0.0058em;">3.1. ExceptionHandlerExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.4878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This resolver was introduced in Spring 3.1 and is enabled by default in the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">DispatcherServlet</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.8211em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This is actually the core component of how the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ExceptionHandler </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">mechanism presented &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.1544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">earlier works. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8255em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 92 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_93.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_93.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:32.6077em;top: 4.0058em; "><span class="stl_113 stl_08 stl_225" style="word-spacing:0.0051em;">3.2. DefaultHandlerExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_19" style="word-spacing:0em;">3.2. </span><span class="stl_117 stl_08 stl_44" style="font-style:italic;">DefaultHandlerExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This resolver was introduced in Spring 3.0 and is enabled by default in the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">DispatcherServlet</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.2103em; "><a href="http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-rest-spring-mvc-exceptions" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">It is used to resolve standard Spring exceptions to their corresponding HTTP Status Codes, &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 13.5298em; "><a href="http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-rest-spring-mvc-exceptions" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">namely Client error – 4xx and Server error – 5xx status codes. </span></a><a href="http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-rest-spring-mvc-exceptions" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">Here is the </span></a><a href="http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-rest-spring-mvc-exceptions" target="_blank"><span class="stl_280 stl_161 stl_20" style="word-spacing:0em;">full list </span></a><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">of the Spring &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Exceptions it handles, and how these are mapped to status codes. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.6965em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">While it does set the Status Code of the Response properly, one </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">limitation is that it doesn’t &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.0298em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">set anything to the body of the Response</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. And for a REST API – the Status Code is really </span><span class="stl_162 stl_161 stl_20">not &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.3632em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">enough information </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to present to the Client – the response has to have a body as well, to allow &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.7103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the application to give additional information about the failure. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.5436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This can be solved by conﬁguring View resolution and rendering error content through &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.8769em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic;">ModelAndView</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, but the solution is clearly not optimal – which is why a better option has been &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">made available with Spring 3.2 – we’ll talk about that in the latter part of this section. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.2637em; "><span class="stl_117 stl_08 stl_19" style="word-spacing:0em;">3.3. </span><span class="stl_117 stl_08 stl_80" style="font-style:italic;">ResponseStatusExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.0769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This resolver was also introduced in Spring 3.0 and is enabled by default in the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.3965em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic;">DispatcherServlet</span><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">. It’s main responsibility is to use the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ResponseStatus </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">annotation available &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.7436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">on custom exceptions and to map these exceptions to HTTP status codes. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.5769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Such a custom exception may look like: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 44.3609em; "><span class="stl_148 stl_123 stl_128" style="word-spacing:-0.0085em;">@ResponseStatus(value = HꢀpStatus.NOT_FOUND) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 45.1942em; "><span class="stl_148 stl_123 stl_219" style="word-spacing:-0.0145em;">public ﬁnal class ResourceNotFoundExcepꢁon extends RunꢁmeExcepꢁon { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 46.0276em; "><span class="stl_148 stl_123 stl_125" style="word-spacing:-0.013em;">public ResourceNotFoundExcepꢁon() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 46.8609em; "><span class="stl_148 stl_123 stl_281">super(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 47.6942em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 48.5276em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0109em;">public ResourceNotFoundExcepꢁon(String message, Throwable cause) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 49.3609em; "><span class="stl_148 stl_123 stl_228" style="word-spacing:-0.0044em;">super(message, cause); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 50.1942em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 51.0276em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0106em;">public ResourceNotFoundExcepꢁon(String message) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 51.8609em; "><span class="stl_148 stl_123 stl_282">super(message); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 52.6942em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 53.5276em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0127em;">public ResourceNotFoundExcepꢁon(Throwable cause) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 54.3609em; "><span class="stl_148 stl_123 stl_58">super(cause); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 55.1942em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 56.0276em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:42.8236em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 93 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_94.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_94.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:21.0833em;top: 4.0058em; z-index:79; "><span class="stl_113 stl_08 stl_283" style="word-spacing:0.082em;">3.4. </span><span class="stl_113 stl_08 stl_284">S</span><span class="stl_113 stl_08 stl_285">impleMappingExceptionResolveran</span><span class="stl_113 stl_08 stl_286">d</span><span class="stl_113 stl_08 stl_283">A</span><span class="stl_113 stl_08 stl_287">nnotationMethodHandlerExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Same as the DefaultHandlerExceptionResolver, this resolver is limited in the way it deals with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the body of the response – it does map the Status Code on the response, but the body is still &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.0044em; "><span class="stl_121 stl_120 stl_20">null. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 14.0578em; "><span class="stl_117 stl_08 stl_19" style="word-spacing:0em;">3.4. </span><span class="stl_117 stl_08 stl_53" style="font-style:italic; word-spacing:0.0056em;">SimpleMappingExceptionResolver </span><span class="stl_117 stl_08 stl_19">and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.2578em; "><span class="stl_117 stl_08 stl_103" style="font-style:italic;">AnnotationMethodHandlerExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.0711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">SimpleMappingExceptionResolver </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">has been around for quite some time – it comes out &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.3907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of the older Spring MVC model and is </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">not very relevant for a REST Service</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. It is used to map &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.724em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">exception class names to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">view </span><span class="stl_121 stl_120 stl_20">names. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.5711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0003em;">AnnotationMethodHandlerExceptionResolver </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">was introduced in Spring 3.0 to handle &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.8907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">exceptions through the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ExceptionHandler </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">annotation, but has been </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">deprecated </span><span class="stl_119 stl_120 stl_20">by &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.2378em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">ExceptionHandlerExceptionResolver </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">as of Spring 3.2. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.2912em; "><span class="stl_117 stl_08 stl_70" style="word-spacing:0.003em;">3.5. Custom </span><span class="stl_117 stl_08 stl_100" style="font-style:italic;">HandlerExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.1044em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The combination of </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">DefaultHandlerExceptionResolver </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">ResponseStatusExceptionResolver &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.4377em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">goes a long way towards providing a good error handling mechanism for a Spring RESTful &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.7573em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Service. The downside is – as mentioned before – </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">no control over the body of the response</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.6044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Ideally, we’d like to be able to output either JSON or XML, depending on what format the client &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.9377em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">has asked for (via the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Accept </span><span class="stl_121 stl_120 stl_20">header). &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.7573em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">This alone justiﬁes creating </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">a new, custom exception resolver</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 49.5551em; "><span class="stl_206 stl_123 stl_175">@Component &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 50.3884em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0148em;">public class RestResponseStatusExcepꢁonResolver extends AbstractHandlerExcepꢁonResolver { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 52.0551em; "><span class="stl_148 stl_123 stl_133">@Override &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 52.8884em; "><span class="stl_148 stl_123 stl_126" style="word-spacing:-0.0172em;">protected ModelAndView doResolveExcepꢁon &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 53.7217em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0138em;">(HꢀpServletRequest request, HꢀpServletResponse response, Object handler, Excepꢁon ex) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 54.5551em; "><span class="stl_148 stl_123 stl_288" style="word-spacing:-0.0411em;">try { &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 55.3884em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.0121em;">if (ex instanceof IllegalArgumentExcepꢁon) { &nbsp;</span></div>
					<div class="stl_01" style="left:7.712em;top: 56.2217em; "><span class="stl_148 stl_123 stl_149" style="word-spacing:-0.0098em;">return handleIllegalArgument((IllegalArgumentExcepꢁon) ex, response, handler); &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 57.0551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:7.034em;top: 57.8884em; "><span class="stl_148 stl_123 stl_261">... &nbsp;</span></div>
					<div class="stl_01" style="left:42.8095em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 94 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_95.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_95.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:22.5436em;top: 4.0058em; "><span class="stl_113 stl_08 stl_289" style="word-spacing:-0.0032em;">4. Solution 3 – The New @ControllerAdvice (Spring 3.2 And Above) &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 7.3484em; "><span class="stl_148 stl_123 stl_208" style="word-spacing:-0.0125em;">} catch (Excepꢁon handlerExcepꢁon) { &nbsp;</span></div>
					<div class="stl_01" style="left:7.034em;top: 8.1817em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0082em;">logger.warn(“Handling of [“ + ex.getClass().getName() + “] &nbsp;</span></div>
					<div class="stl_01" style="left:7.373em;top: 9.0151em; "><span class="stl_148 stl_123 stl_142" style="word-spacing:-0.0072em;">resulted in Excepꢁon”, handlerExcepꢁon); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 9.8484em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:6.356em;top: 10.6817em; "><span class="stl_148 stl_123 stl_268" style="word-spacing:-0.006em;">return null; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 11.5151em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 13.1817em; "><span class="stl_148 stl_123 stl_151" style="word-spacing:-0.0149em;">private ModelAndView handleIllegalArgument &nbsp;</span></div>
					<div class="stl_01" style="left:6.017em;top: 14.0151em; "><span class="stl_148 stl_123 stl_219" style="word-spacing:-0.0143em;">(IllegalArgumentExcepꢁon ex, HꢀpServletResponse response) throws IOExcepꢁon { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 14.8484em; "><span class="stl_148 stl_123 stl_191">response.sendError(HꢀpServletResponse.SC_CONFLICT); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 15.6817em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0138em;">String accept = request.getHeader(HꢀpHeaders.ACCEPT); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 16.5151em; "><span class="stl_148 stl_123 stl_261">... &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 17.3484em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0134em;">return new ModelAndView(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 18.1817em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 19.0151em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.5644em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">One detail to notice here is the Request itself is available, so the application can consider the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.8978em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">value of the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Accept </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">header sent by the client. For example, if the client asks for </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">application/ &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.2311em; "><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">json </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">then, in case of an error condition, the application should still return a response body &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.5644em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">encoded with </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">application/json</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.3978em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">The other important implementation detail is that a </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">ModelAndView </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">is returned – this is the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.7173em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">body of the response </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and it will allow the application to set whatever is necessary on it. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.5644em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This approach is a consistent and easily conﬁgurable mechanism for the error handling of a &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.884em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Spring REST Service. It is does however have </span><span class="stl_162 stl_161 stl_20">limitations</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: it’s interacting with the low level &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.2311em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0002em;">HtttpServletResponse </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and it ﬁts into the old MVC model which uses </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">ModelAndView </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– so &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.5644em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">there’s still room for improvement. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.0345em; "><span class="stl_117 stl_08 stl_31" style="word-spacing:-0.0069em;">4. Solution 3 – The New </span><span class="stl_117 stl_08 stl_105" style="font-style:italic; word-spacing:0.0142em;">@ControllerAdvice </span><span class="stl_117 stl_08 stl_47" style="word-spacing:0.005em;">(Spring 3.2 &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.2345em; "><span class="stl_117 stl_08 stl_34" style="word-spacing:-0.0216em;">And Above) &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.0478em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Spring 3.2 brings support for a global </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ExceptionHandler </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">with the new </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">@ControllerAdvice &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.3811em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">annotation. This enables a mechanism that breaks away from the older MVC model and makes &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.7144em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">use of </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">ResponseEntity </span><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">along with the type safety and ﬂexibility of </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">@ExceptionHandler</span><span class="stl_121 stl_120 stl_20">: &nbsp;</span></div>
					<div class="stl_01" style="left:42.8231em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 95 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_96.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_96.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:22.5436em;top: 4.0058em; "><span class="stl_113 stl_08 stl_289" style="word-spacing:-0.0032em;">4. Solution 3 – The New @ControllerAdvice (Spring 3.2 And Above) &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 8.2884em; "><span class="stl_148 stl_123 stl_146">@ControllerAdvice &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 9.1217em; "><span class="stl_148 stl_123 stl_181" style="word-spacing:-0.0151em;">public class RestResponseEnꢁtyExcepꢁonHandler extends ResponseEnꢁtyExcepꢁonHandler { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 10.7884em; "><span class="stl_148 stl_123 stl_153" style="word-spacing:-0.0124em;">@ExcepꢁonHandler(value = { IllegalArgumentExcepꢁon.class, IllegalStateExcepꢁon.class }) &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 11.6217em; "><span class="stl_148 stl_123 stl_158" style="word-spacing:-0.0147em;">protected ResponseEnꢁty&lt;Object&gt; handleConﬂict(RunꢁmeExcepꢁon ex, WebRequest request) { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 12.4551em; z-index:453; "><span class="stl_148 stl_123 stl_167" style="word-spacing:-0.0165em;">String bodyOfResponse = “This should be applicaꢁon speciﬁc”; &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 13.2884em; "><span class="stl_148 stl_123 stl_139" style="word-spacing:-0.0133em;">return handleExcepꢁonInternal(ex, bodyOfResponse, &nbsp;</span></div>
					<div class="stl_01" style="left:6.695em;top: 14.1217em; "><span class="stl_148 stl_123 stl_243" style="word-spacing:-0.0091em;">new HꢀpHeaders(), HꢀpStatus.CONFLICT, request); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 14.9551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 15.7884em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.3378em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">The new annotation allows the multiple scattered </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">@ExceptionHandler </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">from before to be &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.6573em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">consolidated into a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">single, global error handling component</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The actual mechanism is extremely simple but also very ﬂexible: &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 26.3378em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 27.7544em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 29.1711em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 26.3378em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">it allows full control over the body of the response as well as the status code &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 27.7544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">it allows mapping of several exceptions to the same method, to be handled together &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 29.1711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">it makes good use of the newer </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">RESTful ResposeEntity </span><span class="stl_119 stl_120 stl_20">response &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.9907em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">One thing to keep in mind here is to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">match the exceptions declared with </span><span class="stl_162 stl_161 stl_20" style="font-style:italic;">@ExceptionHandler &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.324em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">with the exception used as argument of the method</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. If these don’t match, the compiler will not &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">complain – no reason it should, and Spring will not complain either. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.4907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">However, when the exception is actually thrown at runtime, </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the exception resolving &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.824em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">mechanism will fail with</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 42.6217em; "><span class="stl_148 stl_123 stl_236" style="word-spacing:-0.0095em;">java.lang.IllegalStateExcepꢁon: No suitable resolver for argument [0] [type=...] &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 43.4551em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.0093em;">HandlerMethod details: ... &nbsp;</span></div>
					<div class="stl_01" style="left:42.81em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 96 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_97.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_97.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:22.5436em;top: 4.0058em; "><span class="stl_113 stl_08 stl_289" style="word-spacing:-0.0032em;">4. Solution 3 – The New @ControllerAdvice (Spring 3.2 And Above) &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 12.097em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">5. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 15.9103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We discussed here several ways to implement an exception &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 17.2436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">handling mechanism for a REST API in Spring, starting with &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 18.5769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the older mechanism and continuing with the Spring 3.2 &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 19.9103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">support and into 4.0 and 4.1. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 22.7436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">It’s an Eclipse based project, so it should be easy to import and run as it is. &nbsp;</span></div>
					<div class="stl_01" style="left:42.8566em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 97 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_98.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_98.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_99.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_99.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:41.0667em;top: 4.0058em; "><span class="stl_113 stl_08 stl_240" style="word-spacing:-0.0103em;">1. The Problem &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; "><span class="stl_115 stl_12 stl_224" style="word-spacing:-0.0008em;">13: VERSIONING A REST API &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.3776em; "><span class="stl_117 stl_08 stl_63" style="word-spacing:-0.0103em;">1. The Problem &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.1771em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Evolving a REST API </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is a difﬁcult problem – one for which many options are available. This &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 21.5242em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">section discusses through some of these options. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.9943em; "><span class="stl_117 stl_08 stl_103" style="word-spacing:-0.0047em;">2. What is in the Contract? &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.7938em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Before anything else, we need to answer one simple question: </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">What is the Contract between &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.1271em; "><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">the API and the Client? &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.1943em; "><span class="stl_117 stl_08 stl_53" style="word-spacing:-0.0024em;">2.1. URIs part of the Contract? &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.9938em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Let’s ﬁrst consider </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the URI structure of the REST API </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– is that part of the contract? Should &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.3409em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">clients bookmark, hardcode and generally rely on URIs of the API? &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.1742em; "><a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">If they would, then the interaction of the Client with the REST </span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Service would no longer be &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.4938em; "><a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">driven by the Service itself, but by what </span></a><a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">Roy Fielding </span></a><a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">calls </span></a><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">out-of-band </span><span class="stl_162 stl_161 stl_20">information: &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.7575em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">A REST API should be entered with no prior knowledge beyond the initial URI (bookmark) &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.0909em; "><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">and set of standardized media types that are appropriate for the intended audience…Failure &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.4242em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">here implies that out-of-band information is driving interaction instead of hypertext. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.6604em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">So clearly </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">URIs are not part of the contract! </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The client should only know a single URI – the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 58.0075em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">entry point to the API – all other URIs should be discovered while consuming the API. &nbsp;</span></div>
					<div class="stl_01" style="left:42.81em;top: 62.1175em; "><span class="stl_56 stl_08 stl_258" style="word-spacing:0.7255em;">Page 99 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_100.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_100.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:32.7368em;top: 4.0058em; "><span class="stl_113 stl_08 stl_271" style="word-spacing:-0.0119em;">2.2. Media </span><span class="stl_113 stl_08 stl_290">T</span><span class="stl_113 stl_08 stl_252">y</span><span class="stl_113 stl_08 stl_291" style="word-spacing:-0.0041em;">pes part of the Contract? &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 7.0637em; z-index:104; "><span class="stl_117 stl_08 stl_62" style="word-spacing:-0.0116em;">2.2. Media </span><span class="stl_117 stl_08 stl_107">T</span><span class="stl_117 stl_08 stl_19">y</span><span class="stl_117 stl_08 stl_80" style="word-spacing:-0.0041em;">pes part of the Contract? &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 10.8632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">What about </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the Media Type information </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">used for the representations of Resources – are &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 12.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">these part of the contract between the Client and the Service? &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 15.0298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">In order to successfully consume the API, the Client </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">must have prior knowledge of these &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 16.3632em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Media Types </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– in fact, the deﬁnition of these media types represents the entire contract, and &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 17.7103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is where the REST Service should focus the most: &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 21.9603em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">A REST API should spend almost all of its descriptive effort in deﬁning the media type(s) &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 23.2936em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">used for representing resources and driving application state, or in deﬁning extended relation &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 24.6269em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">names and/or hypertext-enabled mark-up for existing standard media types. &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 28.8632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">So the </span><span class="stl_170 stl_161 stl_20" style="word-spacing:0em;">Media Type deﬁnitions are part of the contract </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and should be prior knowledge for the &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 30.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">client that consumes the API – this is where standardization comes in. &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 33.0436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We now have a good idea of what the contract is, let’s move on to how to actually tackle the &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 34.3769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">versioning problem. &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 39.847em; "><span class="stl_117 stl_08 stl_51" style="word-spacing:0.0036em;">3. High Level Options &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 43.6603em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s now discuss the high level approaches to versioning the REST API: &nbsp;</span></div>
					<div class="stl_01" style="left:6.488em;top: 46.4798em; "><span class="stl_170 stl_161 stl_19" style="word-spacing:0.8454em;">• </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">URI Versioning </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– version the URI space using version indicators &nbsp;</span></div>
					<div class="stl_01" style="left:6.488em;top: 47.8965em; "><span class="stl_170 stl_161 stl_19" style="word-spacing:0.8454em;">• </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">Media Type Versioning </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– version the Representation of the Resource &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 50.7298em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">When we introduce </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the version in the URI space</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, the Representations of Resources are &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 52.0769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">considered immutable, so when changes need to be introduced in the API, a new URI space &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 53.4103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">needs to be created. &nbsp;</span></div>
					<div class="stl_01" style="left:42.6599em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 100 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_101.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_101.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:38.7168em;top: 4.0058em; "><span class="stl_113 stl_08 stl_147" style="word-spacing:0.0036em;">3. High Level Options &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.324em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">For example</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, say an API publishes the following resources – users and privileges: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.1217em; "><span class="stl_148 stl_123 stl_228">hꢀp://host/v1/users &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 11.9551em; "><span class="stl_148 stl_123 stl_207">hꢀp://host/v1/privileges &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.4907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Now, let’s consider that a breaking change in the users API requires </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">a second version to be &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.824em; "><span class="stl_162 stl_161 stl_20">introduced</span><span class="stl_121 stl_120 stl_20">: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 20.6217em; "><span class="stl_148 stl_123 stl_293">hꢀp://host/v2/users &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 21.4551em; "><span class="stl_148 stl_123 stl_228">hꢀp://host/v2/privileges &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.9907em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">When we </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">version the Media Type and extend the language</span><a href="http://tools.ietf.org/html/draft-ietf-httpbis-p3-payload-16#section-5.2" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, we </span></a><a href="http://tools.ietf.org/html/draft-ietf-httpbis-p3-payload-16#section-5.2" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">go through </span></a><a href="http://tools.ietf.org/html/rfc4288#section-3.2" target="_blank"><span class="stl_121 stl_120 stl_20">Content &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 26.3378em; "><a href="http://tools.ietf.org/html/rfc4288#section-3.2" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Negotiation based on this header. The REST API would make use of custom v</span></a><a href="http://tools.ietf.org/html/rfc4288#section-3.2" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">endor MIME &nbsp;</span></a></div>
					<div class="stl_01" style="left:4.1667em;top: 27.6711em; "><a href="http://tools.ietf.org/html/rfc4288#section-3.2" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:-0.0001em;">media types </span></a><a href="http://tools.ietf.org/html/rfc4288#section-3.2" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">instead of generic media types such as </span></a><span class="stl_121 stl_120 stl_20" style="font-style:italic;">application/json</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. It is these media types &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">that are going to be versioned instead of the URIs. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">For example: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 35.6217em; "><span class="stl_148 stl_123 stl_294">===&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 36.4551em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0081em;">GET /users/3 HTTP/1.1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 37.2884em; "><span class="stl_148 stl_123 stl_188" style="word-spacing:-0.0058em;">Accept: applicaꢁon/vnd.myname.v1+json &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 38.1217em; "><span class="stl_206 stl_123 stl_295">&lt;=== &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 38.9551em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.009em;">HTTP/1.1 200 OK &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 39.7884em; "><span class="stl_148 stl_123 stl_58" style="word-spacing:0.0002em;">Content-Type: applicaꢁon/vnd.myname.v1+json &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 40.6217em; "><span class="stl_148 stl_123 stl_19">{</span></div>
					<div class="stl_01" style="left:5.678em;top: 41.4551em; "><span class="stl_148 stl_123 stl_103" style="word-spacing:0.0056em;">“user”: { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 42.2884em; "><span class="stl_148 stl_123 stl_82" style="word-spacing:0.0021em;">“name”: “John Smith” &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 43.1217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 43.9551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.4907em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">What is important to understand here is that </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the client makes no assumptions about the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.824em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">structure of the response </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">beyond what is deﬁned in the media type. This is why generic media &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.1573em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">types are not ideal – these </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">do not provide enough semantic information </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and force the client to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">use require additional hints to process the actual representation of the resource. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">An exception to this is using some other way of uniquely identifying the semantics of the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">content – such as an XML schema. &nbsp;</span></div>
					<div class="stl_01" style="left:42.7264em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 101 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_102.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_102.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:33.9718em;top: 4.0058em; "><span class="stl_113 stl_08 stl_186" style="word-spacing:-0.0081em;">4. Advantages and Disadvantages &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_82" style="word-spacing:-0.0082em;">4. Advantages and Disadvantages &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Now that we have a clear concept of what is part of the Contract between the Client and the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Service, as well as a high level overview of the options to version the API, let’s discuss the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.5436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">advantages and disadvantages of each approach. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.3632em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">First, introducing version identiﬁers in the URI leads to a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">very large URI footprint</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. This is due to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.7103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the fact that any breaking change in any of the published APIs will introduce a whole new tree &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.0436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of representations for the entire API. Over time, this becomes a burden to maintain as well as a &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 20.3769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">problem for the client – which now has more options to choose from. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 23.1965em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Version identiﬁers in the URI is also </span><span class="stl_170 stl_161 stl_20" style="word-spacing:-0.0001em;">severely inﬂexible </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– there is no way to simply evolve the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.5436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">API of a single Resource, or a small subset of the overall API. As we mentioned before, this is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">an all or nothing approach – if part of the API moves to the new version, then the entire API has &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to move along with it. This also makes upgrading clients from v1 to v2 a major undertaking – &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.5436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">which leads to slower upgrades and much longer sunset periods for the old versions. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.3632em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">HTTP Caching </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is also a major concern when it comes to versioning. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 34.1965em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">From the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">perspective of proxy caches in the middle</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, each approach has advantages and &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.5436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">disadvantages: if the URI is versioned, then the cache will need to keep multiple copies of each &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Resource – one for every version of the API. This puts load on the cache and decreases the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 38.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">cache hit rate, since different clients will use different versions. Also, some cache invalidation &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.5436em; "><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.44" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">mechanisms will no longer work. If the media type is the one th</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">at is versioned, then both the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.002em;">Client and the Service need to support </span><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.44" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0047em;">the </span></a><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.44" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0022em;">Vary HTTP header </span></a><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.002em;">to indicate that there are multiple &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">versions being cached. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.0298em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">From the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">perspective of client caching </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">however, the solution that versions the media type &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.3769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">involves slightly more work than the one where URIs contain the version identiﬁer. This is &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.7103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">because it’s simply easier to cache something when its key is an URL than a media type. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.5436em; "><a href="https://www.mnot.net/blog/2012/12/04/api-evolution" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Let’s end this section with deﬁning some goals (straight out of </span></a><a href="https://www.mnot.net/blog/2012/12/04/api-evolution" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:0em;">API Evolution</span></a><a href="https://www.mnot.net/blog/2012/12/04/api-evolution" target="_blank"><span class="stl_121 stl_120 stl_20">): &nbsp;</span></a></div>
					<div class="stl_01" style="left:6.4167em;top: 53.3769em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 54.7936em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 56.2103em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 57.6269em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 53.3769em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">keep compatible changes out of names &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 54.7936em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">avoid new major versions &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 56.2103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">makes changes backwards-compatible &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 57.6269em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">think about forwards-compatibility &nbsp;</span></div>
					<div class="stl_01" style="left:42.6608em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 102 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_103.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_103.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:35.3643em;top: 4.0058em; "><span class="stl_113 stl_08 stl_262" style="word-spacing:-0.0133em;">5. Possible Changes to the API &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.0637em; "><span class="stl_117 stl_08 stl_78" style="word-spacing:-0.0135em;">5. Possible Changes to the API &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.8769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Next, let’s consider the types of changes to the REST API – these are introduced here: &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 13.7103em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 15.1269em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 13.7103em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">representation format changes &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 15.1269em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">resource changes &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1803em; "><span class="stl_117 stl_08 stl_28" style="word-spacing:-0.0066em;">5.1. Adding to the Representation of a Resource &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.9936em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The format documentation of the media type should be designed with forward compatibility in &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.3269em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">mind; speciﬁcally – a client should ignore information that it doesn’t understand (which JSON &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.6603em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">does better than XML). &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.4798em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Now, adding information in the Representation of a resource </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">will not break existing clients </span><span class="stl_119 stl_120 stl_20">if &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.8269em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">these are correctly implemented. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.6465em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">To continue our earlier </span><span class="stl_162 stl_161 stl_20">example</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, adding the amount in the representation of the user will not &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 33.9936em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">be a breaking change: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 37.7776em; "><span class="stl_148 stl_123 stl_19">{</span></div>
					<div class="stl_01" style="left:5.678em;top: 38.6109em; "><span class="stl_148 stl_123 stl_103" style="word-spacing:0.0056em;">“user”: { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 39.4442em; z-index:697; "><span class="stl_148 stl_123 stl_218" style="word-spacing:0.0101em;">“name”: “John Smith”, &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 40.2776em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0102em;">“amount”: “300” &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 41.1109em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 41.9442em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.7137em; "><span class="stl_117 stl_08 stl_79" style="word-spacing:0.0001em;">5.2. Removing or changing an existing Representation &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.5269em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Removing, renaming or generally restructuring information in the design of existing &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.8603em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">representations is a breaking change for clients, because they already understand and rely on &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 53.1936em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the old format. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 56.0132em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This is where Content Negotiation comes in – for such changes, </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">a new vendor MIME media &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.3465em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">type </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">needs to be introduced. &nbsp;</span></div>
					<div class="stl_01" style="left:42.6589em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 103 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_104.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_104.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:35.7401em;top: 4.0058em; "><span class="stl_113 stl_08 stl_248" style="word-spacing:-0.0063em;">5.3. Major Semantic Changes &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.324em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">Let’s continue with the previous </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">example </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– say we want to break the name of the user into &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.6711em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">ﬁrstname </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">and </span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">lastname</span><span class="stl_121 stl_120 stl_20">: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 12.4551em; "><span class="stl_148 stl_123 stl_294">===&gt; &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 13.2884em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0081em;">GET /users/3 HTTP/1.1 &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 14.1217em; "><span class="stl_148 stl_123 stl_183" style="word-spacing:-0.0067em;">Accept: applicaꢁon/vnd.myname.v2+json &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 14.9551em; "><span class="stl_206 stl_123 stl_295">&lt;=== &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 15.7884em; "><span class="stl_148 stl_123 stl_132" style="word-spacing:-0.009em;">HTTP/1.1 200 OK &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 16.6217em; "><span class="stl_148 stl_123 stl_89" style="word-spacing:-0.0005em;">Content-Type: applicaꢁon/vnd.myname.v2+json &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 17.4551em; "><span class="stl_148 stl_123 stl_19">{</span></div>
					<div class="stl_01" style="left:5.678em;top: 18.2884em; "><span class="stl_148 stl_123 stl_103" style="word-spacing:0.0056em;">“user”: { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 19.1217em; z-index:343; "><span class="stl_148 stl_123 stl_55" style="word-spacing:0.0044em;">“ﬁrstname”: “John”, &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 19.9551em; z-index:362; "><span class="stl_148 stl_123 stl_270" style="word-spacing:0.0018em;">“lastname”: “Smith”, &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 20.7884em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0102em;">“amount”: “300” &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 21.6217em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 22.4551em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.0044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">As such, this does represent an incompatible change for the Client – which will have to request &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the new Representation and understand the new semantics, but the URI space will remain &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">stable and will not be affected. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.7245em; "><span class="stl_117 stl_08 stl_27" style="word-spacing:-0.0062em;">5.3. Major Semantic Changes &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 36.5378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">These are changes in the meaning of the Resources, the relations between them or what the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 37.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">map to in the backend. This kinds of changes may require a new media type, or they may &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.2044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">require publishing a new, sibling Resource next to the old one and making use of linking to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.5378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">point to it. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.3711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">While this sounds like using version identiﬁers in the URI all over again, the important &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.6907em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">distinction is that the new Resource i</span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">s published independently of any other Resources in the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.024em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">API </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">and will not fork the entire API at the root. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.8573em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The REST API should adhere to </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">the HATEOAS constraint </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">– most of the URIs should be &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 50.2044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">DISCOVERED by Clients, not hardcoded. Changing such an URI should not be considered an &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 51.5378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">incompatible change – the new URI can replace the old one and Clients will be able to re- &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 52.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">discover the URI and still function. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 55.7044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">It is worth noting however that, while using version identiﬁers in the URI is problematic for all &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.024em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of these reasons, </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">it is not un-RESTful </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">in any way. &nbsp;</span></div>
					<div class="stl_01" style="left:42.6448em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 104 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_105.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_105.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:35.7401em;top: 4.0058em; "><span class="stl_113 stl_08 stl_248" style="word-spacing:-0.0063em;">5.3. Major Semantic Changes &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 12.097em; "><span class="stl_117 stl_08 stl_39" style="word-spacing:0.0024em;">6. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 15.9103em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">This section tried to provide an overview of the very diverse &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 17.2298em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:-0.0001em;">and difﬁcult problem of </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">evolving a REST Service</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. We &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 18.5769em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">discussed the two common solutions, advantages and &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 19.9103em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">disadvantages of each one, and ways to reason about these &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 21.2436em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">approaches in the context of REST. The material concludes by &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 22.5632em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">making the case for the second solution – </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">versioning the &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 23.9798em; "><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">media types</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, while examining the possible changes to a RESTful API. &nbsp;</span></div>
					<div class="stl_01" style="left:42.6584em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 105 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_106.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_106.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_107.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_107.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:42.3367em;top: 4.0058em; "><span class="stl_113 stl_08 stl_114" style="word-spacing:-0.004em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 7.5em; z-index:81; "><span class="stl_115 stl_12 stl_224" style="word-spacing:-0.0009em;">14: TESTING REST WITH &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 10.25em; z-index:98; "><span class="stl_115 stl_12 stl_13" style="word-spacing:-0.0003em;">MULTIPLE MIME TYPES &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1276em; "><span class="stl_117 stl_08 stl_118" style="word-spacing:-0.0038em;">1. Overview &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.9271em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This ﬁnal section will focus on </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">testing a REST Service with multiple Media Types/ &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 24.2604em; "><span class="stl_162 stl_161 stl_20">representations</span><span class="stl_121 stl_120 stl_20">. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.1075em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">We will write integration tests capable of switching between the multiple types of &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.4409em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Representations supported by the API. The goal is to be able to run the exact same test &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.7742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">consuming the exact same URIs of the service, just asking for a different Media Type. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 35.2443em; "><span class="stl_117 stl_08 stl_19" style="word-spacing:0em;">2. Goals &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.0575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Any REST API needs to expose it’s Resources as representations using some sort of Media &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 40.3771em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Type, and in many cases more than a single one. </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">The client will set the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:0em;">Accept </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">header </span><span class="stl_119 stl_120 stl_20">to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 41.7242em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">choose the type of representation it asks for from the service. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 44.5575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Since the Resource can have multiple representations, the server will have to implement a &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.8771em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">mechanism responsible with choosing the right representation</span><span class="stl_119 stl_120 stl_19" style="word-spacing:0.28em;">&nbsp;</span><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0002em;">– also known as </span><span class="stl_162 stl_161 stl_20">Content &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 47.2104em; "><span class="stl_162 stl_161 stl_20">Negotiation</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. Thus, if the client asks for </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">application/xml</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, then it should get an XML &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.5575em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">representation of the Resource, and if it asks for </span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">application/json</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, then it should get JSON. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 54.0276em; z-index:914; "><span class="stl_117 stl_08 stl_19" style="word-spacing:-0.03em;">3. </span><span class="stl_117 stl_08 stl_46">T</span><span class="stl_117 stl_08 stl_19">e</span><span class="stl_117 stl_08 stl_64" style="word-spacing:0.0044em;">sting Infrastructure &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 57.8271em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">We’ll begin by deﬁning a simple interface for a </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">marshaller </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">– this will be the main abstraction &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 59.1742em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">that will allow the test to switch between different Media Types: &nbsp;</span></div>
					<div class="stl_01" style="left:42.6919em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 107 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_108.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_108.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:37.6801em;top: 4.0058em; z-index:5; "><span class="stl_113 stl_08 stl_252" style="word-spacing:-0.03em;">3. </span><span class="stl_113 stl_08 stl_253">T</span><span class="stl_113 stl_08 stl_252">e</span><span class="stl_113 stl_08 stl_296" style="word-spacing:0.0053em;">sting Infrastructure &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 9.7051em; "><span class="stl_148 stl_123 stl_189" style="word-spacing:-0.0139em;">public interface IMarshaller { &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 10.5384em; "><span class="stl_148 stl_123 stl_261">... &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 11.3717em; "><span class="stl_148 stl_123 stl_145" style="word-spacing:-0.0064em;">String getMime(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 12.2051em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.238em;top: 15.7544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Then we need a way to initialize the right marshaller based on some form of external &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 17.0878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">conﬁguration. For this mechanism, we will use a Spring FactoryBean to initialize the &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 18.4073em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">marshaller and a simple </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">property </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">to determine which marshaller to use: &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 22.2051em; "><span class="stl_206 stl_123 stl_175">@Component &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 23.0384em; "><span class="stl_148 stl_123 stl_134">@Proﬁle(“test”) &nbsp;</span></div>
					<div class="stl_01" style="left:5.0714em;top: 23.8717em; "><span class="stl_148 stl_123 stl_219" style="word-spacing:-0.013em;">public class TestMarshallerFactory implements FactoryBean&lt;IMarshaller&gt; { &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 25.5384em; "><span class="stl_148 stl_123 stl_89">@Autowired &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 26.3717em; "><span class="stl_148 stl_123 stl_149" style="word-spacing:-0.0095em;">private Environment env; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 28.0384em; "><span class="stl_148 stl_123 stl_221" style="word-spacing:-0.0136em;">public IMarshaller getObject() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 28.8717em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.0116em;">String testMime = env.getProperty(“test.mime”); &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 29.7051em; "><span class="stl_148 stl_123 stl_268" style="word-spacing:-0.0056em;">if (testMime != null) { &nbsp;</span></div>
					<div class="stl_01" style="left:7.1054em;top: 30.5384em; "><span class="stl_148 stl_123 stl_275" style="word-spacing:-0.0062em;">switch (testMime) { &nbsp;</span></div>
					<div class="stl_01" style="left:7.1054em;top: 31.3717em; z-index:643; "><span class="stl_148 stl_123 stl_61" style="word-spacing:-0.001em;">case “json”: &nbsp;</span></div>
					<div class="stl_01" style="left:7.7834em;top: 32.2051em; "><span class="stl_148 stl_123 stl_179" style="word-spacing:-0.0127em;">return new JacksonMarshaller(); &nbsp;</span></div>
					<div class="stl_01" style="left:7.1054em;top: 33.0384em; z-index:682; "><span class="stl_148 stl_123 stl_293" style="word-spacing:-0.0031em;">case “xml”: &nbsp;</span></div>
					<div class="stl_01" style="left:7.7834em;top: 33.8717em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0109em;">return new XStreamMarshaller(); &nbsp;</span></div>
					<div class="stl_01" style="left:7.1054em;top: 34.7051em; "><span class="stl_148 stl_123 stl_179">default: &nbsp;</span></div>
					<div class="stl_01" style="left:7.7834em;top: 35.5384em; "><span class="stl_148 stl_123 stl_212" style="word-spacing:-0.0106em;">throw new IllegalStateExcepꢁon(); &nbsp;</span></div>
					<div class="stl_01" style="left:7.1054em;top: 36.3717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:6.4274em;top: 37.2051em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:6.4274em;top: 38.8717em; "><span class="stl_148 stl_123 stl_153" style="word-spacing:-0.0127em;">return new JacksonMarshaller(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 39.7051em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.7494em;top: 41.3717em; "><span class="stl_148 stl_123 stl_146" style="word-spacing:-0.011em;">public Class&lt;IMarshaller&gt; getObjectType() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 42.2051em; "><span class="stl_148 stl_123 stl_150" style="word-spacing:-0.0056em;">return IMarshaller.class; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 43.0384em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.7494em;top: 44.7051em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0141em;">public boolean isSingleton() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.4274em;top: 45.5384em; "><span class="stl_148 stl_123 stl_241" style="word-spacing:-0.0092em;">return true; &nbsp;</span></div>
					<div class="stl_01" style="left:5.7494em;top: 46.3717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.0714em;top: 47.2051em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.238em;top: 50.7544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Let’s look over this: &nbsp;</span></div>
					<div class="stl_01" style="left:6.488em;top: 53.5878em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.488em;top: 56.3378em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.988em;top: 53.5878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">ﬁrst, the new </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">Environment </span><a href="http://www.baeldung.com/2012/02/06/properties-with-spring/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">abstraction introduced in Spring 3.1 is used here – for &nbsp;</span></a></div>
					<div class="stl_01" style="left:7.988em;top: 54.9211em; "><a href="http://www.baeldung.com/2012/02/06/properties-with-spring/" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">more on this check out the </span></a><a href="http://www.baeldung.com/2012/02/06/properties-with-spring/" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">detailed article on using Properties with Spring &nbsp;</span></a></div>
					<div class="stl_01" style="left:7.988em;top: 56.324em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">test.mime </span><span class="stl_162 stl_161 stl_20" style="word-spacing:-0.0001em;">property </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">is retrieved from the environment and used to determine &nbsp;</span></div>
					<div class="stl_01" style="left:42.6443em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 108 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_109.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_109.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:34.491em;top: 4.0058em; "><span class="stl_113 stl_08 stl_276" style="word-spacing:-0.0176em;">4. The JSON and XML Marshallers &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 7.3378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">which marshaller to create – some Java 7 </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">switch on String </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">syntax at work here &nbsp;</span></div>
					<div class="stl_01" style="left:6.4167em;top: 8.7544em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:6.4167em;top: 11.5044em; "><span class="stl_121 stl_120 stl_19">•</span></div>
					<div class="stl_01" style="left:7.9167em;top: 8.7407em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">next, the </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">default marshaller</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, in case the property is not deﬁned at all, is going to be the &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 10.0878em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">Jackson marshaller for JSON support &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 11.5044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">ﬁnally – this </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">BeanFactory </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is only active in a test scenario, as the new </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">@Proﬁle </span><span class="stl_121 stl_120 stl_20">support, &nbsp;</span></div>
					<div class="stl_01" style="left:7.9167em;top: 12.8378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">also introduced in Spring 3.1 is used &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 15.6711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">That’s it – the mechanism is able to switch between marshallers based on whatever the value of &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.0044em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">test.mime </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">property is. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 22.4745em; "><span class="stl_117 stl_08 stl_33" style="word-spacing:-0.0176em;">4. The JSON and XML Marshallers &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.2877em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Moving on, we’ll need the actual marshaller implementation – one for each supported Media &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 27.6211em; "><span class="stl_121 stl_120 stl_20">Type. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 30.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">For JSON we’ll use </span><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">Jackson </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">as the underlying library: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 34.2384em; "><span class="stl_148 stl_123 stl_143" style="word-spacing:-0.0128em;">public class JacksonMarshaller implements IMarshaller { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 35.0717em; "><span class="stl_148 stl_123 stl_204" style="word-spacing:-0.0152em;">private ObjectMapper objectMapper; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 36.7384em; "><span class="stl_148 stl_123 stl_219" style="word-spacing:-0.0144em;">public JacksonMarshaller() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 37.5717em; "><span class="stl_148 stl_123 stl_281">super(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 38.4051em; "><span class="stl_148 stl_123 stl_175" style="word-spacing:-0.0138em;">objectMapper = new ObjectMapper(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 39.2384em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5.678em;top: 40.9051em; "><span class="stl_148 stl_123 stl_261">... &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 42.5717em; "><span class="stl_148 stl_123 stl_133">@Override &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 43.4051em; "><span class="stl_148 stl_123 stl_149" style="word-spacing:-0.0098em;">public String getMime() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 44.2384em; "><span class="stl_148 stl_123 stl_241" style="word-spacing:-0.0093em;">return MediaType.APPLICATION_JSON.toString(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 45.0717em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 45.9051em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.4544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">For the XML support, the marshaller uses </span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">XStream</span><span class="stl_121 stl_120 stl_20">: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 53.2384em; "><span class="stl_148 stl_123 stl_192" style="word-spacing:-0.0117em;">public class XStreamMarshaller implements IMarshaller { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 54.0717em; "><span class="stl_148 stl_123 stl_229" style="word-spacing:-0.012em;">private XStream xstream; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 55.7384em; "><span class="stl_148 stl_123 stl_208" style="word-spacing:-0.0122em;">public XStreamMarshaller() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 56.5717em; "><span class="stl_148 stl_123 stl_281">super(); &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 57.4051em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0109em;">xstream = new XStream(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 58.2384em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:42.6453em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 109 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_110.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_110.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:27.9286em;top: 4.0058em; "><span class="stl_113 stl_08 stl_254" style="word-spacing:-0.0093em;">5. Consuming the Service with both JSON and XML &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 7.3484em; "><span class="stl_148 stl_123 stl_261">... &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 9.0151em; "><span class="stl_148 stl_123 stl_149" style="word-spacing:-0.0098em;">public String getMime() { &nbsp;</span></div>
					<div class="stl_01" style="left:6.356em;top: 9.8484em; "><span class="stl_148 stl_123 stl_128" style="word-spacing:-0.0091em;">return MediaType.APPLICATION_XML.toString(); &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 10.6817em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:5em;top: 11.5151em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 16.4673em; "><span class="stl_160 stl_161 stl_20" style="word-spacing:0em;">Note </span><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">that </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">these marshallers are not Spring beans themselves</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. The reason for that is they will &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 17.8144em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">be bootstrapped into the Spring context by the </span><span class="stl_119 stl_120 stl_20" style="font-style:italic;">TestMarshallerFactory</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, so there is no need to &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.1478em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">make them components directly. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.0345em; "><span class="stl_117 stl_08 stl_74" style="word-spacing:-0.0093em;">5. Consuming the Service with both JSON and XML &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.8478em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">At this point we should be able to run a full integration test against the deployed service. Using &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 31.1811em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">the marshaller is straightforward – an </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">IMarshaller </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">is simply injected directly into the test: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 34.3817em; "><span class="stl_148 stl_123 stl_213" style="word-spacing:-0.0116em;">@AcꢁveProﬁles({ “test” }) &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 35.2151em; "><span class="stl_148 stl_123 stl_236" style="word-spacing:-0.0096em;">public abstract class SomeRestLiveTest { &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 36.8817em; "><span class="stl_148 stl_123 stl_89">@Autowired &nbsp;</span></div>
					<div class="stl_01" style="left:5.6803em;top: 37.7151em; "><span class="stl_148 stl_123 stl_153" style="word-spacing:-0.011em;">private IMarshaller marshaller; &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 39.3817em; "><span class="stl_148 stl_123 stl_35" style="word-spacing:0.0076em;">// tests &nbsp;</span></div>
					<div class="stl_01" style="left:5.678em;top: 40.2151em; "><span class="stl_148 stl_123 stl_261">... &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 41.8817em; "><span class="stl_148 stl_123 stl_19">}</span></div>
					<div class="stl_01" style="left:4.1667em;top: 45.4311em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">The exact marshaller that will be injected by Spring will of course be decided by the value &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 46.7644em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">of </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">test.mime property</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">; this could be picked up from a properties ﬁle or simply set on &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 48.084em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">the test environment manually. If however a value is </span><span class="stl_162 stl_161 stl_20" style="word-spacing:0em;">not provided </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">for this property, the &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 49.4311em; "><span class="stl_119 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">TestMarshallerFactory </span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">will simply fall back on the default marshaller – the JSON marshaller. &nbsp;</span></div>
					<div class="stl_01" style="left:42.7264em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 110 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_111.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_111.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:38.4551em;top: 4.0058em; "><span class="stl_113 stl_08 stl_267" style="word-spacing:-0.0045em;">6. Maven and Jenkins &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_21 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 8.5578em; "><span class="stl_117 stl_08 stl_73" style="word-spacing:-0.0045em;">6. Maven and Jenkins &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 12.3711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">If Maven is set up to run integration tests against an already deployed REST Service, then it can &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 13.7044em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">be run like this: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 16.0717em; "><span class="stl_148 stl_123 stl_182" style="word-spacing:-0.0174em;">mvn test -Dtest.mime=xml &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 19.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">Or, if this the build uses the integration-test phase of the Maven lifecycle: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 21.9884em; "><span class="stl_148 stl_123 stl_165" style="word-spacing:-0.0169em;">mvn integraꢁon-test -Dtest.mime=xml &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 25.5377em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">For more details about how to use these phases and how to set up the a Maven build so that it &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 26.8711em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:-0.0001em;">will bind the deployment of the application to the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:0em;">pre-integration-test goal</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, run the integration &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 28.2044em; "><a href="http://www.baeldung.com/2011/10/16/how-to-set-up-integration-testing-with-the-maven-cargo-plugin/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">tests in the integration-test goal and then shut down the deplo</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">yed service in on</span><span class="stl_121 stl_120 stl_19" style="word-spacing:0.2793em;">&nbsp;</span><span class="stl_121 stl_120 stl_20" style="font-style:italic;">post- &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 29.5378em; "><span class="stl_121 stl_120 stl_20" style="font-style:italic;">integration-test</span><a href="http://www.baeldung.com/2011/10/16/how-to-set-up-integration-testing-with-the-maven-cargo-plugin/" target="_blank"><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, see the </span></a><a href="http://www.baeldung.com/2011/10/16/how-to-set-up-integration-testing-with-the-maven-cargo-plugin/" target="_blank"><span class="stl_196 stl_120 stl_20" style="word-spacing:-0.0001em;">Integration Testing with Maven </span></a><span class="stl_121 stl_120 stl_20">article. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 32.3573em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">With </span><span class="stl_162 stl_161 stl_20">Jenkins</span><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">, the job must be conﬁgured with: &nbsp;</span></div>
					<div class="stl_01" style="left:5em;top: 36.1551em; "><span class="stl_148 stl_123 stl_136" style="word-spacing:-0.0121em;">This build is parametrized &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 39.6907em; "><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">And the </span><span class="stl_121 stl_120 stl_20" style="font-style:italic; word-spacing:-0.0001em;">String parameter: </span><span class="stl_162 stl_161 stl_20" style="font-style:italic; word-spacing:-0.0001em;">test.mime=xml </span><span class="stl_121 stl_120 stl_20">added. &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 42.5378em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">A common Jenkins conﬁguration would be having to jobs running the same set of integration &nbsp;</span></div>
					<div class="stl_01" style="left:4.1667em;top: 43.8711em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">tests against the deployed service – one with XML and the other with JSON representations. &nbsp;</span></div>
					<div class="stl_01" style="left:42.793em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 111 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_112.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_112.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:38.4551em;top: 4.0058em; "><span class="stl_113 stl_08 stl_267" style="word-spacing:-0.0045em;">6. Maven and Jenkins &nbsp;</span></div>
					<div class="stl_01" style="left:4.238em;top: 4.1505em; "><span class="stl_57 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 12.8078em; "><span class="stl_117 stl_08 stl_272" style="word-spacing:0.0112em;">7. Conclusion &nbsp;</span></div>
					<div class="stl_01" style="left:16.3263em;top: 16.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">This section showed how to properly test a REST API that &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 17.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">works with multiple representations. Most APIs do publish &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 19.2877em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">their Resources under multiple Representations, so testing all &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 20.6211em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">of these is vital; the fact that we can use the exact same tests &nbsp;</span></div>
					<div class="stl_01" style="left:16.3355em;top: 21.9544em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">across all of them is just cool. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 24.7877em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-jpa#readme" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">The full implementation of this mechanism – using actual integration tests and &nbsp;</span></a></div>
					<div class="stl_01" style="left:7.5em;top: 26.1211em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-jpa#readme" target="_blank"><span class="stl_119 stl_120 stl_20" style="word-spacing:0em;">verifying both the XML and JSON representations – can be found in </span></a><a href="https://github.com/eugenp/tutorials/tree/master/spring-jpa#readme" target="_blank"><span class="stl_244 stl_120 stl_20" style="word-spacing:0em;">the github &nbsp;</span></a></div>
					<div class="stl_01" style="left:7.5em;top: 27.4544em; "><a href="https://github.com/eugenp/tutorials/tree/master/spring-jpa#readme" target="_blank"><span class="stl_244 stl_120 stl_20">project</span></a><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">. This is an Eclipse based project, so it should be easy to import and run as &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top: 28.7878em; "><span class="stl_121 stl_120 stl_20" style="word-spacing:0em;">it is. &nbsp;</span></div>
					<div class="stl_01" style="left:42.7274em;top: 62.1175em; "><span class="stl_56 stl_08 stl_292" style="word-spacing:0.725em;">Page 112 &nbsp;</span></div>
					<div class="stl_01" style="left:45.2814em;top: 62.1175em; "><span class="stl_56 stl_08 stl_20" style="word-spacing:0.4777em;">/ 113 &nbsp;</span></div>
				</div>
			</div>
		</div>
		<div class="stl_02">
			<div class="stl_03">
				<object data="BuildingESTPIithpring.pdf_files/img_113.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:51em; height:66em;">
					<embed src="BuildingESTPIithpring.pdf_files/img_113.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:19.8273em;top: 61.781em; "><span class="stl_197 stl_08 stl_09" style="word-spacing:-0.0193em;">Building a REST API with &nbsp;</span></div>
				</div>
			</div>
		</div>
	</body>
</html>